{
  "version": 3,
  "sources": ["browser-external:typescript", "browser-external:lz-string", "../../../../../node_modules/.bun/unist-util-is@4.1.0/node_modules/unist-util-is/convert.js", "../../../../../node_modules/.bun/unist-util-visit-parents@3.1.1/node_modules/unist-util-visit-parents/color.browser.js", "../../../../../node_modules/.bun/unist-util-visit-parents@3.1.1/node_modules/unist-util-visit-parents/index.js", "../../../../../node_modules/.bun/unist-util-visit@2.0.3/node_modules/unist-util-visit/index.js", "../../../../../node_modules/.bun/vscode-oniguruma@1.7.0/node_modules/vscode-oniguruma/release/main.js", "webpack://vscodetextmate/webpack/universalModuleDefinition", "webpack://vscodetextmate/webpack/bootstrap", "webpack://vscodetextmate/out/grammar.js", "webpack://vscodetextmate/out/utils.js", "webpack://vscodetextmate/out/debug.js", "webpack://vscodetextmate/out/main.js", "webpack://vscodetextmate/out/registry.js", "webpack://vscodetextmate/out/rule.js", "webpack://vscodetextmate/out/matcher.js", "webpack://vscodetextmate/node_modules/process/browser.js", "webpack://vscodetextmate/out/grammarReader.js", "webpack://vscodetextmate/out/plist.js", "webpack://vscodetextmate/out/json.js", "webpack://vscodetextmate/out/theme.js", "browser-external:path", "browser-external:fs", "browser-external:crypto", "../../../../../node_modules/.bun/@typescript+twoslash@3.1.0/node_modules/@typescript/twoslash/package.json", "../../../../../node_modules/.bun/typescript@5.9.3/node_modules/typescript/package.json", "../../../../../node_modules/.bun/@typescript+vfs@1.3.5/node_modules/@typescript/vfs/src/index.ts", "../../../../../node_modules/.bun/@typescript+twoslash@3.1.0/node_modules/@typescript/twoslash/src/utils.ts", "../../../../../node_modules/.bun/@typescript+twoslash@3.1.0/node_modules/@typescript/twoslash/src/validation.ts", "../../../../../node_modules/.bun/@typescript+twoslash@3.1.0/node_modules/@typescript/twoslash/src/index.ts", "../../../../../node_modules/.bun/fenceparser@1.1.1/node_modules/fenceparser/src/utils.ts", "../../../../../node_modules/.bun/fenceparser@1.1.1/node_modules/fenceparser/src/Lexer.ts", "../../../../../node_modules/.bun/fenceparser@1.1.1/node_modules/fenceparser/src/Parser.ts", "../../../../../node_modules/.bun/fenceparser@1.1.1/node_modules/fenceparser/src/index.ts", "../../../../../node_modules/.bun/shiki@0.10.1/node_modules/shiki/dist/index.esm.js", "../../../../../node_modules/.bun/shiki-twoslash@3.1.2+1fb4c65d43e298b9/node_modules/shiki-twoslash/src/annotations.ts", "../../../../../node_modules/.bun/shiki-twoslash@3.1.2+1fb4c65d43e298b9/node_modules/shiki-twoslash/src/utils.ts", "../../../../../node_modules/.bun/shiki-twoslash@3.1.2+1fb4c65d43e298b9/node_modules/shiki-twoslash/src/renderers/plain.ts", "../../../../../node_modules/.bun/shiki-twoslash@3.1.2+1fb4c65d43e298b9/node_modules/shiki-twoslash/src/renderers/twoslash.ts", "../../../../../node_modules/.bun/shiki-twoslash@3.1.2+1fb4c65d43e298b9/node_modules/shiki-twoslash/src/renderers/shiki.ts", "../../../../../node_modules/.bun/shiki-twoslash@3.1.2+1fb4c65d43e298b9/node_modules/shiki-twoslash/src/tsconfig-oneliners.generated.ts", "../../../../../node_modules/.bun/shiki-twoslash@3.1.2+1fb4c65d43e298b9/node_modules/shiki-twoslash/src/renderers/tsconfig.ts", "../../../../../node_modules/.bun/shiki-twoslash@3.1.2+1fb4c65d43e298b9/node_modules/shiki-twoslash/src/index.ts", "../../../../../node_modules/.bun/remark-shiki-twoslash@3.1.3+1fb4c65d43e298b9/node_modules/.pnpm/regenerator-runtime@0.13.7/node_modules/regenerator-runtime/runtime.js", "../../../../../node_modules/.bun/remark-shiki-twoslash@3.1.3+1fb4c65d43e298b9/node_modules/remark-shiki-twoslash/src/caching.ts", "../../../../../node_modules/.bun/remark-shiki-twoslash@3.1.3+1fb4c65d43e298b9/node_modules/remark-shiki-twoslash/src/includes.ts", "../../../../../node_modules/.bun/remark-shiki-twoslash@3.1.3+1fb4c65d43e298b9/node_modules/remark-shiki-twoslash/src/exceptionMessageDOM.ts", "../../../../../node_modules/.bun/remark-shiki-twoslash@3.1.3+1fb4c65d43e298b9/node_modules/remark-shiki-twoslash/src/index.ts"],
  "sourcesContent": ["module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"typescript\" has been externalized for browser compatibility. Cannot access \"typescript.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"lz-string\" has been externalized for browser compatibility. Cannot access \"lz-string.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "'use strict'\n\nmodule.exports = convert\n\nfunction convert(test) {\n  if (test == null) {\n    return ok\n  }\n\n  if (typeof test === 'string') {\n    return typeFactory(test)\n  }\n\n  if (typeof test === 'object') {\n    return 'length' in test ? anyFactory(test) : allFactory(test)\n  }\n\n  if (typeof test === 'function') {\n    return test\n  }\n\n  throw new Error('Expected function, string, or object as test')\n}\n\n// Utility assert each property in `test` is represented in `node`, and each\n// values are strictly equal.\nfunction allFactory(test) {\n  return all\n\n  function all(node) {\n    var key\n\n    for (key in test) {\n      if (node[key] !== test[key]) return false\n    }\n\n    return true\n  }\n}\n\nfunction anyFactory(tests) {\n  var checks = []\n  var index = -1\n\n  while (++index < tests.length) {\n    checks[index] = convert(tests[index])\n  }\n\n  return any\n\n  function any() {\n    var index = -1\n\n    while (++index < checks.length) {\n      if (checks[index].apply(this, arguments)) {\n        return true\n      }\n    }\n\n    return false\n  }\n}\n\n// Utility to convert a string into a function which checks a given nodeâ€™s type\n// for said string.\nfunction typeFactory(test) {\n  return type\n\n  function type(node) {\n    return Boolean(node && node.type === test)\n  }\n}\n\n// Utility to return true.\nfunction ok() {\n  return true\n}\n", "module.exports = identity\nfunction identity(d) {\n  return d\n}\n", "'use strict'\n\nmodule.exports = visitParents\n\nvar convert = require('unist-util-is/convert')\nvar color = require('./color')\n\nvar CONTINUE = true\nvar SKIP = 'skip'\nvar EXIT = false\n\nvisitParents.CONTINUE = CONTINUE\nvisitParents.SKIP = SKIP\nvisitParents.EXIT = EXIT\n\nfunction visitParents(tree, test, visitor, reverse) {\n  var step\n  var is\n\n  if (typeof test === 'function' && typeof visitor !== 'function') {\n    reverse = visitor\n    visitor = test\n    test = null\n  }\n\n  is = convert(test)\n  step = reverse ? -1 : 1\n\n  factory(tree, null, [])()\n\n  function factory(node, index, parents) {\n    var value = typeof node === 'object' && node !== null ? node : {}\n    var name\n\n    if (typeof value.type === 'string') {\n      name =\n        typeof value.tagName === 'string'\n          ? value.tagName\n          : typeof value.name === 'string'\n          ? value.name\n          : undefined\n\n      visit.displayName =\n        'node (' + color(value.type + (name ? '<' + name + '>' : '')) + ')'\n    }\n\n    return visit\n\n    function visit() {\n      var grandparents = parents.concat(node)\n      var result = []\n      var subresult\n      var offset\n\n      if (!test || is(node, index, parents[parents.length - 1] || null)) {\n        result = toResult(visitor(node, parents))\n\n        if (result[0] === EXIT) {\n          return result\n        }\n      }\n\n      if (node.children && result[0] !== SKIP) {\n        offset = (reverse ? node.children.length : -1) + step\n\n        while (offset > -1 && offset < node.children.length) {\n          subresult = factory(node.children[offset], offset, grandparents)()\n\n          if (subresult[0] === EXIT) {\n            return subresult\n          }\n\n          offset =\n            typeof subresult[1] === 'number' ? subresult[1] : offset + step\n        }\n      }\n\n      return result\n    }\n  }\n}\n\nfunction toResult(value) {\n  if (value !== null && typeof value === 'object' && 'length' in value) {\n    return value\n  }\n\n  if (typeof value === 'number') {\n    return [CONTINUE, value]\n  }\n\n  return [value]\n}\n", "'use strict'\n\nmodule.exports = visit\n\nvar visitParents = require('unist-util-visit-parents')\n\nvar CONTINUE = visitParents.CONTINUE\nvar SKIP = visitParents.SKIP\nvar EXIT = visitParents.EXIT\n\nvisit.CONTINUE = CONTINUE\nvisit.SKIP = SKIP\nvisit.EXIT = EXIT\n\nfunction visit(tree, test, visitor, reverse) {\n  if (typeof test === 'function' && typeof visitor !== 'function') {\n    reverse = visitor\n    visitor = test\n    test = null\n  }\n\n  visitParents(tree, test, overload, reverse)\n\n  function overload(node, parents) {\n    var parent = parents[parents.length - 1]\n    var index = parent ? parent.children.indexOf(node) : null\n    return visitor(node, index, parent)\n  }\n}\n", "!function(t,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define([],n):\"object\"==typeof exports?exports.onig=n():t.onig=n()}(this,(()=>{return t={770:function(t,n,e){\"use strict\";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,\"__esModule\",{value:!0}),n.setDefaultDebugCall=n.createOnigScanner=n.createOnigString=n.loadWASM=n.OnigScanner=n.OnigString=void 0;const i=r(e(418));let o=null,a=!1;class f{static _utf8ByteLength(t){let n=0;for(let e=0,r=t.length;e<r;e++){const i=t.charCodeAt(e);let o=i,a=!1;if(i>=55296&&i<=56319&&e+1<r){const n=t.charCodeAt(e+1);n>=56320&&n<=57343&&(o=65536+(i-55296<<10)|n-56320,a=!0)}n+=o<=127?1:o<=2047?2:o<=65535?3:4,a&&e++}return n}constructor(t){const n=t.length,e=f._utf8ByteLength(t),r=e!==n,i=r?new Uint32Array(n+1):null;r&&(i[n]=e);const o=r?new Uint32Array(e+1):null;r&&(o[e]=n);const a=new Uint8Array(e);let s=0;for(let e=0;e<n;e++){const f=t.charCodeAt(e);let u=f,c=!1;if(f>=55296&&f<=56319&&e+1<n){const n=t.charCodeAt(e+1);n>=56320&&n<=57343&&(u=65536+(f-55296<<10)|n-56320,c=!0)}r&&(i[e]=s,c&&(i[e+1]=s),u<=127?o[s+0]=e:u<=2047?(o[s+0]=e,o[s+1]=e):u<=65535?(o[s+0]=e,o[s+1]=e,o[s+2]=e):(o[s+0]=e,o[s+1]=e,o[s+2]=e,o[s+3]=e)),u<=127?a[s++]=u:u<=2047?(a[s++]=192|(1984&u)>>>6,a[s++]=128|(63&u)>>>0):u<=65535?(a[s++]=224|(61440&u)>>>12,a[s++]=128|(4032&u)>>>6,a[s++]=128|(63&u)>>>0):(a[s++]=240|(1835008&u)>>>18,a[s++]=128|(258048&u)>>>12,a[s++]=128|(4032&u)>>>6,a[s++]=128|(63&u)>>>0),c&&e++}this.utf16Length=n,this.utf8Length=e,this.utf16Value=t,this.utf8Value=a,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=o}createString(t){const n=t._omalloc(this.utf8Length);return t.HEAPU8.set(this.utf8Value,n),n}}class s{constructor(t){if(this.id=++s.LAST_ID,!o)throw new Error(\"Must invoke loadWASM first.\");this._onigBinding=o,this.content=t;const n=new f(t);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!s._sharedPtrInUse?(s._sharedPtr||(s._sharedPtr=o._omalloc(1e4)),s._sharedPtrInUse=!0,o.HEAPU8.set(n.utf8Value,s._sharedPtr),this.ptr=s._sharedPtr):this.ptr=n.createString(o)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===s._sharedPtr?s._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}n.OnigString=s,s.LAST_ID=0,s._sharedPtr=0,s._sharedPtrInUse=!1;class u{constructor(t){if(!o)throw new Error(\"Must invoke loadWASM first.\");const n=[],e=[];for(let r=0,i=t.length;r<i;r++){const i=new f(t[r]);n[r]=i.createString(o),e[r]=i.utf8Length}const r=o._omalloc(4*t.length);o.HEAPU32.set(n,r/4);const i=o._omalloc(4*t.length);o.HEAPU32.set(e,i/4);const a=o._createOnigScanner(r,i,t.length);for(let e=0,r=t.length;e<r;e++)o._ofree(n[e]);o._ofree(i),o._ofree(r),0===a&&function(t){throw new Error(t.UTF8ToString(t._getLastOnigError()))}(o),this._onigBinding=o,this._ptr=a}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(t,n,e){let r=a,i=0;if(\"number\"==typeof e?(8&e&&(r=!0),i=e):\"boolean\"==typeof e&&(r=e),\"string\"==typeof t){t=new s(t);const e=this._findNextMatchSync(t,n,r,i);return t.dispose(),e}return this._findNextMatchSync(t,n,r,i)}_findNextMatchSync(t,n,e,r){const i=this._onigBinding;let o;if(o=e?i._findNextOnigScannerMatchDbg(this._ptr,t.id,t.ptr,t.utf8Length,t.convertUtf16OffsetToUtf8(n),r):i._findNextOnigScannerMatch(this._ptr,t.id,t.ptr,t.utf8Length,t.convertUtf16OffsetToUtf8(n),r),0===o)return null;const a=i.HEAPU32;let f=o/4;const s=a[f++],u=a[f++];let c=[];for(let n=0;n<u;n++){const e=t.convertUtf8OffsetToUtf16(a[f++]),r=t.convertUtf8OffsetToUtf16(a[f++]);c[n]={start:e,end:r,length:r-e}}return{index:s,captureIndices:c}}}n.OnigScanner=u;let c=!1,l=null;n.loadWASM=function(t){if(c)return l;let n,e,r,a;if(c=!0,function(t){return\"function\"==typeof t.instantiator}(t))n=t.instantiator,e=t.print;else{let r;!function(t){return void 0!==t.data}(t)?r=t:(r=t.data,e=t.print),n=function(t){return\"undefined\"!=typeof Response&&t instanceof Response}(r)?\"function\"==typeof WebAssembly.instantiateStreaming?function(t){return n=>WebAssembly.instantiateStreaming(t,n)}(r):function(t){return async n=>{const e=await t.arrayBuffer();return WebAssembly.instantiate(e,n)}}(r):function(t){return n=>WebAssembly.instantiate(t,n)}(r)}return l=new Promise(((t,n)=>{r=t,a=n})),function(t,n,e,r){(0,i.default)({print:n,instantiateWasm:(n,e)=>{if(\"undefined\"==typeof performance){const t=()=>Date.now();n.env.emscripten_get_now=t,n.wasi_snapshot_preview1.emscripten_get_now=t}return t(n).then((t=>e(t.instance)),r),{}}}).then((t=>{o=t,e()}))}(n,e,r,a),l},n.createOnigString=function(t){return new s(t)},n.createOnigScanner=function(t){return new u(t)},n.setDefaultDebugCall=function(t){a=t}},418:t=>{var n=(\"undefined\"!=typeof document&&document.currentScript&&document.currentScript.src,function(t){var n,e,r=void 0!==(t=t||{})?t:{};r.ready=new Promise((function(t,r){n=t,e=r}));var i,o=Object.assign({},r),a=[],f=!1,s=!1,u=!0,c=\"\";function l(t){return r.locateFile?r.locateFile(t,c):c+t}u&&(i=function(t){let n;return\"function\"==typeof readbuffer?new Uint8Array(readbuffer(t)):(n=read(t,\"binary\"),m(\"object\"==typeof n),n)},\"undefined\"!=typeof scriptArgs?a=scriptArgs:void 0!==arguments&&(a=arguments),\"undefined\"!=typeof onig_print&&(\"undefined\"==typeof console&&(console={}),console.log=onig_print,console.warn=console.error=\"undefined\"!=typeof printErr?printErr:onig_print));var h,p,d=r.print||console.log.bind(console),g=r.printErr||console.warn.bind(console);Object.assign(r,o),o=null,r.arguments&&(a=r.arguments),r.thisProgram&&r.thisProgram,r.quit&&r.quit,r.wasmBinary&&(h=r.wasmBinary),r.noExitRuntime,\"object\"!=typeof WebAssembly&&k(\"no native wasm support detected\");var _=!1;function m(t,n){t||k(n)}var y,w,S,v=\"undefined\"!=typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;function A(t,n,e){for(var r=n+e,i=n;t[i]&&!(i>=r);)++i;if(i-n>16&&t.buffer&&v)return v.decode(t.subarray(n,i));for(var o=\"\";n<i;){var a=t[n++];if(128&a){var f=63&t[n++];if(192!=(224&a)){var s=63&t[n++];if((a=224==(240&a)?(15&a)<<12|f<<6|s:(7&a)<<18|f<<12|s<<6|63&t[n++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|f)}else o+=String.fromCharCode(a)}return o}function b(t,n){return t?A(w,t,n):\"\"}function O(t){y=t,r.HEAP8=new Int8Array(t),r.HEAP16=new Int16Array(t),r.HEAP32=new Int32Array(t),r.HEAPU8=w=new Uint8Array(t),r.HEAPU16=new Uint16Array(t),r.HEAPU32=S=new Uint32Array(t),r.HEAPF32=new Float32Array(t),r.HEAPF64=new Float64Array(t)}r.INITIAL_MEMORY;var U=[],P=[],R=[];function x(){if(r.preRun)for(\"function\"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)M(r.preRun.shift());G(U)}function T(){G(P)}function E(){if(r.postRun)for(\"function\"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)I(r.postRun.shift());G(R)}function M(t){U.unshift(t)}function L(t){P.unshift(t)}function I(t){R.unshift(t)}var W=0,D=null,C=null;function N(t){W++,r.monitorRunDependencies&&r.monitorRunDependencies(W)}function j(t){if(W--,r.monitorRunDependencies&&r.monitorRunDependencies(W),0==W&&(null!==D&&(clearInterval(D),D=null),C)){var n=C;C=null,n()}}function k(t){r.onAbort&&r.onAbort(t),g(t=\"Aborted(\"+t+\")\"),_=!0,t+=\". Build with -sASSERTIONS for more info.\";var n=new WebAssembly.RuntimeError(t);throw e(n),n}var B,H,F=\"data:application/octet-stream;base64,\";function V(t){return t.startsWith(F)}function z(t){try{if(t==B&&h)return new Uint8Array(h);if(i)return i(t);throw\"both async and sync fetching of the wasm failed\"}catch(t){k(t)}}function q(){return h||!f&&!s||\"function\"!=typeof fetch?Promise.resolve().then((function(){return z(B)})):fetch(B,{credentials:\"same-origin\"}).then((function(t){if(!t.ok)throw\"failed to load wasm binary file at '\"+B+\"'\";return t.arrayBuffer()})).catch((function(){return z(B)}))}function Y(){var t={env:nt,wasi_snapshot_preview1:nt};function n(t,n){var e=t.exports;r.asm=e,O((p=r.asm.memory).buffer),r.asm.__indirect_function_table,L(r.asm.__wasm_call_ctors),j()}function i(t){n(t.instance)}function o(n){return q().then((function(n){return WebAssembly.instantiate(n,t)})).then((function(t){return t})).then(n,(function(t){g(\"failed to asynchronously prepare wasm: \"+t),k(t)}))}if(N(),r.instantiateWasm)try{return r.instantiateWasm(t,n)}catch(t){g(\"Module.instantiateWasm callback failed with error: \"+t),e(t)}return(h||\"function\"!=typeof WebAssembly.instantiateStreaming||V(B)||\"function\"!=typeof fetch?o(i):fetch(B,{credentials:\"same-origin\"}).then((function(n){return WebAssembly.instantiateStreaming(n,t).then(i,(function(t){return g(\"wasm streaming compile failed: \"+t),g(\"falling back to ArrayBuffer instantiation\"),o(i)}))}))).catch(e),{}}function G(t){for(;t.length>0;)t.shift()(r)}function J(t,n,e){w.copyWithin(t,n,n+e)}function K(t){try{return p.grow(t-y.byteLength+65535>>>16),O(p.buffer),1}catch(t){}}function Q(t){var n,e=w.length,r=2147483648;if((t>>>=0)>r)return!1;for(var i=1;i<=4;i*=2){var o=e*(1+.2/i);if(o=Math.min(o,t+100663296),K(Math.min(r,(n=Math.max(t,o))+(65536-n%65536)%65536)))return!0}return!1}V(B=\"onig.wasm\")||(B=l(B)),H=\"undefined\"!=typeof dateNow?dateNow:()=>performance.now();var X=[null,[],[]];function Z(t,n){var e=X[t];0===n||10===n?((1===t?d:g)(A(e,0)),e.length=0):e.push(n)}function $(t,n,e,r){for(var i=0,o=0;o<e;o++){var a=S[n>>2],f=S[n+4>>2];n+=8;for(var s=0;s<f;s++)Z(t,w[a+s]);i+=f}return S[r>>2]=i,0}var tt,nt={emscripten_get_now:H,emscripten_memcpy_big:J,emscripten_resize_heap:Q,fd_write:$};function et(t){function e(){tt||(tt=!0,r.calledRun=!0,_||(T(),n(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),E()))}t=t||a,W>0||(x(),W>0||(r.setStatus?(r.setStatus(\"Running...\"),setTimeout((function(){setTimeout((function(){r.setStatus(\"\")}),1),e()}),1)):e()))}if(Y(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},r.___errno_location=function(){return(r.___errno_location=r.asm.__errno_location).apply(null,arguments)},r._omalloc=function(){return(r._omalloc=r.asm.omalloc).apply(null,arguments)},r._ofree=function(){return(r._ofree=r.asm.ofree).apply(null,arguments)},r._getLastOnigError=function(){return(r._getLastOnigError=r.asm.getLastOnigError).apply(null,arguments)},r._createOnigScanner=function(){return(r._createOnigScanner=r.asm.createOnigScanner).apply(null,arguments)},r._freeOnigScanner=function(){return(r._freeOnigScanner=r.asm.freeOnigScanner).apply(null,arguments)},r._findNextOnigScannerMatch=function(){return(r._findNextOnigScannerMatch=r.asm.findNextOnigScannerMatch).apply(null,arguments)},r._findNextOnigScannerMatchDbg=function(){return(r._findNextOnigScannerMatchDbg=r.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},r.stackSave=function(){return(r.stackSave=r.asm.stackSave).apply(null,arguments)},r.stackRestore=function(){return(r.stackRestore=r.asm.stackRestore).apply(null,arguments)},r.stackAlloc=function(){return(r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.dynCall_jiji).apply(null,arguments)},r.UTF8ToString=b,C=function t(){tt||et(),tt||(C=t)},r.preInit)for(\"function\"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return et(),t.ready});t.exports=n}},n={},function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r].call(o.exports,o,o.exports,e),o.exports}(770);var t,n}));", "(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vscodetextmate\"] = factory();\n\telse\n\t\troot[\"vscodetextmate\"] = factory();\n})(this, function() {\nreturn ", " \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar rule_1 = require(\"./rule\");\nvar matcher_1 = require(\"./matcher\");\nvar debug_1 = require(\"./debug\");\nvar performanceNow = (function () {\n    if (typeof performance === 'undefined') {\n        // performance.now() is not available in this environment, so use Date.now()\n        return function () { return Date.now(); };\n    }\n    else {\n        return function () { return performance.now(); };\n    }\n})();\nfunction createGrammar(grammar, initialLanguage, embeddedLanguages, tokenTypes, grammarRepository, onigLib) {\n    return new Grammar(grammar, initialLanguage, embeddedLanguages, tokenTypes, grammarRepository, onigLib); //TODO\n}\nexports.createGrammar = createGrammar;\nvar FullScopeDependency = /** @class */ (function () {\n    function FullScopeDependency(scopeName) {\n        this.scopeName = scopeName;\n    }\n    return FullScopeDependency;\n}());\nexports.FullScopeDependency = FullScopeDependency;\nvar PartialScopeDependency = /** @class */ (function () {\n    function PartialScopeDependency(scopeName, include) {\n        this.scopeName = scopeName;\n        this.include = include;\n    }\n    PartialScopeDependency.prototype.toKey = function () {\n        return this.scopeName + \"#\" + this.include;\n    };\n    return PartialScopeDependency;\n}());\nexports.PartialScopeDependency = PartialScopeDependency;\nvar ScopeDependencyCollector = /** @class */ (function () {\n    function ScopeDependencyCollector() {\n        this.full = [];\n        this.partial = [];\n        this.visitedRule = new Set();\n        this._seenFull = new Set();\n        this._seenPartial = new Set();\n    }\n    ScopeDependencyCollector.prototype.add = function (dep) {\n        if (dep instanceof FullScopeDependency) {\n            if (!this._seenFull.has(dep.scopeName)) {\n                this._seenFull.add(dep.scopeName);\n                this.full.push(dep);\n            }\n        }\n        else {\n            if (!this._seenPartial.has(dep.toKey())) {\n                this._seenPartial.add(dep.toKey());\n                this.partial.push(dep);\n            }\n        }\n    };\n    return ScopeDependencyCollector;\n}());\nexports.ScopeDependencyCollector = ScopeDependencyCollector;\n/**\n * Fill in `result` all external included scopes in `patterns`\n */\nfunction _extractIncludedScopesInPatterns(result, baseGrammar, selfGrammar, patterns, repository) {\n    for (var _i = 0, patterns_1 = patterns; _i < patterns_1.length; _i++) {\n        var pattern = patterns_1[_i];\n        if (result.visitedRule.has(pattern)) {\n            continue;\n        }\n        result.visitedRule.add(pattern);\n        var patternRepository = (pattern.repository ? utils_1.mergeObjects({}, repository, pattern.repository) : repository);\n        if (Array.isArray(pattern.patterns)) {\n            _extractIncludedScopesInPatterns(result, baseGrammar, selfGrammar, pattern.patterns, patternRepository);\n        }\n        var include = pattern.include;\n        if (!include) {\n            continue;\n        }\n        if (include === '$base' || include === baseGrammar.scopeName) {\n            collectDependencies(result, baseGrammar, baseGrammar);\n        }\n        else if (include === '$self' || include === selfGrammar.scopeName) {\n            collectDependencies(result, baseGrammar, selfGrammar);\n        }\n        else if (include.charAt(0) === '#') {\n            collectSpecificDependencies(result, baseGrammar, selfGrammar, include.substring(1), patternRepository);\n        }\n        else {\n            var sharpIndex = include.indexOf('#');\n            if (sharpIndex >= 0) {\n                var scopeName = include.substring(0, sharpIndex);\n                var includedName = include.substring(sharpIndex + 1);\n                if (scopeName === baseGrammar.scopeName) {\n                    collectSpecificDependencies(result, baseGrammar, baseGrammar, includedName, patternRepository);\n                }\n                else if (scopeName === selfGrammar.scopeName) {\n                    collectSpecificDependencies(result, baseGrammar, selfGrammar, includedName, patternRepository);\n                }\n                else {\n                    result.add(new PartialScopeDependency(scopeName, include.substring(sharpIndex + 1)));\n                }\n            }\n            else {\n                result.add(new FullScopeDependency(include));\n            }\n        }\n    }\n}\n/**\n * Collect a specific dependency from the grammar's repository\n */\nfunction collectSpecificDependencies(result, baseGrammar, selfGrammar, include, repository) {\n    if (repository === void 0) { repository = selfGrammar.repository; }\n    if (repository && repository[include]) {\n        var rule = repository[include];\n        _extractIncludedScopesInPatterns(result, baseGrammar, selfGrammar, [rule], repository);\n    }\n}\nexports.collectSpecificDependencies = collectSpecificDependencies;\n/**\n * Collects the list of all external included scopes in `grammar`.\n */\nfunction collectDependencies(result, baseGrammar, selfGrammar) {\n    if (selfGrammar.patterns && Array.isArray(selfGrammar.patterns)) {\n        _extractIncludedScopesInPatterns(result, baseGrammar, selfGrammar, selfGrammar.patterns, selfGrammar.repository);\n    }\n    if (selfGrammar.injections) {\n        var injections = [];\n        for (var injection in selfGrammar.injections) {\n            injections.push(selfGrammar.injections[injection]);\n        }\n        _extractIncludedScopesInPatterns(result, baseGrammar, selfGrammar, injections, selfGrammar.repository);\n    }\n}\nexports.collectDependencies = collectDependencies;\nfunction scopesAreMatching(thisScopeName, scopeName) {\n    if (!thisScopeName) {\n        return false;\n    }\n    if (thisScopeName === scopeName) {\n        return true;\n    }\n    var len = scopeName.length;\n    return thisScopeName.length > len && thisScopeName.substr(0, len) === scopeName && thisScopeName[len] === '.';\n}\nfunction nameMatcher(identifers, scopes) {\n    if (scopes.length < identifers.length) {\n        return false;\n    }\n    var lastIndex = 0;\n    return identifers.every(function (identifier) {\n        for (var i = lastIndex; i < scopes.length; i++) {\n            if (scopesAreMatching(scopes[i], identifier)) {\n                lastIndex = i + 1;\n                return true;\n            }\n        }\n        return false;\n    });\n}\nfunction collectInjections(result, selector, rule, ruleFactoryHelper, grammar) {\n    var matchers = matcher_1.createMatchers(selector, nameMatcher);\n    var ruleId = rule_1.RuleFactory.getCompiledRuleId(rule, ruleFactoryHelper, grammar.repository);\n    for (var _i = 0, matchers_1 = matchers; _i < matchers_1.length; _i++) {\n        var matcher = matchers_1[_i];\n        result.push({\n            matcher: matcher.matcher,\n            ruleId: ruleId,\n            grammar: grammar,\n            priority: matcher.priority\n        });\n    }\n}\nvar ScopeMetadata = /** @class */ (function () {\n    function ScopeMetadata(scopeName, languageId, tokenType, themeData) {\n        this.scopeName = scopeName;\n        this.languageId = languageId;\n        this.tokenType = tokenType;\n        this.themeData = themeData;\n    }\n    return ScopeMetadata;\n}());\nexports.ScopeMetadata = ScopeMetadata;\nvar ScopeMetadataProvider = /** @class */ (function () {\n    function ScopeMetadataProvider(initialLanguage, themeProvider, embeddedLanguages) {\n        this._initialLanguage = initialLanguage;\n        this._themeProvider = themeProvider;\n        this._cache = new Map();\n        this._defaultMetaData = new ScopeMetadata('', this._initialLanguage, 0 /* Other */, [this._themeProvider.getDefaults()]);\n        // embeddedLanguages handling\n        this._embeddedLanguages = Object.create(null);\n        if (embeddedLanguages) {\n            // If embeddedLanguages are configured, fill in `this._embeddedLanguages`\n            var scopes = Object.keys(embeddedLanguages);\n            for (var i = 0, len = scopes.length; i < len; i++) {\n                var scope = scopes[i];\n                var language = embeddedLanguages[scope];\n                if (typeof language !== 'number' || language === 0) {\n                    console.warn('Invalid embedded language found at scope ' + scope + ': <<' + language + '>>');\n                    // never hurts to be too careful\n                    continue;\n                }\n                this._embeddedLanguages[scope] = language;\n            }\n        }\n        // create the regex\n        var escapedScopes = Object.keys(this._embeddedLanguages).map(function (scopeName) { return ScopeMetadataProvider._escapeRegExpCharacters(scopeName); });\n        if (escapedScopes.length === 0) {\n            // no scopes registered\n            this._embeddedLanguagesRegex = null;\n        }\n        else {\n            escapedScopes.sort();\n            escapedScopes.reverse();\n            this._embeddedLanguagesRegex = new RegExp(\"^((\" + escapedScopes.join(')|(') + \"))($|\\\\.)\", '');\n        }\n    }\n    ScopeMetadataProvider.prototype.onDidChangeTheme = function () {\n        this._cache = new Map();\n        this._defaultMetaData = new ScopeMetadata('', this._initialLanguage, 0 /* Other */, [this._themeProvider.getDefaults()]);\n    };\n    ScopeMetadataProvider.prototype.getDefaultMetadata = function () {\n        return this._defaultMetaData;\n    };\n    /**\n     * Escapes regular expression characters in a given string\n     */\n    ScopeMetadataProvider._escapeRegExpCharacters = function (value) {\n        return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&');\n    };\n    ScopeMetadataProvider.prototype.getMetadataForScope = function (scopeName) {\n        if (scopeName === null) {\n            return ScopeMetadataProvider._NULL_SCOPE_METADATA;\n        }\n        var value = this._cache.get(scopeName);\n        if (value) {\n            return value;\n        }\n        value = this._doGetMetadataForScope(scopeName);\n        this._cache.set(scopeName, value);\n        return value;\n    };\n    ScopeMetadataProvider.prototype._doGetMetadataForScope = function (scopeName) {\n        var languageId = this._scopeToLanguage(scopeName);\n        var standardTokenType = this._toStandardTokenType(scopeName);\n        var themeData = this._themeProvider.themeMatch(scopeName);\n        return new ScopeMetadata(scopeName, languageId, standardTokenType, themeData);\n    };\n    /**\n     * Given a produced TM scope, return the language that token describes or null if unknown.\n     * e.g. source.html => html, source.css.embedded.html => css, punctuation.definition.tag.html => null\n     */\n    ScopeMetadataProvider.prototype._scopeToLanguage = function (scope) {\n        if (!scope) {\n            return 0;\n        }\n        if (!this._embeddedLanguagesRegex) {\n            // no scopes registered\n            return 0;\n        }\n        var m = scope.match(this._embeddedLanguagesRegex);\n        if (!m) {\n            // no scopes matched\n            return 0;\n        }\n        var language = this._embeddedLanguages[m[1]] || 0;\n        if (!language) {\n            return 0;\n        }\n        return language;\n    };\n    ScopeMetadataProvider.prototype._toStandardTokenType = function (tokenType) {\n        var m = tokenType.match(ScopeMetadataProvider.STANDARD_TOKEN_TYPE_REGEXP);\n        if (!m) {\n            return 0 /* Other */;\n        }\n        switch (m[1]) {\n            case 'comment':\n                return 1 /* Comment */;\n            case 'string':\n                return 2 /* String */;\n            case 'regex':\n                return 4 /* RegEx */;\n            case 'meta.embedded':\n                return 8 /* MetaEmbedded */;\n        }\n        throw new Error('Unexpected match for standard token type!');\n    };\n    ScopeMetadataProvider._NULL_SCOPE_METADATA = new ScopeMetadata('', 0, 0, null);\n    ScopeMetadataProvider.STANDARD_TOKEN_TYPE_REGEXP = /\\b(comment|string|regex|meta\\.embedded)\\b/;\n    return ScopeMetadataProvider;\n}());\nvar Grammar = /** @class */ (function () {\n    function Grammar(grammar, initialLanguage, embeddedLanguages, tokenTypes, grammarRepository, onigLib) {\n        this._scopeMetadataProvider = new ScopeMetadataProvider(initialLanguage, grammarRepository, embeddedLanguages);\n        this._onigLib = onigLib;\n        this._rootId = -1;\n        this._lastRuleId = 0;\n        this._ruleId2desc = [null];\n        this._includedGrammars = {};\n        this._grammarRepository = grammarRepository;\n        this._grammar = initGrammar(grammar, null);\n        this._injections = null;\n        this._tokenTypeMatchers = [];\n        if (tokenTypes) {\n            for (var _i = 0, _a = Object.keys(tokenTypes); _i < _a.length; _i++) {\n                var selector = _a[_i];\n                var matchers = matcher_1.createMatchers(selector, nameMatcher);\n                for (var _b = 0, matchers_2 = matchers; _b < matchers_2.length; _b++) {\n                    var matcher = matchers_2[_b];\n                    this._tokenTypeMatchers.push({\n                        matcher: matcher.matcher,\n                        type: tokenTypes[selector]\n                    });\n                }\n            }\n        }\n    }\n    Grammar.prototype.dispose = function () {\n        for (var _i = 0, _a = this._ruleId2desc; _i < _a.length; _i++) {\n            var rule = _a[_i];\n            if (rule) {\n                rule.dispose();\n            }\n        }\n    };\n    Grammar.prototype.createOnigScanner = function (sources) {\n        return this._onigLib.createOnigScanner(sources);\n    };\n    Grammar.prototype.createOnigString = function (sources) {\n        return this._onigLib.createOnigString(sources);\n    };\n    Grammar.prototype.onDidChangeTheme = function () {\n        this._scopeMetadataProvider.onDidChangeTheme();\n    };\n    Grammar.prototype.getMetadataForScope = function (scope) {\n        return this._scopeMetadataProvider.getMetadataForScope(scope);\n    };\n    Grammar.prototype.getInjections = function () {\n        var _this = this;\n        if (this._injections === null) {\n            this._injections = [];\n            // add injections from the current grammar\n            var rawInjections = this._grammar.injections;\n            if (rawInjections) {\n                for (var expression in rawInjections) {\n                    collectInjections(this._injections, expression, rawInjections[expression], this, this._grammar);\n                }\n            }\n            // add injection grammars contributed for the current scope\n            if (this._grammarRepository) {\n                var injectionScopeNames = this._grammarRepository.injections(this._grammar.scopeName);\n                if (injectionScopeNames) {\n                    injectionScopeNames.forEach(function (injectionScopeName) {\n                        var injectionGrammar = _this.getExternalGrammar(injectionScopeName);\n                        if (injectionGrammar) {\n                            var selector = injectionGrammar.injectionSelector;\n                            if (selector) {\n                                collectInjections(_this._injections, selector, injectionGrammar, _this, injectionGrammar);\n                            }\n                        }\n                    });\n                }\n            }\n            this._injections.sort(function (i1, i2) { return i1.priority - i2.priority; }); // sort by priority\n        }\n        return this._injections;\n    };\n    Grammar.prototype.registerRule = function (factory) {\n        var id = (++this._lastRuleId);\n        var result = factory(id);\n        this._ruleId2desc[id] = result;\n        return result;\n    };\n    Grammar.prototype.getRule = function (patternId) {\n        return this._ruleId2desc[patternId];\n    };\n    Grammar.prototype.getExternalGrammar = function (scopeName, repository) {\n        if (this._includedGrammars[scopeName]) {\n            return this._includedGrammars[scopeName];\n        }\n        else if (this._grammarRepository) {\n            var rawIncludedGrammar = this._grammarRepository.lookup(scopeName);\n            if (rawIncludedGrammar) {\n                // console.log('LOADED GRAMMAR ' + pattern.include);\n                this._includedGrammars[scopeName] = initGrammar(rawIncludedGrammar, repository && repository.$base);\n                return this._includedGrammars[scopeName];\n            }\n        }\n        return null;\n    };\n    Grammar.prototype.tokenizeLine = function (lineText, prevState) {\n        var r = this._tokenize(lineText, prevState, false);\n        return {\n            tokens: r.lineTokens.getResult(r.ruleStack, r.lineLength),\n            ruleStack: r.ruleStack\n        };\n    };\n    Grammar.prototype.tokenizeLine2 = function (lineText, prevState) {\n        var r = this._tokenize(lineText, prevState, true);\n        return {\n            tokens: r.lineTokens.getBinaryResult(r.ruleStack, r.lineLength),\n            ruleStack: r.ruleStack\n        };\n    };\n    Grammar.prototype._tokenize = function (lineText, prevState, emitBinaryTokens) {\n        if (this._rootId === -1) {\n            this._rootId = rule_1.RuleFactory.getCompiledRuleId(this._grammar.repository.$self, this, this._grammar.repository);\n        }\n        var isFirstLine;\n        if (!prevState || prevState === StackElement.NULL) {\n            isFirstLine = true;\n            var rawDefaultMetadata = this._scopeMetadataProvider.getDefaultMetadata();\n            var defaultTheme = rawDefaultMetadata.themeData[0];\n            var defaultMetadata = StackElementMetadata.set(0, rawDefaultMetadata.languageId, rawDefaultMetadata.tokenType, defaultTheme.fontStyle, defaultTheme.foreground, defaultTheme.background);\n            var rootScopeName = this.getRule(this._rootId).getName(null, null);\n            var rawRootMetadata = this._scopeMetadataProvider.getMetadataForScope(rootScopeName);\n            var rootMetadata = ScopeListElement.mergeMetadata(defaultMetadata, null, rawRootMetadata);\n            var scopeList = new ScopeListElement(null, rootScopeName === null ? 'unknown' : rootScopeName, rootMetadata);\n            prevState = new StackElement(null, this._rootId, -1, -1, false, null, scopeList, scopeList);\n        }\n        else {\n            isFirstLine = false;\n            prevState.reset();\n        }\n        lineText = lineText + '\\n';\n        var onigLineText = this.createOnigString(lineText);\n        var lineLength = onigLineText.content.length;\n        var lineTokens = new LineTokens(emitBinaryTokens, lineText, this._tokenTypeMatchers);\n        var nextState = _tokenizeString(this, onigLineText, isFirstLine, 0, prevState, lineTokens, true);\n        disposeOnigString(onigLineText);\n        return {\n            lineLength: lineLength,\n            lineTokens: lineTokens,\n            ruleStack: nextState\n        };\n    };\n    return Grammar;\n}());\nexports.Grammar = Grammar;\nfunction disposeOnigString(str) {\n    if (typeof str.dispose === 'function') {\n        str.dispose();\n    }\n}\nfunction initGrammar(grammar, base) {\n    grammar = utils_1.clone(grammar);\n    grammar.repository = grammar.repository || {};\n    grammar.repository.$self = {\n        $vscodeTextmateLocation: grammar.$vscodeTextmateLocation,\n        patterns: grammar.patterns,\n        name: grammar.scopeName\n    };\n    grammar.repository.$base = base || grammar.repository.$self;\n    return grammar;\n}\nfunction handleCaptures(grammar, lineText, isFirstLine, stack, lineTokens, captures, captureIndices) {\n    if (captures.length === 0) {\n        return;\n    }\n    var lineTextContent = lineText.content;\n    var len = Math.min(captures.length, captureIndices.length);\n    var localStack = [];\n    var maxEnd = captureIndices[0].end;\n    for (var i = 0; i < len; i++) {\n        var captureRule = captures[i];\n        if (captureRule === null) {\n            // Not interested\n            continue;\n        }\n        var captureIndex = captureIndices[i];\n        if (captureIndex.length === 0) {\n            // Nothing really captured\n            continue;\n        }\n        if (captureIndex.start > maxEnd) {\n            // Capture going beyond consumed string\n            break;\n        }\n        // pop captures while needed\n        while (localStack.length > 0 && localStack[localStack.length - 1].endPos <= captureIndex.start) {\n            // pop!\n            lineTokens.produceFromScopes(localStack[localStack.length - 1].scopes, localStack[localStack.length - 1].endPos);\n            localStack.pop();\n        }\n        if (localStack.length > 0) {\n            lineTokens.produceFromScopes(localStack[localStack.length - 1].scopes, captureIndex.start);\n        }\n        else {\n            lineTokens.produce(stack, captureIndex.start);\n        }\n        if (captureRule.retokenizeCapturedWithRuleId) {\n            // the capture requires additional matching\n            var scopeName = captureRule.getName(lineTextContent, captureIndices);\n            var nameScopesList = stack.contentNameScopesList.push(grammar, scopeName);\n            var contentName = captureRule.getContentName(lineTextContent, captureIndices);\n            var contentNameScopesList = nameScopesList.push(grammar, contentName);\n            var stackClone = stack.push(captureRule.retokenizeCapturedWithRuleId, captureIndex.start, -1, false, null, nameScopesList, contentNameScopesList);\n            var onigSubStr = grammar.createOnigString(lineTextContent.substring(0, captureIndex.end));\n            _tokenizeString(grammar, onigSubStr, (isFirstLine && captureIndex.start === 0), captureIndex.start, stackClone, lineTokens, false);\n            disposeOnigString(onigSubStr);\n            continue;\n        }\n        var captureRuleScopeName = captureRule.getName(lineTextContent, captureIndices);\n        if (captureRuleScopeName !== null) {\n            // push\n            var base = localStack.length > 0 ? localStack[localStack.length - 1].scopes : stack.contentNameScopesList;\n            var captureRuleScopesList = base.push(grammar, captureRuleScopeName);\n            localStack.push(new LocalStackElement(captureRuleScopesList, captureIndex.end));\n        }\n    }\n    while (localStack.length > 0) {\n        // pop!\n        lineTokens.produceFromScopes(localStack[localStack.length - 1].scopes, localStack[localStack.length - 1].endPos);\n        localStack.pop();\n    }\n}\nfunction debugCompiledRuleToString(ruleScanner) {\n    var r = [];\n    for (var i = 0, len = ruleScanner.rules.length; i < len; i++) {\n        r.push('   - ' + ruleScanner.rules[i] + ': ' + ruleScanner.debugRegExps[i]);\n    }\n    return r.join('\\n');\n}\nfunction matchInjections(injections, grammar, lineText, isFirstLine, linePos, stack, anchorPosition) {\n    // The lower the better\n    var bestMatchRating = Number.MAX_VALUE;\n    var bestMatchCaptureIndices = null;\n    var bestMatchRuleId;\n    var bestMatchResultPriority = 0;\n    var scopes = stack.contentNameScopesList.generateScopes();\n    for (var i = 0, len = injections.length; i < len; i++) {\n        var injection = injections[i];\n        if (!injection.matcher(scopes)) {\n            // injection selector doesn't match stack\n            continue;\n        }\n        var ruleScanner = grammar.getRule(injection.ruleId).compile(grammar, null, isFirstLine, linePos === anchorPosition);\n        var matchResult = ruleScanner.scanner.findNextMatchSync(lineText, linePos);\n        if (debug_1.DebugFlags.InDebugMode) {\n            console.log('  scanning for injections');\n            console.log(debugCompiledRuleToString(ruleScanner));\n        }\n        if (!matchResult) {\n            continue;\n        }\n        var matchRating = matchResult.captureIndices[0].start;\n        if (matchRating >= bestMatchRating) {\n            // Injections are sorted by priority, so the previous injection had a better or equal priority\n            continue;\n        }\n        bestMatchRating = matchRating;\n        bestMatchCaptureIndices = matchResult.captureIndices;\n        bestMatchRuleId = ruleScanner.rules[matchResult.index];\n        bestMatchResultPriority = injection.priority;\n        if (bestMatchRating === linePos) {\n            // No more need to look at the rest of the injections.\n            break;\n        }\n    }\n    if (bestMatchCaptureIndices) {\n        return {\n            priorityMatch: bestMatchResultPriority === -1,\n            captureIndices: bestMatchCaptureIndices,\n            matchedRuleId: bestMatchRuleId\n        };\n    }\n    return null;\n}\nfunction matchRule(grammar, lineText, isFirstLine, linePos, stack, anchorPosition) {\n    var rule = stack.getRule(grammar);\n    var ruleScanner = rule.compile(grammar, stack.endRule, isFirstLine, linePos === anchorPosition);\n    var perfStart = 0;\n    if (debug_1.DebugFlags.InDebugMode) {\n        perfStart = performanceNow();\n    }\n    var r = ruleScanner.scanner.findNextMatchSync(lineText, linePos);\n    if (debug_1.DebugFlags.InDebugMode) {\n        var elapsedMillis = performanceNow() - perfStart;\n        if (elapsedMillis > 5) {\n            console.warn(\"Rule \" + rule.debugName + \" (\" + rule.id + \") matching took \" + elapsedMillis + \" against '\" + lineText + \"'\");\n        }\n        // console.log(`  scanning for (linePos: ${linePos}, anchorPosition: ${anchorPosition})`);\n        // console.log(debugCompiledRuleToString(ruleScanner));\n        if (r) {\n            console.log(\"matched rule id: \" + ruleScanner.rules[r.index] + \" from \" + r.captureIndices[0].start + \" to \" + r.captureIndices[0].end);\n        }\n    }\n    if (r) {\n        return {\n            captureIndices: r.captureIndices,\n            matchedRuleId: ruleScanner.rules[r.index]\n        };\n    }\n    return null;\n}\nfunction matchRuleOrInjections(grammar, lineText, isFirstLine, linePos, stack, anchorPosition) {\n    // Look for normal grammar rule\n    var matchResult = matchRule(grammar, lineText, isFirstLine, linePos, stack, anchorPosition);\n    // Look for injected rules\n    var injections = grammar.getInjections();\n    if (injections.length === 0) {\n        // No injections whatsoever => early return\n        return matchResult;\n    }\n    var injectionResult = matchInjections(injections, grammar, lineText, isFirstLine, linePos, stack, anchorPosition);\n    if (!injectionResult) {\n        // No injections matched => early return\n        return matchResult;\n    }\n    if (!matchResult) {\n        // Only injections matched => early return\n        return injectionResult;\n    }\n    // Decide if `matchResult` or `injectionResult` should win\n    var matchResultScore = matchResult.captureIndices[0].start;\n    var injectionResultScore = injectionResult.captureIndices[0].start;\n    if (injectionResultScore < matchResultScore || (injectionResult.priorityMatch && injectionResultScore === matchResultScore)) {\n        // injection won!\n        return injectionResult;\n    }\n    return matchResult;\n}\n/**\n * Walk the stack from bottom to top, and check each while condition in this order.\n * If any fails, cut off the entire stack above the failed while condition. While conditions\n * may also advance the linePosition.\n */\nfunction _checkWhileConditions(grammar, lineText, isFirstLine, linePos, stack, lineTokens) {\n    var anchorPosition = (stack.beginRuleCapturedEOL ? 0 : -1);\n    var whileRules = [];\n    for (var node = stack; node; node = node.pop()) {\n        var nodeRule = node.getRule(grammar);\n        if (nodeRule instanceof rule_1.BeginWhileRule) {\n            whileRules.push({\n                rule: nodeRule,\n                stack: node\n            });\n        }\n    }\n    for (var whileRule = whileRules.pop(); whileRule; whileRule = whileRules.pop()) {\n        var ruleScanner = whileRule.rule.compileWhile(grammar, whileRule.stack.endRule, isFirstLine, anchorPosition === linePos);\n        var r = ruleScanner.scanner.findNextMatchSync(lineText, linePos);\n        if (debug_1.DebugFlags.InDebugMode) {\n            console.log('  scanning for while rule');\n            console.log(debugCompiledRuleToString(ruleScanner));\n        }\n        if (r) {\n            var matchedRuleId = ruleScanner.rules[r.index];\n            if (matchedRuleId !== -2) {\n                // we shouldn't end up here\n                stack = whileRule.stack.pop();\n                break;\n            }\n            if (r.captureIndices && r.captureIndices.length) {\n                lineTokens.produce(whileRule.stack, r.captureIndices[0].start);\n                handleCaptures(grammar, lineText, isFirstLine, whileRule.stack, lineTokens, whileRule.rule.whileCaptures, r.captureIndices);\n                lineTokens.produce(whileRule.stack, r.captureIndices[0].end);\n                anchorPosition = r.captureIndices[0].end;\n                if (r.captureIndices[0].end > linePos) {\n                    linePos = r.captureIndices[0].end;\n                    isFirstLine = false;\n                }\n            }\n        }\n        else {\n            if (debug_1.DebugFlags.InDebugMode) {\n                console.log('  popping ' + whileRule.rule.debugName + ' - ' + whileRule.rule.debugWhileRegExp);\n            }\n            stack = whileRule.stack.pop();\n            break;\n        }\n    }\n    return { stack: stack, linePos: linePos, anchorPosition: anchorPosition, isFirstLine: isFirstLine };\n}\nfunction _tokenizeString(grammar, lineText, isFirstLine, linePos, stack, lineTokens, checkWhileConditions) {\n    var lineLength = lineText.content.length;\n    var STOP = false;\n    var anchorPosition = -1;\n    if (checkWhileConditions) {\n        var whileCheckResult = _checkWhileConditions(grammar, lineText, isFirstLine, linePos, stack, lineTokens);\n        stack = whileCheckResult.stack;\n        linePos = whileCheckResult.linePos;\n        isFirstLine = whileCheckResult.isFirstLine;\n        anchorPosition = whileCheckResult.anchorPosition;\n    }\n    while (!STOP) {\n        scanNext(); // potentially modifies linePos && anchorPosition\n    }\n    function scanNext() {\n        if (debug_1.DebugFlags.InDebugMode) {\n            console.log('');\n            console.log(\"@@scanNext \" + linePos + \": |\" + lineText.content.substr(linePos).replace(/\\n$/, '\\\\n') + \"|\");\n        }\n        var r = matchRuleOrInjections(grammar, lineText, isFirstLine, linePos, stack, anchorPosition);\n        if (!r) {\n            if (debug_1.DebugFlags.InDebugMode) {\n                console.log('  no more matches.');\n            }\n            // No match\n            lineTokens.produce(stack, lineLength);\n            STOP = true;\n            return;\n        }\n        var captureIndices = r.captureIndices;\n        var matchedRuleId = r.matchedRuleId;\n        var hasAdvanced = (captureIndices && captureIndices.length > 0) ? (captureIndices[0].end > linePos) : false;\n        if (matchedRuleId === -1) {\n            // We matched the `end` for this rule => pop it\n            var poppedRule = stack.getRule(grammar);\n            if (debug_1.DebugFlags.InDebugMode) {\n                console.log('  popping ' + poppedRule.debugName + ' - ' + poppedRule.debugEndRegExp);\n            }\n            lineTokens.produce(stack, captureIndices[0].start);\n            stack = stack.setContentNameScopesList(stack.nameScopesList);\n            handleCaptures(grammar, lineText, isFirstLine, stack, lineTokens, poppedRule.endCaptures, captureIndices);\n            lineTokens.produce(stack, captureIndices[0].end);\n            // pop\n            var popped = stack;\n            stack = stack.pop();\n            anchorPosition = popped.getAnchorPos();\n            if (!hasAdvanced && popped.getEnterPos() === linePos) {\n                // Grammar pushed & popped a rule without advancing\n                if (debug_1.DebugFlags.InDebugMode) {\n                    console.error('[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing');\n                }\n                // See https://github.com/Microsoft/vscode-textmate/issues/12\n                // Let's assume this was a mistake by the grammar author and the intent was to continue in this state\n                stack = popped;\n                lineTokens.produce(stack, lineLength);\n                STOP = true;\n                return;\n            }\n        }\n        else {\n            // We matched a rule!\n            var _rule = grammar.getRule(matchedRuleId);\n            lineTokens.produce(stack, captureIndices[0].start);\n            var beforePush = stack;\n            // push it on the stack rule\n            var scopeName = _rule.getName(lineText.content, captureIndices);\n            var nameScopesList = stack.contentNameScopesList.push(grammar, scopeName);\n            stack = stack.push(matchedRuleId, linePos, anchorPosition, captureIndices[0].end === lineLength, null, nameScopesList, nameScopesList);\n            if (_rule instanceof rule_1.BeginEndRule) {\n                var pushedRule = _rule;\n                if (debug_1.DebugFlags.InDebugMode) {\n                    console.log('  pushing ' + pushedRule.debugName + ' - ' + pushedRule.debugBeginRegExp);\n                }\n                handleCaptures(grammar, lineText, isFirstLine, stack, lineTokens, pushedRule.beginCaptures, captureIndices);\n                lineTokens.produce(stack, captureIndices[0].end);\n                anchorPosition = captureIndices[0].end;\n                var contentName = pushedRule.getContentName(lineText.content, captureIndices);\n                var contentNameScopesList = nameScopesList.push(grammar, contentName);\n                stack = stack.setContentNameScopesList(contentNameScopesList);\n                if (pushedRule.endHasBackReferences) {\n                    stack = stack.setEndRule(pushedRule.getEndWithResolvedBackReferences(lineText.content, captureIndices));\n                }\n                if (!hasAdvanced && beforePush.hasSameRuleAs(stack)) {\n                    // Grammar pushed the same rule without advancing\n                    if (debug_1.DebugFlags.InDebugMode) {\n                        console.error('[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing');\n                    }\n                    stack = stack.pop();\n                    lineTokens.produce(stack, lineLength);\n                    STOP = true;\n                    return;\n                }\n            }\n            else if (_rule instanceof rule_1.BeginWhileRule) {\n                var pushedRule = _rule;\n                if (debug_1.DebugFlags.InDebugMode) {\n                    console.log('  pushing ' + pushedRule.debugName);\n                }\n                handleCaptures(grammar, lineText, isFirstLine, stack, lineTokens, pushedRule.beginCaptures, captureIndices);\n                lineTokens.produce(stack, captureIndices[0].end);\n                anchorPosition = captureIndices[0].end;\n                var contentName = pushedRule.getContentName(lineText.content, captureIndices);\n                var contentNameScopesList = nameScopesList.push(grammar, contentName);\n                stack = stack.setContentNameScopesList(contentNameScopesList);\n                if (pushedRule.whileHasBackReferences) {\n                    stack = stack.setEndRule(pushedRule.getWhileWithResolvedBackReferences(lineText.content, captureIndices));\n                }\n                if (!hasAdvanced && beforePush.hasSameRuleAs(stack)) {\n                    // Grammar pushed the same rule without advancing\n                    if (debug_1.DebugFlags.InDebugMode) {\n                        console.error('[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing');\n                    }\n                    stack = stack.pop();\n                    lineTokens.produce(stack, lineLength);\n                    STOP = true;\n                    return;\n                }\n            }\n            else {\n                var matchingRule = _rule;\n                if (debug_1.DebugFlags.InDebugMode) {\n                    console.log('  matched ' + matchingRule.debugName + ' - ' + matchingRule.debugMatchRegExp);\n                }\n                handleCaptures(grammar, lineText, isFirstLine, stack, lineTokens, matchingRule.captures, captureIndices);\n                lineTokens.produce(stack, captureIndices[0].end);\n                // pop rule immediately since it is a MatchRule\n                stack = stack.pop();\n                if (!hasAdvanced) {\n                    // Grammar is not advancing, nor is it pushing/popping\n                    if (debug_1.DebugFlags.InDebugMode) {\n                        console.error('[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping');\n                    }\n                    stack = stack.safePop();\n                    lineTokens.produce(stack, lineLength);\n                    STOP = true;\n                    return;\n                }\n            }\n        }\n        if (captureIndices[0].end > linePos) {\n            // Advance stream\n            linePos = captureIndices[0].end;\n            isFirstLine = false;\n        }\n    }\n    return stack;\n}\nvar StackElementMetadata = /** @class */ (function () {\n    function StackElementMetadata() {\n    }\n    StackElementMetadata.toBinaryStr = function (metadata) {\n        var r = metadata.toString(2);\n        while (r.length < 32) {\n            r = '0' + r;\n        }\n        return r;\n    };\n    StackElementMetadata.printMetadata = function (metadata) {\n        var languageId = StackElementMetadata.getLanguageId(metadata);\n        var tokenType = StackElementMetadata.getTokenType(metadata);\n        var fontStyle = StackElementMetadata.getFontStyle(metadata);\n        var foreground = StackElementMetadata.getForeground(metadata);\n        var background = StackElementMetadata.getBackground(metadata);\n        console.log({\n            languageId: languageId,\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: foreground,\n            background: background,\n        });\n    };\n    StackElementMetadata.getLanguageId = function (metadata) {\n        return (metadata & 255 /* LANGUAGEID_MASK */) >>> 0 /* LANGUAGEID_OFFSET */;\n    };\n    StackElementMetadata.getTokenType = function (metadata) {\n        return (metadata & 1792 /* TOKEN_TYPE_MASK */) >>> 8 /* TOKEN_TYPE_OFFSET */;\n    };\n    StackElementMetadata.getFontStyle = function (metadata) {\n        return (metadata & 14336 /* FONT_STYLE_MASK */) >>> 11 /* FONT_STYLE_OFFSET */;\n    };\n    StackElementMetadata.getForeground = function (metadata) {\n        return (metadata & 8372224 /* FOREGROUND_MASK */) >>> 14 /* FOREGROUND_OFFSET */;\n    };\n    StackElementMetadata.getBackground = function (metadata) {\n        return (metadata & 4286578688 /* BACKGROUND_MASK */) >>> 23 /* BACKGROUND_OFFSET */;\n    };\n    StackElementMetadata.set = function (metadata, languageId, tokenType, fontStyle, foreground, background) {\n        var _languageId = StackElementMetadata.getLanguageId(metadata);\n        var _tokenType = StackElementMetadata.getTokenType(metadata);\n        var _fontStyle = StackElementMetadata.getFontStyle(metadata);\n        var _foreground = StackElementMetadata.getForeground(metadata);\n        var _background = StackElementMetadata.getBackground(metadata);\n        if (languageId !== 0) {\n            _languageId = languageId;\n        }\n        if (tokenType !== 0 /* Other */) {\n            _tokenType = tokenType === 8 /* MetaEmbedded */ ? 0 /* Other */ : tokenType;\n        }\n        if (fontStyle !== -1 /* NotSet */) {\n            _fontStyle = fontStyle;\n        }\n        if (foreground !== 0) {\n            _foreground = foreground;\n        }\n        if (background !== 0) {\n            _background = background;\n        }\n        return ((_languageId << 0 /* LANGUAGEID_OFFSET */)\n            | (_tokenType << 8 /* TOKEN_TYPE_OFFSET */)\n            | (_fontStyle << 11 /* FONT_STYLE_OFFSET */)\n            | (_foreground << 14 /* FOREGROUND_OFFSET */)\n            | (_background << 23 /* BACKGROUND_OFFSET */)) >>> 0;\n    };\n    return StackElementMetadata;\n}());\nexports.StackElementMetadata = StackElementMetadata;\nvar ScopeListElement = /** @class */ (function () {\n    function ScopeListElement(parent, scope, metadata) {\n        this.parent = parent;\n        this.scope = scope;\n        this.metadata = metadata;\n    }\n    ScopeListElement._equals = function (a, b) {\n        do {\n            if (a === b) {\n                return true;\n            }\n            if (!a && !b) {\n                // End of list reached for both\n                return true;\n            }\n            if (!a || !b) {\n                // End of list reached only for one\n                return false;\n            }\n            if (a.scope !== b.scope || a.metadata !== b.metadata) {\n                return false;\n            }\n            // Go to previous pair\n            a = a.parent;\n            b = b.parent;\n        } while (true);\n    };\n    ScopeListElement.prototype.equals = function (other) {\n        return ScopeListElement._equals(this, other);\n    };\n    ScopeListElement._matchesScope = function (scope, selector, selectorWithDot) {\n        return (selector === scope || scope.substring(0, selectorWithDot.length) === selectorWithDot);\n    };\n    ScopeListElement._matches = function (target, parentScopes) {\n        if (parentScopes === null) {\n            return true;\n        }\n        var len = parentScopes.length;\n        var index = 0;\n        var selector = parentScopes[index];\n        var selectorWithDot = selector + '.';\n        while (target) {\n            if (this._matchesScope(target.scope, selector, selectorWithDot)) {\n                index++;\n                if (index === len) {\n                    return true;\n                }\n                selector = parentScopes[index];\n                selectorWithDot = selector + '.';\n            }\n            target = target.parent;\n        }\n        return false;\n    };\n    ScopeListElement.mergeMetadata = function (metadata, scopesList, source) {\n        if (source === null) {\n            return metadata;\n        }\n        var fontStyle = -1 /* NotSet */;\n        var foreground = 0;\n        var background = 0;\n        if (source.themeData !== null) {\n            // Find the first themeData that matches\n            for (var i = 0, len = source.themeData.length; i < len; i++) {\n                var themeData = source.themeData[i];\n                if (this._matches(scopesList, themeData.parentScopes)) {\n                    fontStyle = themeData.fontStyle;\n                    foreground = themeData.foreground;\n                    background = themeData.background;\n                    break;\n                }\n            }\n        }\n        return StackElementMetadata.set(metadata, source.languageId, source.tokenType, fontStyle, foreground, background);\n    };\n    ScopeListElement._push = function (target, grammar, scopes) {\n        for (var i = 0, len = scopes.length; i < len; i++) {\n            var scope = scopes[i];\n            var rawMetadata = grammar.getMetadataForScope(scope);\n            var metadata = ScopeListElement.mergeMetadata(target.metadata, target, rawMetadata);\n            target = new ScopeListElement(target, scope, metadata);\n        }\n        return target;\n    };\n    ScopeListElement.prototype.push = function (grammar, scope) {\n        if (scope === null) {\n            return this;\n        }\n        if (scope.indexOf(' ') >= 0) {\n            // there are multiple scopes to push\n            return ScopeListElement._push(this, grammar, scope.split(/ /g));\n        }\n        // there is a single scope to push\n        return ScopeListElement._push(this, grammar, [scope]);\n    };\n    ScopeListElement._generateScopes = function (scopesList) {\n        var result = [];\n        var resultLen = 0;\n        while (scopesList) {\n            result[resultLen++] = scopesList.scope;\n            scopesList = scopesList.parent;\n        }\n        result.reverse();\n        return result;\n    };\n    ScopeListElement.prototype.generateScopes = function () {\n        return ScopeListElement._generateScopes(this);\n    };\n    return ScopeListElement;\n}());\nexports.ScopeListElement = ScopeListElement;\n/**\n * Represents a \"pushed\" state on the stack (as a linked list element).\n */\nvar StackElement = /** @class */ (function () {\n    function StackElement(parent, ruleId, enterPos, anchorPos, beginRuleCapturedEOL, endRule, nameScopesList, contentNameScopesList) {\n        this.parent = parent;\n        this.depth = (this.parent ? this.parent.depth + 1 : 1);\n        this.ruleId = ruleId;\n        this._enterPos = enterPos;\n        this._anchorPos = anchorPos;\n        this.beginRuleCapturedEOL = beginRuleCapturedEOL;\n        this.endRule = endRule;\n        this.nameScopesList = nameScopesList;\n        this.contentNameScopesList = contentNameScopesList;\n    }\n    /**\n     * A structural equals check. Does not take into account `scopes`.\n     */\n    StackElement._structuralEquals = function (a, b) {\n        do {\n            if (a === b) {\n                return true;\n            }\n            if (!a && !b) {\n                // End of list reached for both\n                return true;\n            }\n            if (!a || !b) {\n                // End of list reached only for one\n                return false;\n            }\n            if (a.depth !== b.depth || a.ruleId !== b.ruleId || a.endRule !== b.endRule) {\n                return false;\n            }\n            // Go to previous pair\n            a = a.parent;\n            b = b.parent;\n        } while (true);\n    };\n    StackElement._equals = function (a, b) {\n        if (a === b) {\n            return true;\n        }\n        if (!this._structuralEquals(a, b)) {\n            return false;\n        }\n        return a.contentNameScopesList.equals(b.contentNameScopesList);\n    };\n    StackElement.prototype.clone = function () {\n        return this;\n    };\n    StackElement.prototype.equals = function (other) {\n        if (other === null) {\n            return false;\n        }\n        return StackElement._equals(this, other);\n    };\n    StackElement._reset = function (el) {\n        while (el) {\n            el._enterPos = -1;\n            el._anchorPos = -1;\n            el = el.parent;\n        }\n    };\n    StackElement.prototype.reset = function () {\n        StackElement._reset(this);\n    };\n    StackElement.prototype.pop = function () {\n        return this.parent;\n    };\n    StackElement.prototype.safePop = function () {\n        if (this.parent) {\n            return this.parent;\n        }\n        return this;\n    };\n    StackElement.prototype.push = function (ruleId, enterPos, anchorPos, beginRuleCapturedEOL, endRule, nameScopesList, contentNameScopesList) {\n        return new StackElement(this, ruleId, enterPos, anchorPos, beginRuleCapturedEOL, endRule, nameScopesList, contentNameScopesList);\n    };\n    StackElement.prototype.getEnterPos = function () {\n        return this._enterPos;\n    };\n    StackElement.prototype.getAnchorPos = function () {\n        return this._anchorPos;\n    };\n    StackElement.prototype.getRule = function (grammar) {\n        return grammar.getRule(this.ruleId);\n    };\n    StackElement.prototype._writeString = function (res, outIndex) {\n        if (this.parent) {\n            outIndex = this.parent._writeString(res, outIndex);\n        }\n        res[outIndex++] = \"(\" + this.ruleId + \", TODO-\" + this.nameScopesList + \", TODO-\" + this.contentNameScopesList + \")\";\n        return outIndex;\n    };\n    StackElement.prototype.toString = function () {\n        var r = [];\n        this._writeString(r, 0);\n        return '[' + r.join(',') + ']';\n    };\n    StackElement.prototype.setContentNameScopesList = function (contentNameScopesList) {\n        if (this.contentNameScopesList === contentNameScopesList) {\n            return this;\n        }\n        return this.parent.push(this.ruleId, this._enterPos, this._anchorPos, this.beginRuleCapturedEOL, this.endRule, this.nameScopesList, contentNameScopesList);\n    };\n    StackElement.prototype.setEndRule = function (endRule) {\n        if (this.endRule === endRule) {\n            return this;\n        }\n        return new StackElement(this.parent, this.ruleId, this._enterPos, this._anchorPos, this.beginRuleCapturedEOL, endRule, this.nameScopesList, this.contentNameScopesList);\n    };\n    StackElement.prototype.hasSameRuleAs = function (other) {\n        return this.ruleId === other.ruleId;\n    };\n    StackElement.NULL = new StackElement(null, 0, 0, 0, false, null, null, null);\n    return StackElement;\n}());\nexports.StackElement = StackElement;\nvar LocalStackElement = /** @class */ (function () {\n    function LocalStackElement(scopes, endPos) {\n        this.scopes = scopes;\n        this.endPos = endPos;\n    }\n    return LocalStackElement;\n}());\nexports.LocalStackElement = LocalStackElement;\nvar LineTokens = /** @class */ (function () {\n    function LineTokens(emitBinaryTokens, lineText, tokenTypeOverrides) {\n        this._emitBinaryTokens = emitBinaryTokens;\n        this._tokenTypeOverrides = tokenTypeOverrides;\n        if (debug_1.DebugFlags.InDebugMode) {\n            this._lineText = lineText;\n        }\n        else {\n            this._lineText = null;\n        }\n        this._tokens = [];\n        this._binaryTokens = [];\n        this._lastTokenEndIndex = 0;\n    }\n    LineTokens.prototype.produce = function (stack, endIndex) {\n        this.produceFromScopes(stack.contentNameScopesList, endIndex);\n    };\n    LineTokens.prototype.produceFromScopes = function (scopesList, endIndex) {\n        if (this._lastTokenEndIndex >= endIndex) {\n            return;\n        }\n        if (this._emitBinaryTokens) {\n            var metadata = scopesList.metadata;\n            for (var _i = 0, _a = this._tokenTypeOverrides; _i < _a.length; _i++) {\n                var tokenType = _a[_i];\n                if (tokenType.matcher(scopesList.generateScopes())) {\n                    metadata = StackElementMetadata.set(metadata, 0, toTemporaryType(tokenType.type), -1 /* NotSet */, 0, 0);\n                }\n            }\n            if (this._binaryTokens.length > 0 && this._binaryTokens[this._binaryTokens.length - 1] === metadata) {\n                // no need to push a token with the same metadata\n                this._lastTokenEndIndex = endIndex;\n                return;\n            }\n            this._binaryTokens.push(this._lastTokenEndIndex);\n            this._binaryTokens.push(metadata);\n            this._lastTokenEndIndex = endIndex;\n            return;\n        }\n        var scopes = scopesList.generateScopes();\n        if (debug_1.DebugFlags.InDebugMode) {\n            console.log('  token: |' + this._lineText.substring(this._lastTokenEndIndex, endIndex).replace(/\\n$/, '\\\\n') + '|');\n            for (var k = 0; k < scopes.length; k++) {\n                console.log('      * ' + scopes[k]);\n            }\n        }\n        this._tokens.push({\n            startIndex: this._lastTokenEndIndex,\n            endIndex: endIndex,\n            // value: lineText.substring(lastTokenEndIndex, endIndex),\n            scopes: scopes\n        });\n        this._lastTokenEndIndex = endIndex;\n    };\n    LineTokens.prototype.getResult = function (stack, lineLength) {\n        if (this._tokens.length > 0 && this._tokens[this._tokens.length - 1].startIndex === lineLength - 1) {\n            // pop produced token for newline\n            this._tokens.pop();\n        }\n        if (this._tokens.length === 0) {\n            this._lastTokenEndIndex = -1;\n            this.produce(stack, lineLength);\n            this._tokens[this._tokens.length - 1].startIndex = 0;\n        }\n        return this._tokens;\n    };\n    LineTokens.prototype.getBinaryResult = function (stack, lineLength) {\n        if (this._binaryTokens.length > 0 && this._binaryTokens[this._binaryTokens.length - 2] === lineLength - 1) {\n            // pop produced token for newline\n            this._binaryTokens.pop();\n            this._binaryTokens.pop();\n        }\n        if (this._binaryTokens.length === 0) {\n            this._lastTokenEndIndex = -1;\n            this.produce(stack, lineLength);\n            this._binaryTokens[this._binaryTokens.length - 2] = 0;\n        }\n        var result = new Uint32Array(this._binaryTokens.length);\n        for (var i = 0, len = this._binaryTokens.length; i < len; i++) {\n            result[i] = this._binaryTokens[i];\n        }\n        return result;\n    };\n    return LineTokens;\n}());\nfunction toTemporaryType(standardType) {\n    switch (standardType) {\n        case 4 /* RegEx */:\n            return 4 /* RegEx */;\n        case 2 /* String */:\n            return 2 /* String */;\n        case 1 /* Comment */:\n            return 1 /* Comment */;\n        case 0 /* Other */:\n        default:\n            // `MetaEmbedded` is the same scope as `Other`\n            // but it overwrites existing token types in the stack.\n            return 8 /* MetaEmbedded */;\n    }\n}\n//# sourceMappingURL=grammar.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction clone(something) {\n    return doClone(something);\n}\nexports.clone = clone;\nfunction doClone(something) {\n    if (Array.isArray(something)) {\n        return cloneArray(something);\n    }\n    if (typeof something === 'object') {\n        return cloneObj(something);\n    }\n    return something;\n}\nfunction cloneArray(arr) {\n    var r = [];\n    for (var i = 0, len = arr.length; i < len; i++) {\n        r[i] = doClone(arr[i]);\n    }\n    return r;\n}\nfunction cloneObj(obj) {\n    var r = {};\n    for (var key in obj) {\n        r[key] = doClone(obj[key]);\n    }\n    return r;\n}\nfunction mergeObjects(target) {\n    var sources = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        sources[_i - 1] = arguments[_i];\n    }\n    sources.forEach(function (source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n    });\n    return target;\n}\nexports.mergeObjects = mergeObjects;\nfunction basename(path) {\n    var idx = ~path.lastIndexOf('/') || ~path.lastIndexOf('\\\\');\n    if (idx === 0) {\n        return path;\n    }\n    else if (~idx === path.length - 1) {\n        return basename(path.substring(0, path.length - 1));\n    }\n    else {\n        return path.substr(~idx + 1);\n    }\n}\nexports.basename = basename;\nvar CAPTURING_REGEX_SOURCE = /\\$(\\d+)|\\${(\\d+):\\/(downcase|upcase)}/;\nvar RegexSource = /** @class */ (function () {\n    function RegexSource() {\n    }\n    RegexSource.hasCaptures = function (regexSource) {\n        if (regexSource === null) {\n            return false;\n        }\n        return CAPTURING_REGEX_SOURCE.test(regexSource);\n    };\n    RegexSource.replaceCaptures = function (regexSource, captureSource, captureIndices) {\n        return regexSource.replace(CAPTURING_REGEX_SOURCE, function (match, index, commandIndex, command) {\n            var capture = captureIndices[parseInt(index || commandIndex, 10)];\n            if (capture) {\n                var result = captureSource.substring(capture.start, capture.end);\n                // Remove leading dots that would make the selector invalid\n                while (result[0] === '.') {\n                    result = result.substring(1);\n                }\n                switch (command) {\n                    case 'downcase':\n                        return result.toLowerCase();\n                    case 'upcase':\n                        return result.toUpperCase();\n                    default:\n                        return result;\n                }\n            }\n            else {\n                return match;\n            }\n        });\n    };\n    return RegexSource;\n}());\nexports.RegexSource = RegexSource;\n//# sourceMappingURL=utils.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DebugFlags = {\n    InDebugMode: (typeof process !== 'undefined' && !!process.env['VSCODE_TEXTMATE_DEBUG'])\n};\n//# sourceMappingURL=debug.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar registry_1 = require(\"./registry\");\nvar grammarReader = require(\"./grammarReader\");\nvar theme_1 = require(\"./theme\");\nvar grammar_1 = require(\"./grammar\");\n/**\n * The registry that will hold all grammars.\n */\nvar Registry = /** @class */ (function () {\n    function Registry(options) {\n        this._options = options;\n        this._syncRegistry = new registry_1.SyncRegistry(theme_1.Theme.createFromRawTheme(options.theme, options.colorMap), options.onigLib);\n        this._ensureGrammarCache = new Map();\n    }\n    Registry.prototype.dispose = function () {\n        this._syncRegistry.dispose();\n    };\n    /**\n     * Change the theme. Once called, no previous `ruleStack` should be used anymore.\n     */\n    Registry.prototype.setTheme = function (theme, colorMap) {\n        this._syncRegistry.setTheme(theme_1.Theme.createFromRawTheme(theme, colorMap));\n    };\n    /**\n     * Returns a lookup array for color ids.\n     */\n    Registry.prototype.getColorMap = function () {\n        return this._syncRegistry.getColorMap();\n    };\n    /**\n     * Load the grammar for `scopeName` and all referenced included grammars asynchronously.\n     * Please do not use language id 0.\n     */\n    Registry.prototype.loadGrammarWithEmbeddedLanguages = function (initialScopeName, initialLanguage, embeddedLanguages) {\n        return this.loadGrammarWithConfiguration(initialScopeName, initialLanguage, { embeddedLanguages: embeddedLanguages });\n    };\n    /**\n     * Load the grammar for `scopeName` and all referenced included grammars asynchronously.\n     * Please do not use language id 0.\n     */\n    Registry.prototype.loadGrammarWithConfiguration = function (initialScopeName, initialLanguage, configuration) {\n        return this._loadGrammar(initialScopeName, initialLanguage, configuration.embeddedLanguages, configuration.tokenTypes);\n    };\n    /**\n     * Load the grammar for `scopeName` and all referenced included grammars asynchronously.\n     */\n    Registry.prototype.loadGrammar = function (initialScopeName) {\n        return this._loadGrammar(initialScopeName, 0, null, null);\n    };\n    Registry.prototype._doLoadSingleGrammar = function (scopeName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var grammar, injections;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this._options.loadGrammar(scopeName)];\n                    case 1:\n                        grammar = _a.sent();\n                        if (grammar) {\n                            injections = (typeof this._options.getInjections === 'function' ? this._options.getInjections(scopeName) : undefined);\n                            this._syncRegistry.addGrammar(grammar, injections);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Registry.prototype._loadSingleGrammar = function (scopeName) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (!this._ensureGrammarCache.has(scopeName)) {\n                    this._ensureGrammarCache.set(scopeName, this._doLoadSingleGrammar(scopeName));\n                }\n                return [2 /*return*/, this._ensureGrammarCache.get(scopeName)];\n            });\n        });\n    };\n    Registry.prototype._collectDependenciesForDep = function (initialScopeName, result, dep) {\n        var grammar = this._syncRegistry.lookup(dep.scopeName);\n        if (!grammar) {\n            if (dep.scopeName === initialScopeName) {\n                throw new Error(\"No grammar provided for <\" + initialScopeName + \">\");\n            }\n            return;\n        }\n        if (dep instanceof grammar_1.FullScopeDependency) {\n            grammar_1.collectDependencies(result, this._syncRegistry.lookup(initialScopeName), grammar);\n        }\n        else {\n            grammar_1.collectSpecificDependencies(result, this._syncRegistry.lookup(initialScopeName), grammar, dep.include);\n        }\n        var injections = this._syncRegistry.injections(dep.scopeName);\n        if (injections) {\n            for (var _i = 0, injections_1 = injections; _i < injections_1.length; _i++) {\n                var injection = injections_1[_i];\n                result.add(new grammar_1.FullScopeDependency(injection));\n            }\n        }\n    };\n    Registry.prototype._loadGrammar = function (initialScopeName, initialLanguage, embeddedLanguages, tokenTypes) {\n        return __awaiter(this, void 0, void 0, function () {\n            var seenFullScopeRequests, seenPartialScopeRequests, Q, q, deps, _i, q_1, dep, _a, _b, dep, _c, _d, dep;\n            var _this = this;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        seenFullScopeRequests = new Set();\n                        seenPartialScopeRequests = new Set();\n                        seenFullScopeRequests.add(initialScopeName);\n                        Q = [new grammar_1.FullScopeDependency(initialScopeName)];\n                        _e.label = 1;\n                    case 1:\n                        if (!(Q.length > 0)) return [3 /*break*/, 3];\n                        q = Q;\n                        Q = [];\n                        return [4 /*yield*/, Promise.all(q.map(function (request) { return _this._loadSingleGrammar(request.scopeName); }))];\n                    case 2:\n                        _e.sent();\n                        deps = new grammar_1.ScopeDependencyCollector();\n                        for (_i = 0, q_1 = q; _i < q_1.length; _i++) {\n                            dep = q_1[_i];\n                            this._collectDependenciesForDep(initialScopeName, deps, dep);\n                        }\n                        for (_a = 0, _b = deps.full; _a < _b.length; _a++) {\n                            dep = _b[_a];\n                            if (seenFullScopeRequests.has(dep.scopeName)) {\n                                // already processed\n                                continue;\n                            }\n                            seenFullScopeRequests.add(dep.scopeName);\n                            Q.push(dep);\n                        }\n                        for (_c = 0, _d = deps.partial; _c < _d.length; _c++) {\n                            dep = _d[_c];\n                            if (seenFullScopeRequests.has(dep.scopeName)) {\n                                // already processed in full\n                                continue;\n                            }\n                            if (seenPartialScopeRequests.has(dep.toKey())) {\n                                // already processed\n                                continue;\n                            }\n                            seenPartialScopeRequests.add(dep.toKey());\n                            Q.push(dep);\n                        }\n                        return [3 /*break*/, 1];\n                    case 3: return [2 /*return*/, this.grammarForScopeName(initialScopeName, initialLanguage, embeddedLanguages, tokenTypes)];\n                }\n            });\n        });\n    };\n    /**\n     * Adds a rawGrammar.\n     */\n    Registry.prototype.addGrammar = function (rawGrammar, injections, initialLanguage, embeddedLanguages) {\n        if (injections === void 0) { injections = []; }\n        if (initialLanguage === void 0) { initialLanguage = 0; }\n        if (embeddedLanguages === void 0) { embeddedLanguages = null; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this._syncRegistry.addGrammar(rawGrammar, injections);\n                        return [4 /*yield*/, this.grammarForScopeName(rawGrammar.scopeName, initialLanguage, embeddedLanguages)];\n                    case 1: return [2 /*return*/, (_a.sent())];\n                }\n            });\n        });\n    };\n    /**\n     * Get the grammar for `scopeName`. The grammar must first be created via `loadGrammar` or `addGrammar`.\n     */\n    Registry.prototype.grammarForScopeName = function (scopeName, initialLanguage, embeddedLanguages, tokenTypes) {\n        if (initialLanguage === void 0) { initialLanguage = 0; }\n        if (embeddedLanguages === void 0) { embeddedLanguages = null; }\n        if (tokenTypes === void 0) { tokenTypes = null; }\n        return this._syncRegistry.grammarForScopeName(scopeName, initialLanguage, embeddedLanguages, tokenTypes);\n    };\n    return Registry;\n}());\nexports.Registry = Registry;\nexports.INITIAL = grammar_1.StackElement.NULL;\nexports.parseRawGrammar = grammarReader.parseRawGrammar;\n//# sourceMappingURL=main.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar grammar_1 = require(\"./grammar\");\nvar SyncRegistry = /** @class */ (function () {\n    function SyncRegistry(theme, onigLibPromise) {\n        this._theme = theme;\n        this._grammars = {};\n        this._rawGrammars = {};\n        this._injectionGrammars = {};\n        this._onigLibPromise = onigLibPromise;\n    }\n    SyncRegistry.prototype.dispose = function () {\n        for (var scopeName in this._grammars) {\n            if (this._grammars.hasOwnProperty(scopeName)) {\n                this._grammars[scopeName].dispose();\n            }\n        }\n    };\n    SyncRegistry.prototype.setTheme = function (theme) {\n        var _this = this;\n        this._theme = theme;\n        Object.keys(this._grammars).forEach(function (scopeName) {\n            var grammar = _this._grammars[scopeName];\n            grammar.onDidChangeTheme();\n        });\n    };\n    SyncRegistry.prototype.getColorMap = function () {\n        return this._theme.getColorMap();\n    };\n    /**\n     * Add `grammar` to registry and return a list of referenced scope names\n     */\n    SyncRegistry.prototype.addGrammar = function (grammar, injectionScopeNames) {\n        this._rawGrammars[grammar.scopeName] = grammar;\n        if (injectionScopeNames) {\n            this._injectionGrammars[grammar.scopeName] = injectionScopeNames;\n        }\n    };\n    /**\n     * Lookup a raw grammar.\n     */\n    SyncRegistry.prototype.lookup = function (scopeName) {\n        return this._rawGrammars[scopeName];\n    };\n    /**\n     * Returns the injections for the given grammar\n     */\n    SyncRegistry.prototype.injections = function (targetScope) {\n        return this._injectionGrammars[targetScope];\n    };\n    /**\n     * Get the default theme settings\n     */\n    SyncRegistry.prototype.getDefaults = function () {\n        return this._theme.getDefaults();\n    };\n    /**\n     * Match a scope in the theme.\n     */\n    SyncRegistry.prototype.themeMatch = function (scopeName) {\n        return this._theme.match(scopeName);\n    };\n    /**\n     * Lookup a grammar.\n     */\n    SyncRegistry.prototype.grammarForScopeName = function (scopeName, initialLanguage, embeddedLanguages, tokenTypes) {\n        return __awaiter(this, void 0, void 0, function () {\n            var rawGrammar, _a, _b, _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        if (!!this._grammars[scopeName]) return [3 /*break*/, 2];\n                        rawGrammar = this._rawGrammars[scopeName];\n                        if (!rawGrammar) {\n                            return [2 /*return*/, null];\n                        }\n                        _a = this._grammars;\n                        _b = scopeName;\n                        _c = grammar_1.createGrammar;\n                        _d = [rawGrammar, initialLanguage, embeddedLanguages, tokenTypes, this];\n                        return [4 /*yield*/, this._onigLibPromise];\n                    case 1:\n                        _a[_b] = _c.apply(void 0, _d.concat([_e.sent()]));\n                        _e.label = 2;\n                    case 2: return [2 /*return*/, this._grammars[scopeName]];\n                }\n            });\n        });\n    };\n    return SyncRegistry;\n}());\nexports.SyncRegistry = SyncRegistry;\n//# sourceMappingURL=registry.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar HAS_BACK_REFERENCES = /\\\\(\\d+)/;\nvar BACK_REFERENCING_END = /\\\\(\\d+)/g;\nvar CompiledRule = /** @class */ (function () {\n    function CompiledRule(onigLib, regExps, rules) {\n        this.debugRegExps = regExps;\n        this.rules = rules;\n        this.scanner = onigLib.createOnigScanner(regExps);\n    }\n    CompiledRule.prototype.dispose = function () {\n        if (typeof this.scanner.dispose === 'function') {\n            this.scanner.dispose();\n        }\n    };\n    return CompiledRule;\n}());\nexports.CompiledRule = CompiledRule;\nvar Rule = /** @class */ (function () {\n    function Rule($location, id, name, contentName) {\n        this.$location = $location;\n        this.id = id;\n        this._name = name || null;\n        this._nameIsCapturing = utils_1.RegexSource.hasCaptures(this._name);\n        this._contentName = contentName || null;\n        this._contentNameIsCapturing = utils_1.RegexSource.hasCaptures(this._contentName);\n    }\n    Object.defineProperty(Rule.prototype, \"debugName\", {\n        get: function () {\n            var location = this.$location ? utils_1.basename(this.$location.filename) + \":\" + this.$location.line : 'unknown';\n            return this.constructor.name + \"#\" + this.id + \" @ \" + location;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Rule.prototype.getName = function (lineText, captureIndices) {\n        if (!this._nameIsCapturing || this._name === null || lineText === null || captureIndices === null) {\n            return this._name;\n        }\n        return utils_1.RegexSource.replaceCaptures(this._name, lineText, captureIndices);\n    };\n    Rule.prototype.getContentName = function (lineText, captureIndices) {\n        if (!this._contentNameIsCapturing || this._contentName === null) {\n            return this._contentName;\n        }\n        return utils_1.RegexSource.replaceCaptures(this._contentName, lineText, captureIndices);\n    };\n    return Rule;\n}());\nexports.Rule = Rule;\nvar CaptureRule = /** @class */ (function (_super) {\n    __extends(CaptureRule, _super);\n    function CaptureRule($location, id, name, contentName, retokenizeCapturedWithRuleId) {\n        var _this = _super.call(this, $location, id, name, contentName) || this;\n        _this.retokenizeCapturedWithRuleId = retokenizeCapturedWithRuleId;\n        return _this;\n    }\n    CaptureRule.prototype.dispose = function () {\n        // nothing to dispose\n    };\n    CaptureRule.prototype.collectPatternsRecursive = function (grammar, out, isFirst) {\n        throw new Error('Not supported!');\n    };\n    CaptureRule.prototype.compile = function (grammar, endRegexSource, allowA, allowG) {\n        throw new Error('Not supported!');\n    };\n    return CaptureRule;\n}(Rule));\nexports.CaptureRule = CaptureRule;\nvar RegExpSource = /** @class */ (function () {\n    function RegExpSource(regExpSource, ruleId, handleAnchors) {\n        if (handleAnchors === void 0) { handleAnchors = true; }\n        if (handleAnchors) {\n            if (regExpSource) {\n                var len = regExpSource.length;\n                var lastPushedPos = 0;\n                var output = [];\n                var hasAnchor = false;\n                for (var pos = 0; pos < len; pos++) {\n                    var ch = regExpSource.charAt(pos);\n                    if (ch === '\\\\') {\n                        if (pos + 1 < len) {\n                            var nextCh = regExpSource.charAt(pos + 1);\n                            if (nextCh === 'z') {\n                                output.push(regExpSource.substring(lastPushedPos, pos));\n                                output.push('$(?!\\\\n)(?<!\\\\n)');\n                                lastPushedPos = pos + 2;\n                            }\n                            else if (nextCh === 'A' || nextCh === 'G') {\n                                hasAnchor = true;\n                            }\n                            pos++;\n                        }\n                    }\n                }\n                this.hasAnchor = hasAnchor;\n                if (lastPushedPos === 0) {\n                    // No \\z hit\n                    this.source = regExpSource;\n                }\n                else {\n                    output.push(regExpSource.substring(lastPushedPos, len));\n                    this.source = output.join('');\n                }\n            }\n            else {\n                this.hasAnchor = false;\n                this.source = regExpSource;\n            }\n        }\n        else {\n            this.hasAnchor = false;\n            this.source = regExpSource;\n        }\n        if (this.hasAnchor) {\n            this._anchorCache = this._buildAnchorCache();\n        }\n        else {\n            this._anchorCache = null;\n        }\n        this.ruleId = ruleId;\n        this.hasBackReferences = HAS_BACK_REFERENCES.test(this.source);\n        // console.log('input: ' + regExpSource + ' => ' + this.source + ', ' + this.hasAnchor);\n    }\n    RegExpSource.prototype.clone = function () {\n        return new RegExpSource(this.source, this.ruleId, true);\n    };\n    RegExpSource.prototype.setSource = function (newSource) {\n        if (this.source === newSource) {\n            return;\n        }\n        this.source = newSource;\n        if (this.hasAnchor) {\n            this._anchorCache = this._buildAnchorCache();\n        }\n    };\n    RegExpSource.prototype.resolveBackReferences = function (lineText, captureIndices) {\n        var capturedValues = captureIndices.map(function (capture) {\n            return lineText.substring(capture.start, capture.end);\n        });\n        BACK_REFERENCING_END.lastIndex = 0;\n        return this.source.replace(BACK_REFERENCING_END, function (match, g1) {\n            return escapeRegExpCharacters(capturedValues[parseInt(g1, 10)] || '');\n        });\n    };\n    RegExpSource.prototype._buildAnchorCache = function () {\n        var A0_G0_result = [];\n        var A0_G1_result = [];\n        var A1_G0_result = [];\n        var A1_G1_result = [];\n        var pos, len, ch, nextCh;\n        for (pos = 0, len = this.source.length; pos < len; pos++) {\n            ch = this.source.charAt(pos);\n            A0_G0_result[pos] = ch;\n            A0_G1_result[pos] = ch;\n            A1_G0_result[pos] = ch;\n            A1_G1_result[pos] = ch;\n            if (ch === '\\\\') {\n                if (pos + 1 < len) {\n                    nextCh = this.source.charAt(pos + 1);\n                    if (nextCh === 'A') {\n                        A0_G0_result[pos + 1] = '\\uFFFF';\n                        A0_G1_result[pos + 1] = '\\uFFFF';\n                        A1_G0_result[pos + 1] = 'A';\n                        A1_G1_result[pos + 1] = 'A';\n                    }\n                    else if (nextCh === 'G') {\n                        A0_G0_result[pos + 1] = '\\uFFFF';\n                        A0_G1_result[pos + 1] = 'G';\n                        A1_G0_result[pos + 1] = '\\uFFFF';\n                        A1_G1_result[pos + 1] = 'G';\n                    }\n                    else {\n                        A0_G0_result[pos + 1] = nextCh;\n                        A0_G1_result[pos + 1] = nextCh;\n                        A1_G0_result[pos + 1] = nextCh;\n                        A1_G1_result[pos + 1] = nextCh;\n                    }\n                    pos++;\n                }\n            }\n        }\n        return {\n            A0_G0: A0_G0_result.join(''),\n            A0_G1: A0_G1_result.join(''),\n            A1_G0: A1_G0_result.join(''),\n            A1_G1: A1_G1_result.join('')\n        };\n    };\n    RegExpSource.prototype.resolveAnchors = function (allowA, allowG) {\n        if (!this.hasAnchor || !this._anchorCache) {\n            return this.source;\n        }\n        if (allowA) {\n            if (allowG) {\n                return this._anchorCache.A1_G1;\n            }\n            else {\n                return this._anchorCache.A1_G0;\n            }\n        }\n        else {\n            if (allowG) {\n                return this._anchorCache.A0_G1;\n            }\n            else {\n                return this._anchorCache.A0_G0;\n            }\n        }\n    };\n    return RegExpSource;\n}());\nexports.RegExpSource = RegExpSource;\nvar RegExpSourceList = /** @class */ (function () {\n    function RegExpSourceList() {\n        this._items = [];\n        this._hasAnchors = false;\n        this._cached = null;\n        this._anchorCache = {\n            A0_G0: null,\n            A0_G1: null,\n            A1_G0: null,\n            A1_G1: null\n        };\n    }\n    RegExpSourceList.prototype.dispose = function () {\n        this._disposeCaches();\n    };\n    RegExpSourceList.prototype._disposeCaches = function () {\n        if (this._cached) {\n            this._cached.dispose();\n            this._cached = null;\n        }\n        if (this._anchorCache.A0_G0) {\n            this._anchorCache.A0_G0.dispose();\n            this._anchorCache.A0_G0 = null;\n        }\n        if (this._anchorCache.A0_G1) {\n            this._anchorCache.A0_G1.dispose();\n            this._anchorCache.A0_G1 = null;\n        }\n        if (this._anchorCache.A1_G0) {\n            this._anchorCache.A1_G0.dispose();\n            this._anchorCache.A1_G0 = null;\n        }\n        if (this._anchorCache.A1_G1) {\n            this._anchorCache.A1_G1.dispose();\n            this._anchorCache.A1_G1 = null;\n        }\n    };\n    RegExpSourceList.prototype.push = function (item) {\n        this._items.push(item);\n        this._hasAnchors = this._hasAnchors || item.hasAnchor;\n    };\n    RegExpSourceList.prototype.unshift = function (item) {\n        this._items.unshift(item);\n        this._hasAnchors = this._hasAnchors || item.hasAnchor;\n    };\n    RegExpSourceList.prototype.length = function () {\n        return this._items.length;\n    };\n    RegExpSourceList.prototype.setSource = function (index, newSource) {\n        if (this._items[index].source !== newSource) {\n            // bust the cache\n            this._disposeCaches();\n            this._items[index].setSource(newSource);\n        }\n    };\n    RegExpSourceList.prototype.compile = function (onigLib, allowA, allowG) {\n        if (!this._hasAnchors) {\n            if (!this._cached) {\n                var regExps = this._items.map(function (e) { return e.source; });\n                this._cached = new CompiledRule(onigLib, regExps, this._items.map(function (e) { return e.ruleId; }));\n            }\n            return this._cached;\n        }\n        else {\n            if (allowA) {\n                if (allowG) {\n                    if (!this._anchorCache.A1_G1) {\n                        this._anchorCache.A1_G1 = this._resolveAnchors(onigLib, allowA, allowG);\n                    }\n                    return this._anchorCache.A1_G1;\n                }\n                else {\n                    if (!this._anchorCache.A1_G0) {\n                        this._anchorCache.A1_G0 = this._resolveAnchors(onigLib, allowA, allowG);\n                    }\n                    return this._anchorCache.A1_G0;\n                }\n            }\n            else {\n                if (allowG) {\n                    if (!this._anchorCache.A0_G1) {\n                        this._anchorCache.A0_G1 = this._resolveAnchors(onigLib, allowA, allowG);\n                    }\n                    return this._anchorCache.A0_G1;\n                }\n                else {\n                    if (!this._anchorCache.A0_G0) {\n                        this._anchorCache.A0_G0 = this._resolveAnchors(onigLib, allowA, allowG);\n                    }\n                    return this._anchorCache.A0_G0;\n                }\n            }\n        }\n    };\n    RegExpSourceList.prototype._resolveAnchors = function (onigLib, allowA, allowG) {\n        var regExps = this._items.map(function (e) { return e.resolveAnchors(allowA, allowG); });\n        return new CompiledRule(onigLib, regExps, this._items.map(function (e) { return e.ruleId; }));\n    };\n    return RegExpSourceList;\n}());\nexports.RegExpSourceList = RegExpSourceList;\nvar MatchRule = /** @class */ (function (_super) {\n    __extends(MatchRule, _super);\n    function MatchRule($location, id, name, match, captures) {\n        var _this = _super.call(this, $location, id, name, null) || this;\n        _this._match = new RegExpSource(match, _this.id);\n        _this.captures = captures;\n        _this._cachedCompiledPatterns = null;\n        return _this;\n    }\n    MatchRule.prototype.dispose = function () {\n        if (this._cachedCompiledPatterns) {\n            this._cachedCompiledPatterns.dispose();\n            this._cachedCompiledPatterns = null;\n        }\n    };\n    Object.defineProperty(MatchRule.prototype, \"debugMatchRegExp\", {\n        get: function () {\n            return \"\" + this._match.source;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MatchRule.prototype.collectPatternsRecursive = function (grammar, out, isFirst) {\n        out.push(this._match);\n    };\n    MatchRule.prototype.compile = function (grammar, endRegexSource, allowA, allowG) {\n        if (!this._cachedCompiledPatterns) {\n            this._cachedCompiledPatterns = new RegExpSourceList();\n            this.collectPatternsRecursive(grammar, this._cachedCompiledPatterns, true);\n        }\n        return this._cachedCompiledPatterns.compile(grammar, allowA, allowG);\n    };\n    return MatchRule;\n}(Rule));\nexports.MatchRule = MatchRule;\nvar IncludeOnlyRule = /** @class */ (function (_super) {\n    __extends(IncludeOnlyRule, _super);\n    function IncludeOnlyRule($location, id, name, contentName, patterns) {\n        var _this = _super.call(this, $location, id, name, contentName) || this;\n        _this.patterns = patterns.patterns;\n        _this.hasMissingPatterns = patterns.hasMissingPatterns;\n        _this._cachedCompiledPatterns = null;\n        return _this;\n    }\n    IncludeOnlyRule.prototype.dispose = function () {\n        if (this._cachedCompiledPatterns) {\n            this._cachedCompiledPatterns.dispose();\n            this._cachedCompiledPatterns = null;\n        }\n    };\n    IncludeOnlyRule.prototype.collectPatternsRecursive = function (grammar, out, isFirst) {\n        var i, len, rule;\n        for (i = 0, len = this.patterns.length; i < len; i++) {\n            rule = grammar.getRule(this.patterns[i]);\n            rule.collectPatternsRecursive(grammar, out, false);\n        }\n    };\n    IncludeOnlyRule.prototype.compile = function (grammar, endRegexSource, allowA, allowG) {\n        if (!this._cachedCompiledPatterns) {\n            this._cachedCompiledPatterns = new RegExpSourceList();\n            this.collectPatternsRecursive(grammar, this._cachedCompiledPatterns, true);\n        }\n        return this._cachedCompiledPatterns.compile(grammar, allowA, allowG);\n    };\n    return IncludeOnlyRule;\n}(Rule));\nexports.IncludeOnlyRule = IncludeOnlyRule;\nfunction escapeRegExpCharacters(value) {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&');\n}\nvar BeginEndRule = /** @class */ (function (_super) {\n    __extends(BeginEndRule, _super);\n    function BeginEndRule($location, id, name, contentName, begin, beginCaptures, end, endCaptures, applyEndPatternLast, patterns) {\n        var _this = _super.call(this, $location, id, name, contentName) || this;\n        _this._begin = new RegExpSource(begin, _this.id);\n        _this.beginCaptures = beginCaptures;\n        _this._end = new RegExpSource(end ? end : '\\uFFFF', -1);\n        _this.endHasBackReferences = _this._end.hasBackReferences;\n        _this.endCaptures = endCaptures;\n        _this.applyEndPatternLast = applyEndPatternLast || false;\n        _this.patterns = patterns.patterns;\n        _this.hasMissingPatterns = patterns.hasMissingPatterns;\n        _this._cachedCompiledPatterns = null;\n        return _this;\n    }\n    BeginEndRule.prototype.dispose = function () {\n        if (this._cachedCompiledPatterns) {\n            this._cachedCompiledPatterns.dispose();\n            this._cachedCompiledPatterns = null;\n        }\n    };\n    Object.defineProperty(BeginEndRule.prototype, \"debugBeginRegExp\", {\n        get: function () {\n            return \"\" + this._begin.source;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BeginEndRule.prototype, \"debugEndRegExp\", {\n        get: function () {\n            return \"\" + this._end.source;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BeginEndRule.prototype.getEndWithResolvedBackReferences = function (lineText, captureIndices) {\n        return this._end.resolveBackReferences(lineText, captureIndices);\n    };\n    BeginEndRule.prototype.collectPatternsRecursive = function (grammar, out, isFirst) {\n        if (isFirst) {\n            var i = void 0, len = void 0, rule = void 0;\n            for (i = 0, len = this.patterns.length; i < len; i++) {\n                rule = grammar.getRule(this.patterns[i]);\n                rule.collectPatternsRecursive(grammar, out, false);\n            }\n        }\n        else {\n            out.push(this._begin);\n        }\n    };\n    BeginEndRule.prototype.compile = function (grammar, endRegexSource, allowA, allowG) {\n        if (!this._cachedCompiledPatterns) {\n            this._cachedCompiledPatterns = new RegExpSourceList();\n            this.collectPatternsRecursive(grammar, this._cachedCompiledPatterns, true);\n            if (this.applyEndPatternLast) {\n                this._cachedCompiledPatterns.push(this._end.hasBackReferences ? this._end.clone() : this._end);\n            }\n            else {\n                this._cachedCompiledPatterns.unshift(this._end.hasBackReferences ? this._end.clone() : this._end);\n            }\n        }\n        if (this._end.hasBackReferences) {\n            if (this.applyEndPatternLast) {\n                this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length() - 1, endRegexSource);\n            }\n            else {\n                this._cachedCompiledPatterns.setSource(0, endRegexSource);\n            }\n        }\n        return this._cachedCompiledPatterns.compile(grammar, allowA, allowG);\n    };\n    return BeginEndRule;\n}(Rule));\nexports.BeginEndRule = BeginEndRule;\nvar BeginWhileRule = /** @class */ (function (_super) {\n    __extends(BeginWhileRule, _super);\n    function BeginWhileRule($location, id, name, contentName, begin, beginCaptures, _while, whileCaptures, patterns) {\n        var _this = _super.call(this, $location, id, name, contentName) || this;\n        _this._begin = new RegExpSource(begin, _this.id);\n        _this.beginCaptures = beginCaptures;\n        _this.whileCaptures = whileCaptures;\n        _this._while = new RegExpSource(_while, -2);\n        _this.whileHasBackReferences = _this._while.hasBackReferences;\n        _this.patterns = patterns.patterns;\n        _this.hasMissingPatterns = patterns.hasMissingPatterns;\n        _this._cachedCompiledPatterns = null;\n        _this._cachedCompiledWhilePatterns = null;\n        return _this;\n    }\n    BeginWhileRule.prototype.dispose = function () {\n        if (this._cachedCompiledPatterns) {\n            this._cachedCompiledPatterns.dispose();\n            this._cachedCompiledPatterns = null;\n        }\n        if (this._cachedCompiledWhilePatterns) {\n            this._cachedCompiledWhilePatterns.dispose();\n            this._cachedCompiledWhilePatterns = null;\n        }\n    };\n    Object.defineProperty(BeginWhileRule.prototype, \"debugBeginRegExp\", {\n        get: function () {\n            return \"\" + this._begin.source;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BeginWhileRule.prototype, \"debugWhileRegExp\", {\n        get: function () {\n            return \"\" + this._while.source;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BeginWhileRule.prototype.getWhileWithResolvedBackReferences = function (lineText, captureIndices) {\n        return this._while.resolveBackReferences(lineText, captureIndices);\n    };\n    BeginWhileRule.prototype.collectPatternsRecursive = function (grammar, out, isFirst) {\n        if (isFirst) {\n            var i = void 0, len = void 0, rule = void 0;\n            for (i = 0, len = this.patterns.length; i < len; i++) {\n                rule = grammar.getRule(this.patterns[i]);\n                rule.collectPatternsRecursive(grammar, out, false);\n            }\n        }\n        else {\n            out.push(this._begin);\n        }\n    };\n    BeginWhileRule.prototype.compile = function (grammar, endRegexSource, allowA, allowG) {\n        if (!this._cachedCompiledPatterns) {\n            this._cachedCompiledPatterns = new RegExpSourceList();\n            this.collectPatternsRecursive(grammar, this._cachedCompiledPatterns, true);\n        }\n        return this._cachedCompiledPatterns.compile(grammar, allowA, allowG);\n    };\n    BeginWhileRule.prototype.compileWhile = function (grammar, endRegexSource, allowA, allowG) {\n        if (!this._cachedCompiledWhilePatterns) {\n            this._cachedCompiledWhilePatterns = new RegExpSourceList();\n            this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences ? this._while.clone() : this._while);\n        }\n        if (this._while.hasBackReferences) {\n            this._cachedCompiledWhilePatterns.setSource(0, endRegexSource ? endRegexSource : '\\uFFFF');\n        }\n        return this._cachedCompiledWhilePatterns.compile(grammar, allowA, allowG);\n    };\n    return BeginWhileRule;\n}(Rule));\nexports.BeginWhileRule = BeginWhileRule;\nvar RuleFactory = /** @class */ (function () {\n    function RuleFactory() {\n    }\n    RuleFactory.createCaptureRule = function (helper, $location, name, contentName, retokenizeCapturedWithRuleId) {\n        return helper.registerRule(function (id) {\n            return new CaptureRule($location, id, name, contentName, retokenizeCapturedWithRuleId);\n        });\n    };\n    RuleFactory.getCompiledRuleId = function (desc, helper, repository) {\n        if (!desc.id) {\n            helper.registerRule(function (id) {\n                desc.id = id;\n                if (desc.match) {\n                    return new MatchRule(desc.$vscodeTextmateLocation, desc.id, desc.name, desc.match, RuleFactory._compileCaptures(desc.captures, helper, repository));\n                }\n                if (typeof desc.begin === 'undefined') {\n                    if (desc.repository) {\n                        repository = utils_1.mergeObjects({}, repository, desc.repository);\n                    }\n                    var patterns = desc.patterns;\n                    if (typeof patterns === 'undefined' && desc.include) {\n                        patterns = [{ include: desc.include }];\n                    }\n                    return new IncludeOnlyRule(desc.$vscodeTextmateLocation, desc.id, desc.name, desc.contentName, RuleFactory._compilePatterns(patterns, helper, repository));\n                }\n                if (desc.while) {\n                    return new BeginWhileRule(desc.$vscodeTextmateLocation, desc.id, desc.name, desc.contentName, desc.begin, RuleFactory._compileCaptures(desc.beginCaptures || desc.captures, helper, repository), desc.while, RuleFactory._compileCaptures(desc.whileCaptures || desc.captures, helper, repository), RuleFactory._compilePatterns(desc.patterns, helper, repository));\n                }\n                return new BeginEndRule(desc.$vscodeTextmateLocation, desc.id, desc.name, desc.contentName, desc.begin, RuleFactory._compileCaptures(desc.beginCaptures || desc.captures, helper, repository), desc.end, RuleFactory._compileCaptures(desc.endCaptures || desc.captures, helper, repository), desc.applyEndPatternLast, RuleFactory._compilePatterns(desc.patterns, helper, repository));\n            });\n        }\n        return desc.id;\n    };\n    RuleFactory._compileCaptures = function (captures, helper, repository) {\n        var r = [];\n        if (captures) {\n            // Find the maximum capture id\n            var maximumCaptureId = 0;\n            for (var captureId in captures) {\n                if (captureId === '$vscodeTextmateLocation') {\n                    continue;\n                }\n                var numericCaptureId = parseInt(captureId, 10);\n                if (numericCaptureId > maximumCaptureId) {\n                    maximumCaptureId = numericCaptureId;\n                }\n            }\n            // Initialize result\n            for (var i = 0; i <= maximumCaptureId; i++) {\n                r[i] = null;\n            }\n            // Fill out result\n            for (var captureId in captures) {\n                if (captureId === '$vscodeTextmateLocation') {\n                    continue;\n                }\n                var numericCaptureId = parseInt(captureId, 10);\n                var retokenizeCapturedWithRuleId = 0;\n                if (captures[captureId].patterns) {\n                    retokenizeCapturedWithRuleId = RuleFactory.getCompiledRuleId(captures[captureId], helper, repository);\n                }\n                r[numericCaptureId] = RuleFactory.createCaptureRule(helper, captures[captureId].$vscodeTextmateLocation, captures[captureId].name, captures[captureId].contentName, retokenizeCapturedWithRuleId);\n            }\n        }\n        return r;\n    };\n    RuleFactory._compilePatterns = function (patterns, helper, repository) {\n        var r = [];\n        if (patterns) {\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                var pattern = patterns[i];\n                var patternId = -1;\n                if (pattern.include) {\n                    if (pattern.include.charAt(0) === '#') {\n                        // Local include found in `repository`\n                        var localIncludedRule = repository[pattern.include.substr(1)];\n                        if (localIncludedRule) {\n                            patternId = RuleFactory.getCompiledRuleId(localIncludedRule, helper, repository);\n                        }\n                        else {\n                            // console.warn('CANNOT find rule for scopeName: ' + pattern.include + ', I am: ', repository['$base'].name);\n                        }\n                    }\n                    else if (pattern.include === '$base' || pattern.include === '$self') {\n                        // Special include also found in `repository`\n                        patternId = RuleFactory.getCompiledRuleId(repository[pattern.include], helper, repository);\n                    }\n                    else {\n                        var externalGrammarName = null;\n                        var externalGrammarInclude = null;\n                        var sharpIndex = pattern.include.indexOf('#');\n                        if (sharpIndex >= 0) {\n                            externalGrammarName = pattern.include.substring(0, sharpIndex);\n                            externalGrammarInclude = pattern.include.substring(sharpIndex + 1);\n                        }\n                        else {\n                            externalGrammarName = pattern.include;\n                        }\n                        // External include\n                        var externalGrammar = helper.getExternalGrammar(externalGrammarName, repository);\n                        if (externalGrammar) {\n                            if (externalGrammarInclude) {\n                                var externalIncludedRule = externalGrammar.repository[externalGrammarInclude];\n                                if (externalIncludedRule) {\n                                    patternId = RuleFactory.getCompiledRuleId(externalIncludedRule, helper, externalGrammar.repository);\n                                }\n                                else {\n                                    // console.warn('CANNOT find rule for scopeName: ' + pattern.include + ', I am: ', repository['$base'].name);\n                                }\n                            }\n                            else {\n                                patternId = RuleFactory.getCompiledRuleId(externalGrammar.repository.$self, helper, externalGrammar.repository);\n                            }\n                        }\n                        else {\n                            // console.warn('CANNOT find grammar for scopeName: ' + pattern.include + ', I am: ', repository['$base'].name);\n                        }\n                    }\n                }\n                else {\n                    patternId = RuleFactory.getCompiledRuleId(pattern, helper, repository);\n                }\n                if (patternId !== -1) {\n                    var rule = helper.getRule(patternId);\n                    var skipRule = false;\n                    if (rule instanceof IncludeOnlyRule || rule instanceof BeginEndRule || rule instanceof BeginWhileRule) {\n                        if (rule.hasMissingPatterns && rule.patterns.length === 0) {\n                            skipRule = true;\n                        }\n                    }\n                    if (skipRule) {\n                        // console.log('REMOVING RULE ENTIRELY DUE TO EMPTY PATTERNS THAT ARE MISSING');\n                        continue;\n                    }\n                    r.push(patternId);\n                }\n            }\n        }\n        return {\n            patterns: r,\n            hasMissingPatterns: ((patterns ? patterns.length : 0) !== r.length)\n        };\n    };\n    return RuleFactory;\n}());\nexports.RuleFactory = RuleFactory;\n//# sourceMappingURL=rule.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction createMatchers(selector, matchesName) {\n    var results = [];\n    var tokenizer = newTokenizer(selector);\n    var token = tokenizer.next();\n    while (token !== null) {\n        var priority = 0;\n        if (token.length === 2 && token.charAt(1) === ':') {\n            switch (token.charAt(0)) {\n                case 'R':\n                    priority = 1;\n                    break;\n                case 'L':\n                    priority = -1;\n                    break;\n                default:\n                    console.log(\"Unknown priority \" + token + \" in scope selector\");\n            }\n            token = tokenizer.next();\n        }\n        var matcher = parseConjunction();\n        results.push({ matcher: matcher, priority: priority });\n        if (token !== ',') {\n            break;\n        }\n        token = tokenizer.next();\n    }\n    return results;\n    function parseOperand() {\n        if (token === '-') {\n            token = tokenizer.next();\n            var expressionToNegate_1 = parseOperand();\n            return function (matcherInput) { return !!expressionToNegate_1 && !expressionToNegate_1(matcherInput); };\n        }\n        if (token === '(') {\n            token = tokenizer.next();\n            var expressionInParents = parseInnerExpression();\n            if (token === ')') {\n                token = tokenizer.next();\n            }\n            return expressionInParents;\n        }\n        if (isIdentifier(token)) {\n            var identifiers_1 = [];\n            do {\n                identifiers_1.push(token);\n                token = tokenizer.next();\n            } while (isIdentifier(token));\n            return function (matcherInput) { return matchesName(identifiers_1, matcherInput); };\n        }\n        return null;\n    }\n    function parseConjunction() {\n        var matchers = [];\n        var matcher = parseOperand();\n        while (matcher) {\n            matchers.push(matcher);\n            matcher = parseOperand();\n        }\n        return function (matcherInput) { return matchers.every(function (matcher) { return matcher(matcherInput); }); }; // and\n    }\n    function parseInnerExpression() {\n        var matchers = [];\n        var matcher = parseConjunction();\n        while (matcher) {\n            matchers.push(matcher);\n            if (token === '|' || token === ',') {\n                do {\n                    token = tokenizer.next();\n                } while (token === '|' || token === ','); // ignore subsequent commas\n            }\n            else {\n                break;\n            }\n            matcher = parseConjunction();\n        }\n        return function (matcherInput) { return matchers.some(function (matcher) { return matcher(matcherInput); }); }; // or\n    }\n}\nexports.createMatchers = createMatchers;\nfunction isIdentifier(token) {\n    return !!token && !!token.match(/[\\w\\.:]+/);\n}\nfunction newTokenizer(input) {\n    var regex = /([LR]:|[\\w\\.:][\\w\\.:\\-]*|[\\,\\|\\-\\(\\)])/g;\n    var match = regex.exec(input);\n    return {\n        next: function () {\n            if (!match) {\n                return null;\n            }\n            var res = match[0];\n            match = regex.exec(input);\n            return res;\n        }\n    };\n}\n//# sourceMappingURL=matcher.js.map", "// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plist = require(\"./plist\");\nvar debug_1 = require(\"./debug\");\nvar json_1 = require(\"./json\");\nfunction parseRawGrammar(content, filePath) {\n    if (filePath === void 0) { filePath = null; }\n    if (filePath !== null && /\\.json$/.test(filePath)) {\n        return parseJSONGrammar(content, filePath);\n    }\n    return parsePLISTGrammar(content, filePath);\n}\nexports.parseRawGrammar = parseRawGrammar;\nfunction parseJSONGrammar(contents, filename) {\n    if (debug_1.DebugFlags.InDebugMode) {\n        return json_1.parse(contents, filename, true);\n    }\n    return JSON.parse(contents);\n}\nfunction parsePLISTGrammar(contents, filename) {\n    if (debug_1.DebugFlags.InDebugMode) {\n        return plist.parseWithLocation(contents, filename, '$vscodeTextmateLocation');\n    }\n    return plist.parse(contents);\n}\n//# sourceMappingURL=grammarReader.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction parseWithLocation(content, filename, locationKeyName) {\n    return _parse(content, filename, locationKeyName);\n}\nexports.parseWithLocation = parseWithLocation;\n/**\n * A very fast plist parser\n */\nfunction parse(content) {\n    return _parse(content, null, null);\n}\nexports.parse = parse;\nfunction _parse(content, filename, locationKeyName) {\n    var len = content.length;\n    var pos = 0;\n    var line = 1;\n    var char = 0;\n    // Skip UTF8 BOM\n    if (len > 0 && content.charCodeAt(0) === 65279 /* BOM */) {\n        pos = 1;\n    }\n    function advancePosBy(by) {\n        if (locationKeyName === null) {\n            pos = pos + by;\n        }\n        else {\n            while (by > 0) {\n                var chCode = content.charCodeAt(pos);\n                if (chCode === 10 /* LINE_FEED */) {\n                    pos++;\n                    line++;\n                    char = 0;\n                }\n                else {\n                    pos++;\n                    char++;\n                }\n                by--;\n            }\n        }\n    }\n    function advancePosTo(to) {\n        if (locationKeyName === null) {\n            pos = to;\n        }\n        else {\n            advancePosBy(to - pos);\n        }\n    }\n    function skipWhitespace() {\n        while (pos < len) {\n            var chCode = content.charCodeAt(pos);\n            if (chCode !== 32 /* SPACE */ && chCode !== 9 /* TAB */ && chCode !== 13 /* CARRIAGE_RETURN */ && chCode !== 10 /* LINE_FEED */) {\n                break;\n            }\n            advancePosBy(1);\n        }\n    }\n    function advanceIfStartsWith(str) {\n        if (content.substr(pos, str.length) === str) {\n            advancePosBy(str.length);\n            return true;\n        }\n        return false;\n    }\n    function advanceUntil(str) {\n        var nextOccurence = content.indexOf(str, pos);\n        if (nextOccurence !== -1) {\n            advancePosTo(nextOccurence + str.length);\n        }\n        else {\n            // EOF\n            advancePosTo(len);\n        }\n    }\n    function captureUntil(str) {\n        var nextOccurence = content.indexOf(str, pos);\n        if (nextOccurence !== -1) {\n            var r = content.substring(pos, nextOccurence);\n            advancePosTo(nextOccurence + str.length);\n            return r;\n        }\n        else {\n            // EOF\n            var r = content.substr(pos);\n            advancePosTo(len);\n            return r;\n        }\n    }\n    var state = 0 /* ROOT_STATE */;\n    var cur = null;\n    var stateStack = [];\n    var objStack = [];\n    var curKey = null;\n    function pushState(newState, newCur) {\n        stateStack.push(state);\n        objStack.push(cur);\n        state = newState;\n        cur = newCur;\n    }\n    function popState() {\n        if (stateStack.length === 0) {\n            return fail('illegal state stack');\n        }\n        state = stateStack.pop();\n        cur = objStack.pop();\n    }\n    function fail(msg) {\n        throw new Error('Near offset ' + pos + ': ' + msg + ' ~~~' + content.substr(pos, 50) + '~~~');\n    }\n    var dictState = {\n        enterDict: function () {\n            if (curKey === null) {\n                return fail('missing <key>');\n            }\n            var newDict = {};\n            if (locationKeyName !== null) {\n                newDict[locationKeyName] = {\n                    filename: filename,\n                    line: line,\n                    char: char\n                };\n            }\n            cur[curKey] = newDict;\n            curKey = null;\n            pushState(1 /* DICT_STATE */, newDict);\n        },\n        enterArray: function () {\n            if (curKey === null) {\n                return fail('missing <key>');\n            }\n            var newArr = [];\n            cur[curKey] = newArr;\n            curKey = null;\n            pushState(2 /* ARR_STATE */, newArr);\n        }\n    };\n    var arrState = {\n        enterDict: function () {\n            var newDict = {};\n            if (locationKeyName !== null) {\n                newDict[locationKeyName] = {\n                    filename: filename,\n                    line: line,\n                    char: char\n                };\n            }\n            cur.push(newDict);\n            pushState(1 /* DICT_STATE */, newDict);\n        },\n        enterArray: function () {\n            var newArr = [];\n            cur.push(newArr);\n            pushState(2 /* ARR_STATE */, newArr);\n        }\n    };\n    function enterDict() {\n        if (state === 1 /* DICT_STATE */) {\n            dictState.enterDict();\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            arrState.enterDict();\n        }\n        else { // ROOT_STATE\n            cur = {};\n            if (locationKeyName !== null) {\n                cur[locationKeyName] = {\n                    filename: filename,\n                    line: line,\n                    char: char\n                };\n            }\n            pushState(1 /* DICT_STATE */, cur);\n        }\n    }\n    function leaveDict() {\n        if (state === 1 /* DICT_STATE */) {\n            popState();\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            return fail('unexpected </dict>');\n        }\n        else { // ROOT_STATE\n            return fail('unexpected </dict>');\n        }\n    }\n    function enterArray() {\n        if (state === 1 /* DICT_STATE */) {\n            dictState.enterArray();\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            arrState.enterArray();\n        }\n        else { // ROOT_STATE\n            cur = [];\n            pushState(2 /* ARR_STATE */, cur);\n        }\n    }\n    function leaveArray() {\n        if (state === 1 /* DICT_STATE */) {\n            return fail('unexpected </array>');\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            popState();\n        }\n        else { // ROOT_STATE\n            return fail('unexpected </array>');\n        }\n    }\n    function acceptKey(val) {\n        if (state === 1 /* DICT_STATE */) {\n            if (curKey !== null) {\n                return fail('too many <key>');\n            }\n            curKey = val;\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            return fail('unexpected <key>');\n        }\n        else { // ROOT_STATE\n            return fail('unexpected <key>');\n        }\n    }\n    function acceptString(val) {\n        if (state === 1 /* DICT_STATE */) {\n            if (curKey === null) {\n                return fail('missing <key>');\n            }\n            cur[curKey] = val;\n            curKey = null;\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            cur.push(val);\n        }\n        else { // ROOT_STATE\n            cur = val;\n        }\n    }\n    function acceptReal(val) {\n        if (isNaN(val)) {\n            return fail('cannot parse float');\n        }\n        if (state === 1 /* DICT_STATE */) {\n            if (curKey === null) {\n                return fail('missing <key>');\n            }\n            cur[curKey] = val;\n            curKey = null;\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            cur.push(val);\n        }\n        else { // ROOT_STATE\n            cur = val;\n        }\n    }\n    function acceptInteger(val) {\n        if (isNaN(val)) {\n            return fail('cannot parse integer');\n        }\n        if (state === 1 /* DICT_STATE */) {\n            if (curKey === null) {\n                return fail('missing <key>');\n            }\n            cur[curKey] = val;\n            curKey = null;\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            cur.push(val);\n        }\n        else { // ROOT_STATE\n            cur = val;\n        }\n    }\n    function acceptDate(val) {\n        if (state === 1 /* DICT_STATE */) {\n            if (curKey === null) {\n                return fail('missing <key>');\n            }\n            cur[curKey] = val;\n            curKey = null;\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            cur.push(val);\n        }\n        else { // ROOT_STATE\n            cur = val;\n        }\n    }\n    function acceptData(val) {\n        if (state === 1 /* DICT_STATE */) {\n            if (curKey === null) {\n                return fail('missing <key>');\n            }\n            cur[curKey] = val;\n            curKey = null;\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            cur.push(val);\n        }\n        else { // ROOT_STATE\n            cur = val;\n        }\n    }\n    function acceptBool(val) {\n        if (state === 1 /* DICT_STATE */) {\n            if (curKey === null) {\n                return fail('missing <key>');\n            }\n            cur[curKey] = val;\n            curKey = null;\n        }\n        else if (state === 2 /* ARR_STATE */) {\n            cur.push(val);\n        }\n        else { // ROOT_STATE\n            cur = val;\n        }\n    }\n    function escapeVal(str) {\n        return str.replace(/&#([0-9]+);/g, function (_, m0) {\n            return String.fromCodePoint(parseInt(m0, 10));\n        }).replace(/&#x([0-9a-f]+);/g, function (_, m0) {\n            return String.fromCodePoint(parseInt(m0, 16));\n        }).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g, function (_) {\n            switch (_) {\n                case '&amp;': return '&';\n                case '&lt;': return '<';\n                case '&gt;': return '>';\n                case '&quot;': return '\"';\n                case '&apos;': return '\\'';\n            }\n            return _;\n        });\n    }\n    function parseOpenTag() {\n        var r = captureUntil('>');\n        var isClosed = false;\n        if (r.charCodeAt(r.length - 1) === 47 /* SLASH */) {\n            isClosed = true;\n            r = r.substring(0, r.length - 1);\n        }\n        return {\n            name: r.trim(),\n            isClosed: isClosed\n        };\n    }\n    function parseTagValue(tag) {\n        if (tag.isClosed) {\n            return '';\n        }\n        var val = captureUntil('</');\n        advanceUntil('>');\n        return escapeVal(val);\n    }\n    while (pos < len) {\n        skipWhitespace();\n        if (pos >= len) {\n            break;\n        }\n        var chCode = content.charCodeAt(pos);\n        advancePosBy(1);\n        if (chCode !== 60 /* LESS_THAN */) {\n            return fail('expected <');\n        }\n        if (pos >= len) {\n            return fail('unexpected end of input');\n        }\n        var peekChCode = content.charCodeAt(pos);\n        if (peekChCode === 63 /* QUESTION_MARK */) {\n            advancePosBy(1);\n            advanceUntil('?>');\n            continue;\n        }\n        if (peekChCode === 33 /* EXCLAMATION_MARK */) {\n            advancePosBy(1);\n            if (advanceIfStartsWith('--')) {\n                advanceUntil('-->');\n                continue;\n            }\n            advanceUntil('>');\n            continue;\n        }\n        if (peekChCode === 47 /* SLASH */) {\n            advancePosBy(1);\n            skipWhitespace();\n            if (advanceIfStartsWith('plist')) {\n                advanceUntil('>');\n                continue;\n            }\n            if (advanceIfStartsWith('dict')) {\n                advanceUntil('>');\n                leaveDict();\n                continue;\n            }\n            if (advanceIfStartsWith('array')) {\n                advanceUntil('>');\n                leaveArray();\n                continue;\n            }\n            return fail('unexpected closed tag');\n        }\n        var tag = parseOpenTag();\n        switch (tag.name) {\n            case 'dict':\n                enterDict();\n                if (tag.isClosed) {\n                    leaveDict();\n                }\n                continue;\n            case 'array':\n                enterArray();\n                if (tag.isClosed) {\n                    leaveArray();\n                }\n                continue;\n            case 'key':\n                acceptKey(parseTagValue(tag));\n                continue;\n            case 'string':\n                acceptString(parseTagValue(tag));\n                continue;\n            case 'real':\n                acceptReal(parseFloat(parseTagValue(tag)));\n                continue;\n            case 'integer':\n                acceptInteger(parseInt(parseTagValue(tag), 10));\n                continue;\n            case 'date':\n                acceptDate(new Date(parseTagValue(tag)));\n                continue;\n            case 'data':\n                acceptData(parseTagValue(tag));\n                continue;\n            case 'true':\n                parseTagValue(tag);\n                acceptBool(true);\n                continue;\n            case 'false':\n                parseTagValue(tag);\n                acceptBool(false);\n                continue;\n        }\n        if (/^plist/.test(tag.name)) {\n            continue;\n        }\n        return fail('unexpected opened tag ' + tag.name);\n    }\n    return cur;\n}\n//# sourceMappingURL=plist.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction doFail(streamState, msg) {\n    // console.log('Near offset ' + streamState.pos + ': ' + msg + ' ~~~' + streamState.source.substr(streamState.pos, 50) + '~~~');\n    throw new Error('Near offset ' + streamState.pos + ': ' + msg + ' ~~~' + streamState.source.substr(streamState.pos, 50) + '~~~');\n}\nfunction parse(source, filename, withMetadata) {\n    var streamState = new JSONStreamState(source);\n    var token = new JSONToken();\n    var state = 0 /* ROOT_STATE */;\n    var cur = null;\n    var stateStack = [];\n    var objStack = [];\n    function pushState() {\n        stateStack.push(state);\n        objStack.push(cur);\n    }\n    function popState() {\n        state = stateStack.pop();\n        cur = objStack.pop();\n    }\n    function fail(msg) {\n        doFail(streamState, msg);\n    }\n    while (nextJSONToken(streamState, token)) {\n        if (state === 0 /* ROOT_STATE */) {\n            if (cur !== null) {\n                fail('too many constructs in root');\n            }\n            if (token.type === 3 /* LEFT_CURLY_BRACKET */) {\n                cur = {};\n                if (withMetadata) {\n                    cur.$vscodeTextmateLocation = token.toLocation(filename);\n                }\n                pushState();\n                state = 1 /* DICT_STATE */;\n                continue;\n            }\n            if (token.type === 2 /* LEFT_SQUARE_BRACKET */) {\n                cur = [];\n                pushState();\n                state = 4 /* ARR_STATE */;\n                continue;\n            }\n            fail('unexpected token in root');\n        }\n        if (state === 2 /* DICT_STATE_COMMA */) {\n            if (token.type === 5 /* RIGHT_CURLY_BRACKET */) {\n                popState();\n                continue;\n            }\n            if (token.type === 7 /* COMMA */) {\n                state = 3 /* DICT_STATE_NO_CLOSE */;\n                continue;\n            }\n            fail('expected , or }');\n        }\n        if (state === 1 /* DICT_STATE */ || state === 3 /* DICT_STATE_NO_CLOSE */) {\n            if (state === 1 /* DICT_STATE */ && token.type === 5 /* RIGHT_CURLY_BRACKET */) {\n                popState();\n                continue;\n            }\n            if (token.type === 1 /* STRING */) {\n                var keyValue = token.value;\n                if (!nextJSONToken(streamState, token) || token.type !== 6 /* COLON */) {\n                    fail('expected colon');\n                }\n                if (!nextJSONToken(streamState, token)) {\n                    fail('expected value');\n                }\n                state = 2 /* DICT_STATE_COMMA */;\n                if (token.type === 1 /* STRING */) {\n                    cur[keyValue] = token.value;\n                    continue;\n                }\n                if (token.type === 8 /* NULL */) {\n                    cur[keyValue] = null;\n                    continue;\n                }\n                if (token.type === 9 /* TRUE */) {\n                    cur[keyValue] = true;\n                    continue;\n                }\n                if (token.type === 10 /* FALSE */) {\n                    cur[keyValue] = false;\n                    continue;\n                }\n                if (token.type === 11 /* NUMBER */) {\n                    cur[keyValue] = parseFloat(token.value);\n                    continue;\n                }\n                if (token.type === 2 /* LEFT_SQUARE_BRACKET */) {\n                    var newArr = [];\n                    cur[keyValue] = newArr;\n                    pushState();\n                    state = 4 /* ARR_STATE */;\n                    cur = newArr;\n                    continue;\n                }\n                if (token.type === 3 /* LEFT_CURLY_BRACKET */) {\n                    var newDict = {};\n                    if (withMetadata) {\n                        newDict.$vscodeTextmateLocation = token.toLocation(filename);\n                    }\n                    cur[keyValue] = newDict;\n                    pushState();\n                    state = 1 /* DICT_STATE */;\n                    cur = newDict;\n                    continue;\n                }\n            }\n            fail('unexpected token in dict');\n        }\n        if (state === 5 /* ARR_STATE_COMMA */) {\n            if (token.type === 4 /* RIGHT_SQUARE_BRACKET */) {\n                popState();\n                continue;\n            }\n            if (token.type === 7 /* COMMA */) {\n                state = 6 /* ARR_STATE_NO_CLOSE */;\n                continue;\n            }\n            fail('expected , or ]');\n        }\n        if (state === 4 /* ARR_STATE */ || state === 6 /* ARR_STATE_NO_CLOSE */) {\n            if (state === 4 /* ARR_STATE */ && token.type === 4 /* RIGHT_SQUARE_BRACKET */) {\n                popState();\n                continue;\n            }\n            state = 5 /* ARR_STATE_COMMA */;\n            if (token.type === 1 /* STRING */) {\n                cur.push(token.value);\n                continue;\n            }\n            if (token.type === 8 /* NULL */) {\n                cur.push(null);\n                continue;\n            }\n            if (token.type === 9 /* TRUE */) {\n                cur.push(true);\n                continue;\n            }\n            if (token.type === 10 /* FALSE */) {\n                cur.push(false);\n                continue;\n            }\n            if (token.type === 11 /* NUMBER */) {\n                cur.push(parseFloat(token.value));\n                continue;\n            }\n            if (token.type === 2 /* LEFT_SQUARE_BRACKET */) {\n                var newArr = [];\n                cur.push(newArr);\n                pushState();\n                state = 4 /* ARR_STATE */;\n                cur = newArr;\n                continue;\n            }\n            if (token.type === 3 /* LEFT_CURLY_BRACKET */) {\n                var newDict = {};\n                if (withMetadata) {\n                    newDict.$vscodeTextmateLocation = token.toLocation(filename);\n                }\n                cur.push(newDict);\n                pushState();\n                state = 1 /* DICT_STATE */;\n                cur = newDict;\n                continue;\n            }\n            fail('unexpected token in array');\n        }\n        fail('unknown state');\n    }\n    if (objStack.length !== 0) {\n        fail('unclosed constructs');\n    }\n    return cur;\n}\nexports.parse = parse;\nvar JSONStreamState = /** @class */ (function () {\n    function JSONStreamState(source) {\n        this.source = source;\n        this.pos = 0;\n        this.len = source.length;\n        this.line = 1;\n        this.char = 0;\n    }\n    return JSONStreamState;\n}());\nvar JSONToken = /** @class */ (function () {\n    function JSONToken() {\n        this.value = null;\n        this.type = 0 /* UNKNOWN */;\n        this.offset = -1;\n        this.len = -1;\n        this.line = -1;\n        this.char = -1;\n    }\n    JSONToken.prototype.toLocation = function (filename) {\n        return {\n            filename: filename,\n            line: this.line,\n            char: this.char\n        };\n    };\n    return JSONToken;\n}());\n/**\n * precondition: the string is known to be valid JSON (https://www.ietf.org/rfc/rfc4627.txt)\n */\nfunction nextJSONToken(_state, _out) {\n    _out.value = null;\n    _out.type = 0 /* UNKNOWN */;\n    _out.offset = -1;\n    _out.len = -1;\n    _out.line = -1;\n    _out.char = -1;\n    var source = _state.source;\n    var pos = _state.pos;\n    var len = _state.len;\n    var line = _state.line;\n    var char = _state.char;\n    //------------------------ skip whitespace\n    var chCode;\n    do {\n        if (pos >= len) {\n            return false; /*EOS*/\n        }\n        chCode = source.charCodeAt(pos);\n        if (chCode === 32 /* SPACE */ || chCode === 9 /* HORIZONTAL_TAB */ || chCode === 13 /* CARRIAGE_RETURN */) {\n            // regular whitespace\n            pos++;\n            char++;\n            continue;\n        }\n        if (chCode === 10 /* LINE_FEED */) {\n            // newline\n            pos++;\n            line++;\n            char = 0;\n            continue;\n        }\n        // not whitespace\n        break;\n    } while (true);\n    _out.offset = pos;\n    _out.line = line;\n    _out.char = char;\n    if (chCode === 34 /* QUOTATION_MARK */) {\n        //------------------------ strings\n        _out.type = 1 /* STRING */;\n        pos++;\n        char++;\n        do {\n            if (pos >= len) {\n                return false; /*EOS*/\n            }\n            chCode = source.charCodeAt(pos);\n            pos++;\n            char++;\n            if (chCode === 92 /* BACKSLASH */) {\n                // skip next char\n                pos++;\n                char++;\n                continue;\n            }\n            if (chCode === 34 /* QUOTATION_MARK */) {\n                // end of the string\n                break;\n            }\n        } while (true);\n        _out.value = source.substring(_out.offset + 1, pos - 1).replace(/\\\\u([0-9A-Fa-f]{4})/g, function (_, m0) {\n            return String.fromCodePoint(parseInt(m0, 16));\n        }).replace(/\\\\(.)/g, function (_, m0) {\n            switch (m0) {\n                case '\"': return '\"';\n                case '\\\\': return '\\\\';\n                case '/': return '/';\n                case 'b': return '\\b';\n                case 'f': return '\\f';\n                case 'n': return '\\n';\n                case 'r': return '\\r';\n                case 't': return '\\t';\n                default: doFail(_state, 'invalid escape sequence');\n            }\n            throw new Error('unreachable');\n        });\n    }\n    else if (chCode === 91 /* LEFT_SQUARE_BRACKET */) {\n        _out.type = 2 /* LEFT_SQUARE_BRACKET */;\n        pos++;\n        char++;\n    }\n    else if (chCode === 123 /* LEFT_CURLY_BRACKET */) {\n        _out.type = 3 /* LEFT_CURLY_BRACKET */;\n        pos++;\n        char++;\n    }\n    else if (chCode === 93 /* RIGHT_SQUARE_BRACKET */) {\n        _out.type = 4 /* RIGHT_SQUARE_BRACKET */;\n        pos++;\n        char++;\n    }\n    else if (chCode === 125 /* RIGHT_CURLY_BRACKET */) {\n        _out.type = 5 /* RIGHT_CURLY_BRACKET */;\n        pos++;\n        char++;\n    }\n    else if (chCode === 58 /* COLON */) {\n        _out.type = 6 /* COLON */;\n        pos++;\n        char++;\n    }\n    else if (chCode === 44 /* COMMA */) {\n        _out.type = 7 /* COMMA */;\n        pos++;\n        char++;\n    }\n    else if (chCode === 110 /* n */) {\n        //------------------------ null\n        _out.type = 8 /* NULL */;\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 117 /* u */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 108 /* l */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 108 /* l */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n    }\n    else if (chCode === 116 /* t */) {\n        //------------------------ true\n        _out.type = 9 /* TRUE */;\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 114 /* r */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 117 /* u */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 101 /* e */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n    }\n    else if (chCode === 102 /* f */) {\n        //------------------------ false\n        _out.type = 10 /* FALSE */;\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 97 /* a */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 108 /* l */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 115 /* s */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n        chCode = source.charCodeAt(pos);\n        if (chCode !== 101 /* e */) {\n            return false; /* INVALID */\n        }\n        pos++;\n        char++;\n    }\n    else {\n        //------------------------ numbers\n        _out.type = 11 /* NUMBER */;\n        do {\n            if (pos >= len) {\n                return false; /*EOS*/\n            }\n            chCode = source.charCodeAt(pos);\n            if (chCode === 46 /* DOT */\n                || (chCode >= 48 /* D0 */ && chCode <= 57 /* D9 */)\n                || (chCode === 101 /* e */ || chCode === 69 /* E */)\n                || (chCode === 45 /* MINUS */ || chCode === 43 /* PLUS */)) {\n                // looks like a piece of a number\n                pos++;\n                char++;\n                continue;\n            }\n            // pos--; char--;\n            break;\n        } while (true);\n    }\n    _out.len = pos - _out.offset;\n    if (_out.value === null) {\n        _out.value = source.substr(_out.offset, _out.len);\n    }\n    _state.pos = pos;\n    _state.line = line;\n    _state.char = char;\n    // console.log('PRODUCING TOKEN: ', _out.value, JSONTokenType[_out.type]);\n    return true;\n}\n//# sourceMappingURL=json.js.map", "\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ParsedThemeRule = /** @class */ (function () {\n    function ParsedThemeRule(scope, parentScopes, index, fontStyle, foreground, background) {\n        this.scope = scope;\n        this.parentScopes = parentScopes;\n        this.index = index;\n        this.fontStyle = fontStyle;\n        this.foreground = foreground;\n        this.background = background;\n    }\n    return ParsedThemeRule;\n}());\nexports.ParsedThemeRule = ParsedThemeRule;\nfunction isValidHexColor(hex) {\n    if (/^#[0-9a-f]{6}$/i.test(hex)) {\n        // #rrggbb\n        return true;\n    }\n    if (/^#[0-9a-f]{8}$/i.test(hex)) {\n        // #rrggbbaa\n        return true;\n    }\n    if (/^#[0-9a-f]{3}$/i.test(hex)) {\n        // #rgb\n        return true;\n    }\n    if (/^#[0-9a-f]{4}$/i.test(hex)) {\n        // #rgba\n        return true;\n    }\n    return false;\n}\n/**\n * Parse a raw theme into rules.\n */\nfunction parseTheme(source) {\n    if (!source) {\n        return [];\n    }\n    if (!source.settings || !Array.isArray(source.settings)) {\n        return [];\n    }\n    var settings = source.settings;\n    var result = [], resultLen = 0;\n    for (var i = 0, len = settings.length; i < len; i++) {\n        var entry = settings[i];\n        if (!entry.settings) {\n            continue;\n        }\n        var scopes = void 0;\n        if (typeof entry.scope === 'string') {\n            var _scope = entry.scope;\n            // remove leading commas\n            _scope = _scope.replace(/^[,]+/, '');\n            // remove trailing commans\n            _scope = _scope.replace(/[,]+$/, '');\n            scopes = _scope.split(',');\n        }\n        else if (Array.isArray(entry.scope)) {\n            scopes = entry.scope;\n        }\n        else {\n            scopes = [''];\n        }\n        var fontStyle = -1 /* NotSet */;\n        if (typeof entry.settings.fontStyle === 'string') {\n            fontStyle = 0 /* None */;\n            var segments = entry.settings.fontStyle.split(' ');\n            for (var j = 0, lenJ = segments.length; j < lenJ; j++) {\n                var segment = segments[j];\n                switch (segment) {\n                    case 'italic':\n                        fontStyle = fontStyle | 1 /* Italic */;\n                        break;\n                    case 'bold':\n                        fontStyle = fontStyle | 2 /* Bold */;\n                        break;\n                    case 'underline':\n                        fontStyle = fontStyle | 4 /* Underline */;\n                        break;\n                }\n            }\n        }\n        var foreground = null;\n        if (typeof entry.settings.foreground === 'string' && isValidHexColor(entry.settings.foreground)) {\n            foreground = entry.settings.foreground;\n        }\n        var background = null;\n        if (typeof entry.settings.background === 'string' && isValidHexColor(entry.settings.background)) {\n            background = entry.settings.background;\n        }\n        for (var j = 0, lenJ = scopes.length; j < lenJ; j++) {\n            var _scope = scopes[j].trim();\n            var segments = _scope.split(' ');\n            var scope = segments[segments.length - 1];\n            var parentScopes = null;\n            if (segments.length > 1) {\n                parentScopes = segments.slice(0, segments.length - 1);\n                parentScopes.reverse();\n            }\n            result[resultLen++] = new ParsedThemeRule(scope, parentScopes, i, fontStyle, foreground, background);\n        }\n    }\n    return result;\n}\nexports.parseTheme = parseTheme;\n/**\n * Resolve rules (i.e. inheritance).\n */\nfunction resolveParsedThemeRules(parsedThemeRules, _colorMap) {\n    // Sort rules lexicographically, and then by index if necessary\n    parsedThemeRules.sort(function (a, b) {\n        var r = strcmp(a.scope, b.scope);\n        if (r !== 0) {\n            return r;\n        }\n        r = strArrCmp(a.parentScopes, b.parentScopes);\n        if (r !== 0) {\n            return r;\n        }\n        return a.index - b.index;\n    });\n    // Determine defaults\n    var defaultFontStyle = 0 /* None */;\n    var defaultForeground = '#000000';\n    var defaultBackground = '#ffffff';\n    while (parsedThemeRules.length >= 1 && parsedThemeRules[0].scope === '') {\n        var incomingDefaults = parsedThemeRules.shift();\n        if (incomingDefaults.fontStyle !== -1 /* NotSet */) {\n            defaultFontStyle = incomingDefaults.fontStyle;\n        }\n        if (incomingDefaults.foreground !== null) {\n            defaultForeground = incomingDefaults.foreground;\n        }\n        if (incomingDefaults.background !== null) {\n            defaultBackground = incomingDefaults.background;\n        }\n    }\n    var colorMap = new ColorMap(_colorMap);\n    var defaults = new ThemeTrieElementRule(0, null, defaultFontStyle, colorMap.getId(defaultForeground), colorMap.getId(defaultBackground));\n    var root = new ThemeTrieElement(new ThemeTrieElementRule(0, null, -1 /* NotSet */, 0, 0), []);\n    for (var i = 0, len = parsedThemeRules.length; i < len; i++) {\n        var rule = parsedThemeRules[i];\n        root.insert(0, rule.scope, rule.parentScopes, rule.fontStyle, colorMap.getId(rule.foreground), colorMap.getId(rule.background));\n    }\n    return new Theme(colorMap, defaults, root);\n}\nvar ColorMap = /** @class */ (function () {\n    function ColorMap(_colorMap) {\n        this._lastColorId = 0;\n        this._id2color = [];\n        this._color2id = Object.create(null);\n        if (Array.isArray(_colorMap)) {\n            this._isFrozen = true;\n            for (var i = 0, len = _colorMap.length; i < len; i++) {\n                this._color2id[_colorMap[i]] = i;\n                this._id2color[i] = _colorMap[i];\n            }\n        }\n        else {\n            this._isFrozen = false;\n        }\n    }\n    ColorMap.prototype.getId = function (color) {\n        if (color === null) {\n            return 0;\n        }\n        color = color.toUpperCase();\n        var value = this._color2id[color];\n        if (value) {\n            return value;\n        }\n        if (this._isFrozen) {\n            throw new Error(\"Missing color in color map - \" + color);\n        }\n        value = ++this._lastColorId;\n        this._color2id[color] = value;\n        this._id2color[value] = color;\n        return value;\n    };\n    ColorMap.prototype.getColorMap = function () {\n        return this._id2color.slice(0);\n    };\n    return ColorMap;\n}());\nexports.ColorMap = ColorMap;\nvar Theme = /** @class */ (function () {\n    function Theme(colorMap, defaults, root) {\n        this._colorMap = colorMap;\n        this._root = root;\n        this._defaults = defaults;\n        this._cache = {};\n    }\n    Theme.createFromRawTheme = function (source, colorMap) {\n        return this.createFromParsedTheme(parseTheme(source), colorMap);\n    };\n    Theme.createFromParsedTheme = function (source, colorMap) {\n        return resolveParsedThemeRules(source, colorMap);\n    };\n    Theme.prototype.getColorMap = function () {\n        return this._colorMap.getColorMap();\n    };\n    Theme.prototype.getDefaults = function () {\n        return this._defaults;\n    };\n    Theme.prototype.match = function (scopeName) {\n        if (!this._cache.hasOwnProperty(scopeName)) {\n            this._cache[scopeName] = this._root.match(scopeName);\n        }\n        return this._cache[scopeName];\n    };\n    return Theme;\n}());\nexports.Theme = Theme;\nfunction strcmp(a, b) {\n    if (a < b) {\n        return -1;\n    }\n    if (a > b) {\n        return 1;\n    }\n    return 0;\n}\nexports.strcmp = strcmp;\nfunction strArrCmp(a, b) {\n    if (a === null && b === null) {\n        return 0;\n    }\n    if (!a) {\n        return -1;\n    }\n    if (!b) {\n        return 1;\n    }\n    var len1 = a.length;\n    var len2 = b.length;\n    if (len1 === len2) {\n        for (var i = 0; i < len1; i++) {\n            var res = strcmp(a[i], b[i]);\n            if (res !== 0) {\n                return res;\n            }\n        }\n        return 0;\n    }\n    return len1 - len2;\n}\nexports.strArrCmp = strArrCmp;\nvar ThemeTrieElementRule = /** @class */ (function () {\n    function ThemeTrieElementRule(scopeDepth, parentScopes, fontStyle, foreground, background) {\n        this.scopeDepth = scopeDepth;\n        this.parentScopes = parentScopes;\n        this.fontStyle = fontStyle;\n        this.foreground = foreground;\n        this.background = background;\n    }\n    ThemeTrieElementRule.prototype.clone = function () {\n        return new ThemeTrieElementRule(this.scopeDepth, this.parentScopes, this.fontStyle, this.foreground, this.background);\n    };\n    ThemeTrieElementRule.cloneArr = function (arr) {\n        var r = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            r[i] = arr[i].clone();\n        }\n        return r;\n    };\n    ThemeTrieElementRule.prototype.acceptOverwrite = function (scopeDepth, fontStyle, foreground, background) {\n        if (this.scopeDepth > scopeDepth) {\n            console.log('how did this happen?');\n        }\n        else {\n            this.scopeDepth = scopeDepth;\n        }\n        // console.log('TODO -> my depth: ' + this.scopeDepth + ', overwriting depth: ' + scopeDepth);\n        if (fontStyle !== -1 /* NotSet */) {\n            this.fontStyle = fontStyle;\n        }\n        if (foreground !== 0) {\n            this.foreground = foreground;\n        }\n        if (background !== 0) {\n            this.background = background;\n        }\n    };\n    return ThemeTrieElementRule;\n}());\nexports.ThemeTrieElementRule = ThemeTrieElementRule;\nvar ThemeTrieElement = /** @class */ (function () {\n    function ThemeTrieElement(mainRule, rulesWithParentScopes, children) {\n        if (rulesWithParentScopes === void 0) { rulesWithParentScopes = []; }\n        if (children === void 0) { children = {}; }\n        this._mainRule = mainRule;\n        this._rulesWithParentScopes = rulesWithParentScopes;\n        this._children = children;\n    }\n    ThemeTrieElement._sortBySpecificity = function (arr) {\n        if (arr.length === 1) {\n            return arr;\n        }\n        arr.sort(this._cmpBySpecificity);\n        return arr;\n    };\n    ThemeTrieElement._cmpBySpecificity = function (a, b) {\n        if (a.scopeDepth === b.scopeDepth) {\n            var aParentScopes = a.parentScopes;\n            var bParentScopes = b.parentScopes;\n            var aParentScopesLen = aParentScopes === null ? 0 : aParentScopes.length;\n            var bParentScopesLen = bParentScopes === null ? 0 : bParentScopes.length;\n            if (aParentScopesLen === bParentScopesLen) {\n                for (var i = 0; i < aParentScopesLen; i++) {\n                    var aLen = aParentScopes[i].length;\n                    var bLen = bParentScopes[i].length;\n                    if (aLen !== bLen) {\n                        return bLen - aLen;\n                    }\n                }\n            }\n            return bParentScopesLen - aParentScopesLen;\n        }\n        return b.scopeDepth - a.scopeDepth;\n    };\n    ThemeTrieElement.prototype.match = function (scope) {\n        if (scope === '') {\n            return ThemeTrieElement._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));\n        }\n        var dotIndex = scope.indexOf('.');\n        var head;\n        var tail;\n        if (dotIndex === -1) {\n            head = scope;\n            tail = '';\n        }\n        else {\n            head = scope.substring(0, dotIndex);\n            tail = scope.substring(dotIndex + 1);\n        }\n        if (this._children.hasOwnProperty(head)) {\n            return this._children[head].match(tail);\n        }\n        return ThemeTrieElement._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));\n    };\n    ThemeTrieElement.prototype.insert = function (scopeDepth, scope, parentScopes, fontStyle, foreground, background) {\n        if (scope === '') {\n            this._doInsertHere(scopeDepth, parentScopes, fontStyle, foreground, background);\n            return;\n        }\n        var dotIndex = scope.indexOf('.');\n        var head;\n        var tail;\n        if (dotIndex === -1) {\n            head = scope;\n            tail = '';\n        }\n        else {\n            head = scope.substring(0, dotIndex);\n            tail = scope.substring(dotIndex + 1);\n        }\n        var child;\n        if (this._children.hasOwnProperty(head)) {\n            child = this._children[head];\n        }\n        else {\n            child = new ThemeTrieElement(this._mainRule.clone(), ThemeTrieElementRule.cloneArr(this._rulesWithParentScopes));\n            this._children[head] = child;\n        }\n        child.insert(scopeDepth + 1, tail, parentScopes, fontStyle, foreground, background);\n    };\n    ThemeTrieElement.prototype._doInsertHere = function (scopeDepth, parentScopes, fontStyle, foreground, background) {\n        if (parentScopes === null) {\n            // Merge into the main rule\n            this._mainRule.acceptOverwrite(scopeDepth, fontStyle, foreground, background);\n            return;\n        }\n        // Try to merge into existing rule\n        for (var i = 0, len = this._rulesWithParentScopes.length; i < len; i++) {\n            var rule = this._rulesWithParentScopes[i];\n            if (strArrCmp(rule.parentScopes, parentScopes) === 0) {\n                // bingo! => we get to merge this into an existing one\n                rule.acceptOverwrite(scopeDepth, fontStyle, foreground, background);\n                return;\n            }\n        }\n        // Must add a new rule\n        // Inherit from main rule\n        if (fontStyle === -1 /* NotSet */) {\n            fontStyle = this._mainRule.fontStyle;\n        }\n        if (foreground === 0) {\n            foreground = this._mainRule.foreground;\n        }\n        if (background === 0) {\n            background = this._mainRule.background;\n        }\n        this._rulesWithParentScopes.push(new ThemeTrieElementRule(scopeDepth, parentScopes, fontStyle, foreground, background));\n    };\n    return ThemeTrieElement;\n}());\nexports.ThemeTrieElement = ThemeTrieElement;\n//# sourceMappingURL=theme.js.map", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"path\" has been externalized for browser compatibility. Cannot access \"path.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"fs\" has been externalized for browser compatibility. Cannot access \"fs.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"crypto\" has been externalized for browser compatibility. Cannot access \"crypto.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "{\n  \"name\": \"@typescript/twoslash\",\n  \"version\": \"3.1.0\",\n  \"license\": \"MIT\",\n  \"author\": \"TypeScript team\",\n  \"homepage\": \"https://github.com/microsoft/TypeScript-Website\",\n  \"repository\": {\n    \"url\": \"https://github.com/microsoft/TypeScript-Website.git\",\n    \"directory\": \"packages/create-typescript-playground-plugin\",\n    \"type\": \"git\"\n  },\n  \"bugs\": {\n    \"url\": \"https://github.com/microsoft/TypeScript-Website/issues\"\n  },\n  \"main\": \"dist/index.js\",\n  \"module\": \"dist/twoslash.esm.js\",\n  \"typings\": \"dist/index.d.ts\",\n  \"files\": [\n    \"dist\"\n  ],\n  \"scripts\": {\n    \"start\": \"tsdx watch\",\n    \"bootstrap\": \"yarn build\",\n    \"build\": \"tsdx build && yarn readme && yarn make-global\",\n    \"make-global\": \"node scripts/makeGlobals.js\",\n    \"readme\": \"yarn md-magic README.md --config ./scripts/inline-results.js && yarn prettier README.md --write\",\n    \"test\": \"tsdx test\",\n    \"lint\": \"tsdx lint\"\n  },\n  \"devDependencies\": {\n    \"@types/jest\": \"^25.1.3\",\n    \"@types/lz-string\": \"^1.3.33\",\n    \"@types/prettier\": \"^1.19.0\",\n    \"husky\": \"^4.2.3\",\n    \"jest-file-snapshot\": \"^0.3.8\",\n    \"markdown-magic\": \"^1.0.0\",\n    \"prettier\": \"^2.3.2\",\n    \"tsdx\": \"^0.14.1\",\n    \"tslib\": \"^1.10.0\",\n    \"typescript\": \"*\"\n  },\n  \"jest\": {\n    \"watchPathIgnorePatterns\": [\n      \"test/results\"\n    ]\n  },\n  \"browser\": {\n    \"fs\": false,\n    \"lz-string\": false,\n    \"typescript\": false\n  },\n  \"dependencies\": {\n    \"@typescript/vfs\": \"1.3.5\",\n    \"debug\": \"^4.1.1\",\n    \"lz-string\": \"^1.4.4\"\n  }\n}\n", "{\n    \"name\": \"typescript\",\n    \"author\": \"Microsoft Corp.\",\n    \"homepage\": \"https://www.typescriptlang.org/\",\n    \"version\": \"5.9.3\",\n    \"license\": \"Apache-2.0\",\n    \"description\": \"TypeScript is a language for application scale JavaScript development\",\n    \"keywords\": [\n        \"TypeScript\",\n        \"Microsoft\",\n        \"compiler\",\n        \"language\",\n        \"javascript\"\n    ],\n    \"bugs\": {\n        \"url\": \"https://github.com/microsoft/TypeScript/issues\"\n    },\n    \"repository\": {\n        \"type\": \"git\",\n        \"url\": \"https://github.com/microsoft/TypeScript.git\"\n    },\n    \"main\": \"./lib/typescript.js\",\n    \"typings\": \"./lib/typescript.d.ts\",\n    \"bin\": {\n        \"tsc\": \"./bin/tsc\",\n        \"tsserver\": \"./bin/tsserver\"\n    },\n    \"engines\": {\n        \"node\": \">=14.17\"\n    },\n    \"files\": [\n        \"bin\",\n        \"lib\",\n        \"!lib/enu\",\n        \"LICENSE.txt\",\n        \"README.md\",\n        \"SECURITY.md\",\n        \"ThirdPartyNoticeText.txt\",\n        \"!**/.gitattributes\"\n    ],\n    \"devDependencies\": {\n        \"@dprint/formatter\": \"^0.4.1\",\n        \"@dprint/typescript\": \"0.93.4\",\n        \"@esfx/canceltoken\": \"^1.0.0\",\n        \"@eslint/js\": \"^9.20.0\",\n        \"@octokit/rest\": \"^21.1.1\",\n        \"@types/chai\": \"^4.3.20\",\n        \"@types/diff\": \"^7.0.1\",\n        \"@types/minimist\": \"^1.2.5\",\n        \"@types/mocha\": \"^10.0.10\",\n        \"@types/ms\": \"^0.7.34\",\n        \"@types/node\": \"latest\",\n        \"@types/source-map-support\": \"^0.5.10\",\n        \"@types/which\": \"^3.0.4\",\n        \"@typescript-eslint/rule-tester\": \"^8.24.1\",\n        \"@typescript-eslint/type-utils\": \"^8.24.1\",\n        \"@typescript-eslint/utils\": \"^8.24.1\",\n        \"azure-devops-node-api\": \"^14.1.0\",\n        \"c8\": \"^10.1.3\",\n        \"chai\": \"^4.5.0\",\n        \"chokidar\": \"^4.0.3\",\n        \"diff\": \"^7.0.0\",\n        \"dprint\": \"^0.49.0\",\n        \"esbuild\": \"^0.25.0\",\n        \"eslint\": \"^9.20.1\",\n        \"eslint-formatter-autolinkable-stylish\": \"^1.4.0\",\n        \"eslint-plugin-regexp\": \"^2.7.0\",\n        \"fast-xml-parser\": \"^4.5.2\",\n        \"glob\": \"^10.4.5\",\n        \"globals\": \"^15.15.0\",\n        \"hereby\": \"^1.10.0\",\n        \"jsonc-parser\": \"^3.3.1\",\n        \"knip\": \"^5.44.4\",\n        \"minimist\": \"^1.2.8\",\n        \"mocha\": \"^10.8.2\",\n        \"mocha-fivemat-progress-reporter\": \"^0.1.0\",\n        \"monocart-coverage-reports\": \"^2.12.1\",\n        \"ms\": \"^2.1.3\",\n        \"picocolors\": \"^1.1.1\",\n        \"playwright\": \"^1.50.1\",\n        \"source-map-support\": \"^0.5.21\",\n        \"tslib\": \"^2.8.1\",\n        \"typescript\": \"^5.7.3\",\n        \"typescript-eslint\": \"^8.24.1\",\n        \"which\": \"^3.0.1\"\n    },\n    \"overrides\": {\n        \"typescript@*\": \"$typescript\"\n    },\n    \"scripts\": {\n        \"test\": \"hereby runtests-parallel --light=false\",\n        \"test:eslint-rules\": \"hereby run-eslint-rules-tests\",\n        \"build\": \"npm run build:compiler && npm run build:tests\",\n        \"build:compiler\": \"hereby local\",\n        \"build:tests\": \"hereby tests\",\n        \"build:tests:notypecheck\": \"hereby tests --no-typecheck\",\n        \"clean\": \"hereby clean\",\n        \"gulp\": \"hereby\",\n        \"lint\": \"hereby lint\",\n        \"knip\": \"hereby knip\",\n        \"format\": \"dprint fmt\",\n        \"setup-hooks\": \"node scripts/link-hooks.mjs\"\n    },\n    \"browser\": {\n        \"fs\": false,\n        \"os\": false,\n        \"path\": false,\n        \"crypto\": false,\n        \"buffer\": false,\n        \"source-map-support\": false,\n        \"inspector\": false,\n        \"perf_hooks\": false\n    },\n    \"packageManager\": \"npm@8.19.4\",\n    \"volta\": {\n        \"node\": \"20.1.0\",\n        \"npm\": \"8.19.4\"\n    },\n    \"gitHead\": \"c63de15a992d37f0d6cec03ac7631872838602cb\"\n}\n", "type System = import(\"typescript\").System\ntype CompilerOptions = import(\"typescript\").CompilerOptions\ntype CustomTransformers = import(\"typescript\").CustomTransformers\ntype LanguageServiceHost = import(\"typescript\").LanguageServiceHost\ntype CompilerHost = import(\"typescript\").CompilerHost\ntype SourceFile = import(\"typescript\").SourceFile\ntype TS = typeof import(\"typescript\")\n\nlet hasLocalStorage = false\ntry {\n  hasLocalStorage = typeof localStorage !== `undefined`\n} catch (error) {}\n\nconst hasProcess = typeof process !== `undefined`\nconst shouldDebug = (hasLocalStorage && localStorage.getItem(\"DEBUG\")) || (hasProcess && process.env.DEBUG)\nconst debugLog = shouldDebug ? console.log : (_message?: any, ..._optionalParams: any[]) => \"\"\n\nexport interface VirtualTypeScriptEnvironment {\n  sys: System\n  languageService: import(\"typescript\").LanguageService\n  getSourceFile: (fileName: string) => import(\"typescript\").SourceFile | undefined\n  createFile: (fileName: string, content: string) => void\n  updateFile: (fileName: string, content: string, replaceTextSpan?: import(\"typescript\").TextSpan) => void\n}\n\n/**\n * Makes a virtual copy of the TypeScript environment. This is the main API you want to be using with\n * @typescript/vfs. A lot of the other exposed functions are used by this function to get set up.\n *\n * @param sys an object which conforms to the TS Sys (a shim over read/write access to the fs)\n * @param rootFiles a list of files which are considered inside the project\n * @param ts a copy pf the TypeScript module\n * @param compilerOptions the options for this compiler run\n * @param customTransformers custom transformers for this compiler run\n */\n\nexport function createVirtualTypeScriptEnvironment(\n  sys: System,\n  rootFiles: string[],\n  ts: TS,\n  compilerOptions: CompilerOptions = {},\n  customTransformers?: CustomTransformers\n): VirtualTypeScriptEnvironment {\n  const mergedCompilerOpts = { ...defaultCompilerOptions(ts), ...compilerOptions }\n\n  const { languageServiceHost, updateFile } = createVirtualLanguageServiceHost(\n    sys,\n    rootFiles,\n    mergedCompilerOpts,\n    ts,\n    customTransformers\n  )\n  const languageService = ts.createLanguageService(languageServiceHost)\n  const diagnostics = languageService.getCompilerOptionsDiagnostics()\n\n  if (diagnostics.length) {\n    const compilerHost = createVirtualCompilerHost(sys, compilerOptions, ts)\n    throw new Error(ts.formatDiagnostics(diagnostics, compilerHost.compilerHost))\n  }\n\n  return {\n    // @ts-ignore\n    name: \"vfs\",\n    sys,\n    languageService,\n    getSourceFile: fileName => languageService.getProgram()?.getSourceFile(fileName),\n\n    createFile: (fileName, content) => {\n      updateFile(ts.createSourceFile(fileName, content, mergedCompilerOpts.target!, false))\n    },\n    updateFile: (fileName, content, optPrevTextSpan) => {\n      const prevSourceFile = languageService.getProgram()!.getSourceFile(fileName)\n      if (!prevSourceFile) {\n        throw new Error(\"Did not find a source file for \" + fileName)\n      }\n      const prevFullContents = prevSourceFile.text\n\n      // TODO: Validate if the default text span has a fencepost error?\n      const prevTextSpan = optPrevTextSpan ?? ts.createTextSpan(0, prevFullContents.length)\n      const newText =\n        prevFullContents.slice(0, prevTextSpan.start) +\n        content +\n        prevFullContents.slice(prevTextSpan.start + prevTextSpan.length)\n      const newSourceFile = ts.updateSourceFile(prevSourceFile, newText, {\n        span: prevTextSpan,\n        newLength: content.length,\n      })\n\n      updateFile(newSourceFile)\n    },\n  }\n}\n\n/**\n * Grab the list of lib files for a particular target, will return a bit more than necessary (by including\n * the dom) but that's OK\n *\n * @param target The compiler settings target baseline\n * @param ts A copy of the TypeScript module\n */\nexport const knownLibFilesForCompilerOptions = (compilerOptions: CompilerOptions, ts: TS) => {\n  const target = compilerOptions.target || ts.ScriptTarget.ES5\n  const lib = compilerOptions.lib || []\n\n  const files = [\n    \"lib.d.ts\",\n    \"lib.dom.d.ts\",\n    \"lib.dom.iterable.d.ts\",\n    \"lib.webworker.d.ts\",\n    \"lib.webworker.importscripts.d.ts\",\n    \"lib.scripthost.d.ts\",\n    \"lib.es5.d.ts\",\n    \"lib.es6.d.ts\",\n    \"lib.es2015.collection.d.ts\",\n    \"lib.es2015.core.d.ts\",\n    \"lib.es2015.d.ts\",\n    \"lib.es2015.generator.d.ts\",\n    \"lib.es2015.iterable.d.ts\",\n    \"lib.es2015.promise.d.ts\",\n    \"lib.es2015.proxy.d.ts\",\n    \"lib.es2015.reflect.d.ts\",\n    \"lib.es2015.symbol.d.ts\",\n    \"lib.es2015.symbol.wellknown.d.ts\",\n    \"lib.es2016.array.include.d.ts\",\n    \"lib.es2016.d.ts\",\n    \"lib.es2016.full.d.ts\",\n    \"lib.es2017.d.ts\",\n    \"lib.es2017.full.d.ts\",\n    \"lib.es2017.intl.d.ts\",\n    \"lib.es2017.object.d.ts\",\n    \"lib.es2017.sharedmemory.d.ts\",\n    \"lib.es2017.string.d.ts\",\n    \"lib.es2017.typedarrays.d.ts\",\n    \"lib.es2018.asyncgenerator.d.ts\",\n    \"lib.es2018.asynciterable.d.ts\",\n    \"lib.es2018.d.ts\",\n    \"lib.es2018.full.d.ts\",\n    \"lib.es2018.intl.d.ts\",\n    \"lib.es2018.promise.d.ts\",\n    \"lib.es2018.regexp.d.ts\",\n    \"lib.es2019.array.d.ts\",\n    \"lib.es2019.d.ts\",\n    \"lib.es2019.full.d.ts\",\n    \"lib.es2019.object.d.ts\",\n    \"lib.es2019.string.d.ts\",\n    \"lib.es2019.symbol.d.ts\",\n    \"lib.es2020.d.ts\",\n    \"lib.es2020.full.d.ts\",\n    \"lib.es2020.string.d.ts\",\n    \"lib.es2020.symbol.wellknown.d.ts\",\n    \"lib.es2020.bigint.d.ts\",\n    \"lib.es2020.promise.d.ts\",\n    \"lib.es2020.sharedmemory.d.ts\",\n    \"lib.es2020.intl.d.ts\",\n    \"lib.es2021.d.ts\",\n    \"lib.es2021.full.d.ts\",\n    \"lib.es2021.promise.d.ts\",\n    \"lib.es2021.string.d.ts\",\n    \"lib.es2021.weakref.d.ts\",\n    \"lib.esnext.d.ts\",\n    \"lib.esnext.full.d.ts\",\n    \"lib.esnext.intl.d.ts\",\n    \"lib.esnext.promise.d.ts\",\n    \"lib.esnext.string.d.ts\",\n    \"lib.esnext.weakref.d.ts\",\n  ]\n\n  const targetToCut = ts.ScriptTarget[target]\n  const matches = files.filter(f => f.startsWith(`lib.${targetToCut.toLowerCase()}`))\n  const targetCutIndex = files.indexOf(matches.pop()!)\n\n  const getMax = (array: number[]) =>\n    array && array.length ? array.reduce((max, current) => (current > max ? current : max)) : undefined\n\n  // Find the index for everything in\n  const indexesForCutting = lib.map(lib => {\n    const matches = files.filter(f => f.startsWith(`lib.${lib.toLowerCase()}`))\n    if (matches.length === 0) return 0\n\n    const cutIndex = files.indexOf(matches.pop()!)\n    return cutIndex\n  })\n\n  const libCutIndex = getMax(indexesForCutting) || 0\n\n  const finalCutIndex = Math.max(targetCutIndex, libCutIndex)\n  return files.slice(0, finalCutIndex + 1)\n}\n\n/**\n * Sets up a Map with lib contents by grabbing the necessary files from\n * the local copy of typescript via the file system.\n */\nexport const createDefaultMapFromNodeModules = (compilerOptions: CompilerOptions, ts?: typeof import(\"typescript\")) => {\n  const tsModule = ts || require(\"typescript\")\n  const path = requirePath()\n  const fs = requireFS()\n\n  const getLib = (name: string) => {\n    const lib = path.dirname(require.resolve(\"typescript\"))\n    return fs.readFileSync(path.join(lib, name), \"utf8\")\n  }\n\n  const libs = knownLibFilesForCompilerOptions(compilerOptions, tsModule)\n  const fsMap = new Map<string, string>()\n  libs.forEach(lib => {\n    fsMap.set(\"/\" + lib, getLib(lib))\n  })\n  return fsMap\n}\n\n/**\n * Adds recursively files from the FS into the map based on the folder\n */\nexport const addAllFilesFromFolder = (map: Map<string, string>, workingDir: string): void => {\n  const path = requirePath()\n  const fs = requireFS()\n\n  const walk = function (dir: string) {\n    let results: string[] = []\n    const list = fs.readdirSync(dir)\n    list.forEach(function (file: string) {\n      file = path.join(dir, file)\n      const stat = fs.statSync(file)\n      if (stat && stat.isDirectory()) {\n        /* Recurse into a subdirectory */\n        results = results.concat(walk(file))\n      } else {\n        /* Is a file */\n        results.push(file)\n      }\n    })\n    return results\n  }\n\n  const allFiles = walk(workingDir)\n\n  allFiles.forEach(lib => {\n    const fsPath = \"/node_modules/@types\" + lib.replace(workingDir, \"\")\n    const content = fs.readFileSync(lib, \"utf8\")\n    const validExtensions = [\".ts\", \".tsx\"]\n\n    if (validExtensions.includes(path.extname(fsPath))) {\n      map.set(fsPath, content)\n    }\n  })\n}\n\n/** Adds all files from node_modules/@types into the FS Map */\nexport const addFilesForTypesIntoFolder = (map: Map<string, string>) =>\n  addAllFilesFromFolder(map, \"node_modules/@types\")\n\n/**\n * Create a virtual FS Map with the lib files from a particular TypeScript\n * version based on the target, Always includes dom ATM.\n *\n * @param options The compiler target, which dictates the libs to set up\n * @param version the versions of TypeScript which are supported\n * @param cache should the values be stored in local storage\n * @param ts a copy of the typescript import\n * @param lzstring an optional copy of the lz-string import\n * @param fetcher an optional replacement for the global fetch function (tests mainly)\n * @param storer an optional replacement for the localStorage global (tests mainly)\n */\nexport const createDefaultMapFromCDN = (\n  options: CompilerOptions,\n  version: string,\n  cache: boolean,\n  ts: TS,\n  lzstring?: typeof import(\"lz-string\"),\n  fetcher?: typeof fetch,\n  storer?: typeof localStorage\n) => {\n  const fetchlike = fetcher || fetch\n  const fsMap = new Map<string, string>()\n  const files = knownLibFilesForCompilerOptions(options, ts)\n  const prefix = `https://typescript.azureedge.net/cdn/${version}/typescript/lib/`\n\n  function zip(str: string) {\n    return lzstring ? lzstring.compressToUTF16(str) : str\n  }\n\n  function unzip(str: string) {\n    return lzstring ? lzstring.decompressFromUTF16(str) : str\n  }\n\n  // Map the known libs to a node fetch promise, then return the contents\n  function uncached() {\n    return Promise.all(files.map(lib => fetchlike(prefix + lib).then(resp => resp.text()))).then(contents => {\n      contents.forEach((text, index) => fsMap.set(\"/\" + files[index], text))\n    })\n  }\n\n  // A localstorage and lzzip aware version of the lib files\n  function cached() {\n    const storelike = storer || localStorage\n\n    const keys = Object.keys(localStorage)\n    keys.forEach(key => {\n      // Remove anything which isn't from this version\n      if (key.startsWith(\"ts-lib-\") && !key.startsWith(\"ts-lib-\" + version)) {\n        storelike.removeItem(key)\n      }\n    })\n\n    return Promise.all(\n      files.map(lib => {\n        const cacheKey = `ts-lib-${version}-${lib}`\n        const content = storelike.getItem(cacheKey)\n\n        if (!content) {\n          // Make the API call and store the text concent in the cache\n          return fetchlike(prefix + lib)\n            .then(resp => resp.text())\n            .then(t => {\n              storelike.setItem(cacheKey, zip(t))\n              return t\n            })\n        } else {\n          return Promise.resolve(unzip(content))\n        }\n      })\n    ).then(contents => {\n      contents.forEach((text, index) => {\n        const name = \"/\" + files[index]\n        fsMap.set(name, text)\n      })\n    })\n  }\n\n  const func = cache ? cached : uncached\n  return func().then(() => fsMap)\n}\n\nfunction notImplemented(methodName: string): any {\n  throw new Error(`Method '${methodName}' is not implemented.`)\n}\n\nfunction audit<ArgsT extends any[], ReturnT>(\n  name: string,\n  fn: (...args: ArgsT) => ReturnT\n): (...args: ArgsT) => ReturnT {\n  return (...args) => {\n    const res = fn(...args)\n\n    const smallres = typeof res === \"string\" ? res.slice(0, 80) + \"...\" : res\n    debugLog(\"> \" + name, ...args)\n    debugLog(\"< \" + smallres)\n\n    return res\n  }\n}\n\n/** The default compiler options if TypeScript could ever change the compiler options */\nconst defaultCompilerOptions = (ts: typeof import(\"typescript\")): CompilerOptions => {\n  return {\n    ...ts.getDefaultCompilerOptions(),\n    jsx: ts.JsxEmit.React,\n    strict: true,\n    esModuleInterop: true,\n    module: ts.ModuleKind.ESNext,\n    suppressOutputPathCheck: true,\n    skipLibCheck: true,\n    skipDefaultLibCheck: true,\n    moduleResolution: ts.ModuleResolutionKind.NodeJs,\n  }\n}\n\n// \"/DOM.d.ts\" => \"/lib.dom.d.ts\"\nconst libize = (path: string) => path.replace(\"/\", \"/lib.\").toLowerCase()\n\n/**\n * Creates an in-memory System object which can be used in a TypeScript program, this\n * is what provides read/write aspects of the virtual fs\n */\nexport function createSystem(files: Map<string, string>): System {\n  return {\n    args: [],\n    createDirectory: () => notImplemented(\"createDirectory\"),\n    // TODO: could make a real file tree\n    directoryExists: audit(\"directoryExists\", directory => {\n      return Array.from(files.keys()).some(path => path.startsWith(directory))\n    }),\n    exit: () => notImplemented(\"exit\"),\n    fileExists: audit(\"fileExists\", fileName => files.has(fileName) || files.has(libize(fileName))),\n    getCurrentDirectory: () => \"/\",\n    getDirectories: () => [],\n    getExecutingFilePath: () => notImplemented(\"getExecutingFilePath\"),\n    readDirectory: audit(\"readDirectory\", directory => (directory === \"/\" ? Array.from(files.keys()) : [])),\n    readFile: audit(\"readFile\", fileName => files.get(fileName) || files.get(libize(fileName))),\n    resolvePath: path => path,\n    newLine: \"\\n\",\n    useCaseSensitiveFileNames: true,\n    write: () => notImplemented(\"write\"),\n    writeFile: (fileName, contents) => {\n      files.set(fileName, contents)\n    },\n  }\n}\n\n/**\n * Creates a file-system backed System object which can be used in a TypeScript program, you provide\n * a set of virtual files which are prioritised over the FS versions, then a path to the root of your\n * project (basically the folder your node_modules lives)\n */\nexport function createFSBackedSystem(files: Map<string, string>, _projectRoot: string, ts: TS): System {\n  // We need to make an isolated folder for the tsconfig, but also need to be able to resolve the\n  // existing node_modules structures going back through the history\n  const root = _projectRoot + \"/vfs\"\n  const path = requirePath()\n\n  // The default System in TypeScript\n  const nodeSys = ts.sys\n  const tsLib = path.dirname(require.resolve(\"typescript\"))\n\n  return {\n    // @ts-ignore\n    name: \"fs-vfs\",\n    root,\n    args: [],\n    createDirectory: () => notImplemented(\"createDirectory\"),\n    // TODO: could make a real file tree\n    directoryExists: audit(\"directoryExists\", directory => {\n      return Array.from(files.keys()).some(path => path.startsWith(directory)) || nodeSys.directoryExists(directory)\n    }),\n    exit: nodeSys.exit,\n    fileExists: audit(\"fileExists\", fileName => {\n      if (files.has(fileName)) return true\n      // Don't let other tsconfigs end up touching the vfs\n      if (fileName.includes(\"tsconfig.json\") || fileName.includes(\"tsconfig.json\")) return false\n      if (fileName.startsWith(\"/lib\")) {\n        const tsLibName = `${tsLib}/${fileName.replace(\"/\", \"\")}`\n        return nodeSys.fileExists(tsLibName)\n      }\n      return nodeSys.fileExists(fileName)\n    }),\n    getCurrentDirectory: () => root,\n    getDirectories: nodeSys.getDirectories,\n    getExecutingFilePath: () => notImplemented(\"getExecutingFilePath\"),\n    readDirectory: audit(\"readDirectory\", (...args) => {\n      if (args[0] === \"/\") {\n        return Array.from(files.keys())\n      } else {\n        return nodeSys.readDirectory(...args)\n      }\n    }),\n    readFile: audit(\"readFile\", fileName => {\n      if (files.has(fileName)) return files.get(fileName)\n      if (fileName.startsWith(\"/lib\")) {\n        const tsLibName = `${tsLib}/${fileName.replace(\"/\", \"\")}`\n        const result = nodeSys.readFile(tsLibName)\n        if (!result) {\n          const libs = nodeSys.readDirectory(tsLib)\n          throw new Error(\n            `TSVFS: A request was made for ${tsLibName} but there wasn't a file found in the file map. You likely have a mismatch in the compiler options for the CDN download vs the compiler program. Existing Libs: ${libs}.`\n          )\n        }\n        return result\n      }\n      return nodeSys.readFile(fileName)\n    }),\n    resolvePath: path => {\n      if (files.has(path)) return path\n      return nodeSys.resolvePath(path)\n    },\n    newLine: \"\\n\",\n    useCaseSensitiveFileNames: true,\n    write: () => notImplemented(\"write\"),\n    writeFile: (fileName, contents) => {\n      files.set(fileName, contents)\n    },\n  }\n}\n\n/**\n * Creates an in-memory CompilerHost -which is essentially an extra wrapper to System\n * which works with TypeScript objects - returns both a compiler host, and a way to add new SourceFile\n * instances to the in-memory file system.\n */\nexport function createVirtualCompilerHost(sys: System, compilerOptions: CompilerOptions, ts: TS) {\n  const sourceFiles = new Map<string, SourceFile>()\n  const save = (sourceFile: SourceFile) => {\n    sourceFiles.set(sourceFile.fileName, sourceFile)\n    return sourceFile\n  }\n\n  type Return = {\n    compilerHost: CompilerHost\n    updateFile: (sourceFile: SourceFile) => boolean\n  }\n\n  const vHost: Return = {\n    compilerHost: {\n      ...sys,\n      getCanonicalFileName: fileName => fileName,\n      getDefaultLibFileName: () => \"/\" + ts.getDefaultLibFileName(compilerOptions), // '/lib.d.ts',\n      // getDefaultLibLocation: () => '/',\n      getDirectories: () => [],\n      getNewLine: () => sys.newLine,\n      getSourceFile: fileName => {\n        return (\n          sourceFiles.get(fileName) ||\n          save(\n            ts.createSourceFile(\n              fileName,\n              sys.readFile(fileName)!,\n              compilerOptions.target || defaultCompilerOptions(ts).target!,\n              false\n            )\n          )\n        )\n      },\n      useCaseSensitiveFileNames: () => sys.useCaseSensitiveFileNames,\n    },\n    updateFile: sourceFile => {\n      const alreadyExists = sourceFiles.has(sourceFile.fileName)\n      sys.writeFile(sourceFile.fileName, sourceFile.text)\n      sourceFiles.set(sourceFile.fileName, sourceFile)\n      return alreadyExists\n    },\n  }\n  return vHost\n}\n\n/**\n * Creates an object which can host a language service against the virtual file-system\n */\nexport function createVirtualLanguageServiceHost(\n  sys: System,\n  rootFiles: string[],\n  compilerOptions: CompilerOptions,\n  ts: TS,\n  customTransformers?: CustomTransformers\n) {\n  const fileNames = [...rootFiles]\n  const { compilerHost, updateFile } = createVirtualCompilerHost(sys, compilerOptions, ts)\n  const fileVersions = new Map<string, string>()\n  let projectVersion = 0\n  const languageServiceHost: LanguageServiceHost = {\n    ...compilerHost,\n    getProjectVersion: () => projectVersion.toString(),\n    getCompilationSettings: () => compilerOptions,\n    getCustomTransformers: () => customTransformers,\n    getScriptFileNames: () => fileNames,\n    getScriptSnapshot: fileName => {\n      const contents = sys.readFile(fileName)\n      if (contents) {\n        return ts.ScriptSnapshot.fromString(contents)\n      }\n      return\n    },\n    getScriptVersion: fileName => {\n      return fileVersions.get(fileName) || \"0\"\n    },\n    writeFile: sys.writeFile,\n  }\n\n  type Return = {\n    languageServiceHost: LanguageServiceHost\n    updateFile: (sourceFile: import(\"typescript\").SourceFile) => void\n  }\n\n  const lsHost: Return = {\n    languageServiceHost,\n    updateFile: sourceFile => {\n      projectVersion++\n      fileVersions.set(sourceFile.fileName, projectVersion.toString())\n      if (!fileNames.includes(sourceFile.fileName)) {\n        fileNames.push(sourceFile.fileName)\n      }\n      updateFile(sourceFile)\n    },\n  }\n  return lsHost\n}\n\nconst requirePath = () => {\n  return require(String.fromCharCode(112, 97, 116, 104)) as typeof import(\"path\")\n}\n\nconst requireFS = () => {\n  return require(String.fromCharCode(102, 115)) as typeof import(\"fs\")\n}\n", "import { TwoslashError } from \"./\"\n\nexport function escapeHtml(text: string) {\n  return text.replace(/</g, \"&lt;\")\n}\n\nexport function strrep(text: string, count: number) {\n  let s = \"\"\n  for (let i = 0; i < count; i++) {\n    s += text\n  }\n  return s\n}\n\nexport function textToAnchorName(text: string) {\n  return text\n    .toLowerCase()\n    .replace(/ /g, \"-\")\n    .replace(/`|#|\\//g, \"\")\n}\n\nexport function fileNameToUrlName(s: string) {\n  return s.replace(/ /g, \"-\").replace(/#/g, \"sharp\").toLowerCase()\n}\n\nexport function parsePrimitive(value: string, type: string): any {\n  switch (type) {\n    case \"number\":\n      return +value\n    case \"string\":\n      return value\n    case \"boolean\":\n      return value.toLowerCase() === \"true\" || value.length === 0\n  }\n\n  throw new TwoslashError(\n    `Unknown primitive value in compiler flag`,\n    `The only recognized primitives are number, string and boolean. Got ${type} with ${value}.`,\n    `This is likely a typo.`\n  )\n}\n\nexport function cleanMarkdownEscaped(code: string) {\n  code = code.replace(/Â¨D/g, \"$\")\n  code = code.replace(/Â¨T/g, \"~\")\n  return code\n}\n\nexport function typesToExtension(types: string) {\n  const map: Record<string, string> = {\n    js: \"js\",\n    javascript: \"js\",\n    ts: \"ts\",\n    typescript: \"ts\",\n    tsx: \"tsx\",\n    jsx: \"jsx\",\n    json: \"json\",\n    jsn: \"json\",\n  }\n\n  if (map[types]) return map[types]\n\n  throw new TwoslashError(\n    `Unknown TypeScript extension given to Twoslash`,\n    `Received ${types} but Twoslash only accepts: ${Object.keys(map)} `,\n    ``\n  )\n}\n\nexport function getIdentifierTextSpans(ts: typeof import(\"typescript\"), sourceFile: import(\"typescript\").SourceFile) {\n  const textSpans: { span: import(\"typescript\").TextSpan; text: string }[] = []\n  checkChildren(sourceFile)\n  return textSpans\n\n  function checkChildren(node: import(\"typescript\").Node) {\n    ts.forEachChild(node, child => {\n      if (ts.isIdentifier(child)) {\n        const start = child.getStart(sourceFile, false)\n        textSpans.push({ span: ts.createTextSpan(start, child.end - start), text: child.getText(sourceFile) })\n      }\n      checkChildren(child)\n    })\n  }\n}\n\nexport function stringAroundIndex(string: string, index: number) {\n  const arr = [\n    string[index - 3],\n    string[index - 2],\n    string[index - 1],\n    \">\",\n    string[index],\n    \"<\",\n    string[index + 1],\n    string[index + 2],\n    string[index + 3],\n  ]\n  return arr.filter(Boolean).join(\"\")\n}\n\n/** Came from https://ourcodeworld.com/articles/read/223/how-to-retrieve-the-closest-word-in-a-string-with-a-given-index-in-javascript */\nexport function getClosestWord(str: string, pos: number) {\n  // Make copies\n  str = String(str)\n  pos = Number(pos) >>> 0\n\n  // Search for the word's beginning and end.\n  var left = str.slice(0, pos + 1).search(/\\S+$/),\n    right = str.slice(pos).search(/\\s/)\n\n  // The last word in the string is a special case.\n  if (right < 0) {\n    return {\n      word: str.slice(left),\n      startPos: left,\n    }\n  }\n  // Return the word, using the located bounds to extract it from the string.\n  return {\n    word: str.slice(left, right + pos),\n    startPos: left,\n  }\n}\n", "import { TwoslashError } from \"./\"\n\n/** To ensure that errors are matched up right */\nexport function validateCodeForErrors(\n  relevantErrors: import(\"typescript\").Diagnostic[],\n  handbookOptions: { errors: number[] },\n  extension: string,\n  originalCode: string,\n  vfsRoot: string\n) {\n  const inErrsButNotFoundInTheHeader = relevantErrors.filter(e => !handbookOptions.errors.includes(e.code))\n  const errorsFound = Array.from(new Set(inErrsButNotFoundInTheHeader.map(e => e.code))).join(\" \")\n\n  if (inErrsButNotFoundInTheHeader.length) {\n    const errorsToShow = new Set(relevantErrors.map(e => e.code))\n    const codeToAdd = `// @errors: ${Array.from(errorsToShow).join(\" \")}`\n\n    const missing = handbookOptions.errors.length\n      ? `\\nThe existing annotation specified ${handbookOptions.errors.join(\" \")}`\n      : \"\\nExpected: \" + codeToAdd\n\n    // These get filled by below\n    const filesToErrors: Record<string, import(\"typescript\").Diagnostic[]> = {}\n    const noFiles: import(\"typescript\").Diagnostic[] = []\n\n    inErrsButNotFoundInTheHeader.forEach(d => {\n      const fileRef = d.file?.fileName && d.file.fileName.replace(vfsRoot, \"\")\n      if (!fileRef) noFiles.push(d)\n      else {\n        const existing = filesToErrors[fileRef]\n        if (existing) existing.push(d)\n        else filesToErrors[fileRef] = [d]\n      }\n    })\n\n    const showDiagnostics = (title: string, diags: import(\"typescript\").Diagnostic[]) => {\n      return (\n        `${title}\\n  ` +\n        diags\n          .map(e => {\n            const msg = typeof e.messageText === \"string\" ? e.messageText : e.messageText.messageText\n            return `[${e.code}] ${e.start} - ${msg}`\n          })\n          .join(\"\\n  \")\n      )\n    }\n\n    const innerDiags: string[] = []\n    if (noFiles.length) {\n      innerDiags.push(showDiagnostics(\"Ambient Errors\", noFiles))\n    }\n    Object.keys(filesToErrors).forEach(filepath => {\n      innerDiags.push(showDiagnostics(filepath, filesToErrors[filepath]))\n    })\n\n    const allMessages = innerDiags.join(\"\\n\\n\")\n\n    const newErr = new TwoslashError(\n      `Errors were thrown in the sample, but not included in an errors tag`,\n      `These errors were not marked as being expected: ${errorsFound}. ${missing}`,\n      `Compiler Errors:\\n\\n${allMessages}`\n    )\n\n    newErr.code = `## Code\\n\\n'''${extension}\\n${originalCode}\\n'''`\n    throw newErr\n  }\n}\n\n/** Mainly to warn myself, I've lost a good few minutes to this before */\nexport function validateInput(code: string) {\n  if (code.includes(\"// @errors \")) {\n    throw new TwoslashError(\n      `You have '// @errors ' (with a space)`,\n      `You want '// @errors: ' (with a colon)`,\n      `This is a pretty common typo`\n    )\n  }\n\n  if (code.includes(\"// @filename \")) {\n    throw new TwoslashError(\n      `You have '// @filename ' (with a space)`,\n      `You want '// @filename: ' (with a colon)`,\n      `This is a pretty common typo`\n    )\n  }\n}\n", "let hasLocalStorage = false\ntry {\n  hasLocalStorage = typeof localStorage !== `undefined`\n} catch (error) {}\nconst hasProcess = typeof process !== `undefined`\nconst shouldDebug = (hasLocalStorage && localStorage.getItem(\"DEBUG\")) || (hasProcess && process.env.DEBUG)\n\ntype LZ = typeof import(\"lz-string\")\ntype TS = typeof import(\"typescript\")\ntype CompilerOptions = import(\"typescript\").CompilerOptions\ntype CustomTransformers = import(\"typescript\").CustomTransformers\n\nimport { parsePrimitive, cleanMarkdownEscaped, typesToExtension, getIdentifierTextSpans, getClosestWord } from \"./utils\"\nimport { validateInput, validateCodeForErrors } from \"./validation\"\n\nimport { createSystem, createVirtualTypeScriptEnvironment, createFSBackedSystem } from \"@typescript/vfs\"\n\nconst log = shouldDebug ? console.log : (_message?: any, ..._optionalParams: any[]) => \"\"\n\n// Hacking in some internal stuff\ndeclare module \"typescript\" {\n  type Option = {\n    name: string\n    type: \"list\" | \"boolean\" | \"number\" | \"string\" | import(\"typescript\").Map<any>\n    element?: Option\n  }\n\n  const optionDeclarations: Array<Option>\n}\n\ntype QueryPosition = {\n  kind: \"query\" | \"completion\"\n  offset: number\n  text: string | undefined\n  docs: string | undefined\n  line: number\n}\n\ntype PartialQueryResults = {\n  kind: \"query\"\n  text: string\n  docs: string | undefined\n  line: number\n  offset: number\n  file: string\n}\n\ntype PartialCompletionResults = {\n  kind: \"completions\"\n  completions: import(\"typescript\").CompletionEntry[]\n  completionPrefix: string\n\n  line: number\n  offset: number\n  file: string\n}\n\ntype HighlightPosition = TwoSlashReturn[\"highlights\"][number]\n\nexport class TwoslashError extends Error {\n  public title: string\n  public description: string\n  public recommendation: string\n  public code: string | undefined\n\n  constructor(title: string, description: string, recommendation: string, code?: string | undefined) {\n    let message = `\n## ${title}\n\n${description}\n`\n    if (recommendation) {\n      message += `\\n${recommendation}`\n    }\n\n    if (code) {\n      message += `\\n${code}`\n    }\n\n    super(message)\n    this.title = title\n    this.description = description\n    this.recommendation = recommendation\n    this.code = code\n  }\n}\n\nfunction filterHighlightLines(codeLines: string[]): { highlights: HighlightPosition[]; queries: QueryPosition[] } {\n  const highlights: HighlightPosition[] = []\n  const queries: QueryPosition[] = []\n\n  let nextContentOffset = 0\n  let contentOffset = 0\n  let removedLines = 0\n\n  for (let i = 0; i < codeLines.length; i++) {\n    const line = codeLines[i]\n    const moveForward = () => {\n      contentOffset = nextContentOffset\n      nextContentOffset += line.length + 1\n    }\n\n    const stripLine = (logDesc: string) => {\n      log(`Removing line ${i} for ${logDesc}`)\n\n      removedLines++\n      codeLines.splice(i, 1)\n      i--\n    }\n\n    // We only need to run regexes over lines with comments\n    if (!line.includes(\"//\")) {\n      moveForward()\n    } else {\n      const highlightMatch = /^\\s*\\/\\/\\s*\\^+( .+)?$/.exec(line)\n      const queryMatch = /^\\s*\\/\\/\\s*\\^\\?\\s*$/.exec(line)\n      // https://regex101.com/r/2yDsRk/1\n      const removePrettierIgnoreMatch = /^\\s*\\/\\/ prettier-ignore$/.exec(line)\n      const completionsQuery = /^\\s*\\/\\/\\s*\\^\\|$/.exec(line)\n\n      if (queryMatch !== null) {\n        const start = line.indexOf(\"^\")\n        queries.push({ kind: \"query\", offset: start, text: undefined, docs: undefined, line: i + removedLines - 1 })\n        stripLine(\"having a query\")\n      } else if (highlightMatch !== null) {\n        const start = line.indexOf(\"^\")\n        const length = line.lastIndexOf(\"^\") - start + 1\n        const description = highlightMatch[1] ? highlightMatch[1].trim() : \"\"\n        highlights.push({\n          kind: \"highlight\",\n          offset: start + contentOffset,\n          length,\n          text: description,\n          line: i + removedLines - 1,\n          start,\n        })\n\n        stripLine(\"having a highlight\")\n      } else if (removePrettierIgnoreMatch !== null) {\n        stripLine(\"being a prettier ignore\")\n      } else if (completionsQuery !== null) {\n        const start = line.indexOf(\"^\")\n        // prettier-ignore\n        queries.push({ kind: \"completion\", offset: start, text: undefined, docs: undefined, line: i + removedLines - 1 })\n        stripLine(\"having a completion query\")\n      } else {\n        moveForward()\n      }\n    }\n  }\n  return { highlights, queries }\n}\n\nfunction getOptionValueFromMap(name: string, key: string, optMap: Map<string, string>) {\n  const result = optMap.get(key.toLowerCase())\n  log(`Get ${name} mapped option: ${key} => ${result}`)\n  if (result === undefined) {\n    const keys = Array.from(optMap.keys() as any)\n\n    throw new TwoslashError(\n      `Invalid inline compiler value`,\n      `Got ${key} for ${name} but it is not a supported value by the TS compiler.`,\n      `Allowed values: ${keys.join(\",\")}`\n    )\n  }\n  return result\n}\n\nfunction setOption(name: string, value: string, opts: CompilerOptions, ts: TS) {\n  log(`Setting ${name} to ${value}`)\n\n  for (const opt of ts.optionDeclarations) {\n    if (opt.name.toLowerCase() === name.toLowerCase()) {\n      switch (opt.type) {\n        case \"number\":\n        case \"string\":\n        case \"boolean\":\n          opts[opt.name] = parsePrimitive(value, opt.type)\n          break\n\n        case \"list\":\n          const elementType = opt.element!.type\n          const strings = value.split(\",\")\n          if (typeof elementType === \"string\") {\n            opts[opt.name] = strings.map(v => parsePrimitive(v, elementType))\n          } else {\n            opts[opt.name] = strings.map(v => getOptionValueFromMap(opt.name, v, elementType as Map<string, string>))\n          }\n          break\n\n        default:\n          // It's a map!\n          const optMap = opt.type as Map<string, string>\n          opts[opt.name] = getOptionValueFromMap(opt.name, value, optMap)\n          break\n      }\n      return\n    }\n  }\n\n  throw new TwoslashError(\n    `Invalid inline compiler flag`,\n    `There isn't a TypeScript compiler flag called '${name}'.`,\n    `This is likely a typo, you can check all the compiler flags in the TSConfig reference, or check the additional Twoslash flags in the npm page for @typescript/twoslash.`\n  )\n}\n\nconst booleanConfigRegexp = /^\\/\\/\\s?@(\\w+)$/\n\n// https://regex101.com/r/8B2Wwh/1\nconst valuedConfigRegexp = /^\\/\\/\\s?@(\\w+):\\s?(.+)$/\n\nfunction filterCompilerOptions(codeLines: string[], defaultCompilerOptions: CompilerOptions, ts: TS) {\n  const options = { ...defaultCompilerOptions }\n  for (let i = 0; i < codeLines.length; ) {\n    let match\n    if ((match = booleanConfigRegexp.exec(codeLines[i]))) {\n      options[match[1]] = true\n      setOption(match[1], \"true\", options, ts)\n    } else if ((match = valuedConfigRegexp.exec(codeLines[i]))) {\n      // Skip a filename tag, which should propagate through this stage\n      if (match[1] === \"filename\") {\n        i++\n        continue\n      }\n      setOption(match[1], match[2], options, ts)\n    } else {\n      i++\n      continue\n    }\n    codeLines.splice(i, 1)\n  }\n  return options\n}\n\nfunction filterCustomTags(codeLines: string[], customTags: string[]) {\n  const tags: TwoSlashReturn[\"tags\"] = []\n\n  for (let i = 0; i < codeLines.length; ) {\n    let match\n    if ((match = valuedConfigRegexp.exec(codeLines[i]))) {\n      if (customTags.includes(match[1])) {\n        tags.push({ name: match[1], line: i, annotation: codeLines[i].split(\"@\" + match[1] + \": \")[1] })\n        codeLines.splice(i, 1)\n      }\n    }\n    i++\n  }\n  return tags\n}\n\n/** Available inline flags which are not compiler flags */\nexport interface ExampleOptions {\n  /** Lets the sample suppress all error diagnostics */\n  noErrors: boolean\n  /** An array of TS error codes, which you write as space separated - this is so the tool can know about unexpected errors */\n  errors: number[]\n  /** Shows the JS equivalent of the TypeScript code instead */\n  showEmit: boolean\n  /**\n   * Must be used with showEmit, lets you choose the file to present instead of the source - defaults to index.js which\n   * means when you just use `showEmit` above it shows the transpiled JS.\n   */\n  showEmittedFile: string\n\n  /** Whether to disable the pre-cache of LSP calls for interesting identifiers, defaults to false */\n  noStaticSemanticInfo: boolean\n  /** Declare that the TypeScript program should edit the fsMap which is passed in, this is only useful for tool-makers, defaults to false */\n  emit: boolean\n  /** Declare that you don't need to validate that errors have corresponding annotations, defaults to false */\n  noErrorValidation: boolean\n}\n\n// Keys in this object are used to filter out handbook options\n// before compiler options are set.\n\nconst defaultHandbookOptions: Partial<ExampleOptions> = {\n  errors: [],\n  noErrors: false,\n  showEmit: false,\n  showEmittedFile: undefined,\n  noStaticSemanticInfo: false,\n  emit: false,\n  noErrorValidation: false,\n}\n\nfunction filterHandbookOptions(codeLines: string[]): ExampleOptions {\n  const options: any = { ...defaultHandbookOptions }\n  for (let i = 0; i < codeLines.length; i++) {\n    let match\n    if ((match = booleanConfigRegexp.exec(codeLines[i]))) {\n      if (match[1] in options) {\n        options[match[1]] = true\n        log(`Setting options.${match[1]} to true`)\n        codeLines.splice(i, 1)\n        i--\n      }\n    } else if ((match = valuedConfigRegexp.exec(codeLines[i]))) {\n      if (match[1] in options) {\n        options[match[1]] = match[2]\n        log(`Setting options.${match[1]} to ${match[2]}`)\n        codeLines.splice(i, 1)\n        i--\n      }\n    }\n  }\n\n  // Edge case the errors object to turn it into a string array\n  if (\"errors\" in options && typeof options.errors === \"string\") {\n    options.errors = options.errors.split(\" \").map(Number)\n    log(\"Setting options.error to \", options.errors)\n  }\n\n  return options\n}\n\nexport interface TwoSlashReturn {\n  /** The output code, could be TypeScript, but could also be a JS/JSON/d.ts */\n  code: string\n\n  /** The new extension type for the code, potentially changed if they've requested emitted results */\n  extension: string\n\n  /** Requests to highlight a particular part of the code */\n  highlights: {\n    kind: \"highlight\"\n    /** The index of the text in the file */\n    start: number\n    /** What line is the highlighted identifier on? */\n    line: number\n    /** At what index in the line does the caret represent  */\n    offset: number\n    /** The text of the token which is highlighted */\n    text?: string\n    /** The length of the token */\n    length: number\n  }[]\n\n  /** An array of LSP responses identifiers in the sample  */\n  staticQuickInfos: {\n    /** The string content of the node this represents (mainly for debugging) */\n    targetString: string\n    /** The base LSP response (the type) */\n    text: string\n    /** Attached JSDoc info */\n    docs: string | undefined\n    /** The index of the text in the file */\n    start: number\n    /** how long the identifier */\n    length: number\n    /** line number where this is found */\n    line: number\n    /** The character on the line */\n    character: number\n  }[]\n\n  /** Requests to use the LSP to get info for a particular symbol in the source */\n  queries: {\n    kind: \"query\" | \"completions\"\n    /** What line is the highlighted identifier on? */\n    line: number\n    /** At what index in the line does the caret represent  */\n    offset: number\n    /** The text of the token which is highlighted */\n    text?: string\n    /** Any attached JSDocs */\n    docs?: string | undefined\n    /** The token start which the query indicates  */\n    start: number\n    /** The length of the token */\n    length: number\n    /** Results for completions at a particular point */\n    completions?: import(\"typescript\").CompletionEntry[]\n    /* Completion prefix e.g. the letters before the cursor in the word so you can filter */\n    completionsPrefix?: string\n  }[]\n\n  /** The extracted twoslash commands for any custom tags passed in via customTags */\n  tags: {\n    /** What was the name of the tag */\n    name: string\n    /** Where was it located in the original source file */\n    line: number\n    /** What was the text after the `// @tag: ` string  (optional because you could do // @tag on it's own line without the ':') */\n    annotation?: string\n  }[]\n\n  /** Diagnostic error messages which came up when creating the program */\n  errors: {\n    renderedMessage: string\n    id: string\n    category: 0 | 1 | 2 | 3\n    code: number\n    start: number | undefined\n    length: number | undefined\n    line: number | undefined\n    character: number | undefined\n  }[]\n\n  /** The URL for this sample in the playground */\n  playgroundURL: string\n}\n\nexport interface TwoSlashOptions {\n  /** Allows setting any of the handbook options from outside the function, useful if you don't want LSP identifiers */\n  defaultOptions?: Partial<ExampleOptions>\n\n  /** Allows setting any of the compiler options from outside the function */\n  defaultCompilerOptions?: CompilerOptions\n\n  /** Allows applying custom transformers to the emit result, only useful with the showEmit output */\n  customTransformers?: CustomTransformers\n\n  /** An optional copy of the TypeScript import, if missing it will be require'd. */\n  tsModule?: TS\n\n  /** An optional copy of the lz-string import, if missing it will be require'd. */\n  lzstringModule?: LZ\n\n  /**\n   * An optional Map object which is passed into @typescript/vfs - if you are using twoslash on the\n   * web then you'll need this to set up your lib *.d.ts files. If missing, it will use your fs.\n   */\n  fsMap?: Map<string, string>\n\n  /** The cwd for the folder which the virtual fs should be overlaid on top of when using local fs, opts to process.cwd() if not present */\n  vfsRoot?: string\n\n  /** A set of known `// @[tags]` tags to extract and not treat as a comment */\n  customTags?: string[]\n}\n\n/**\n * Runs the checker against a TypeScript/JavaScript code sample returning potentially\n * difference code, and a set of annotations around how it works.\n *\n * @param code The twoslash markup'd code\n * @param extension For example: \"ts\", \"tsx\", \"typescript\", \"javascript\" or \"js\".\n * @param options Additional options for twoslash\n */\nexport function twoslasher(code: string, extension: string, options: TwoSlashOptions = {}): TwoSlashReturn {\n  const ts: TS = options.tsModule ?? require(\"typescript\")\n  const lzstring: LZ = options.lzstringModule ?? require(\"lz-string\")\n\n  const originalCode = code\n  const safeExtension = typesToExtension(extension)\n  const defaultFileName = \"index.\" + safeExtension\n\n  log(`\\n\\nLooking at code: \\n\\`\\`\\`${safeExtension}\\n${code}\\n\\`\\`\\`\\n`)\n\n  const defaultCompilerOptions = {\n    strict: true,\n    target: ts.ScriptTarget.ES2016,\n    allowJs: true,\n    ...(options.defaultCompilerOptions ?? {}),\n  }\n\n  validateInput(code)\n\n  code = cleanMarkdownEscaped(code)\n\n  // NOTE: codeLines is mutated by the below functions:\n  const codeLines = code.split(/\\r\\n?|\\n/g)\n\n  let tags: TwoSlashReturn[\"tags\"] = options.customTags ? filterCustomTags(codeLines, options.customTags) : []\n  const handbookOptions = { ...filterHandbookOptions(codeLines), ...options.defaultOptions }\n  const compilerOptions = filterCompilerOptions(codeLines, defaultCompilerOptions, ts)\n\n  // Handle special casing the lookup for when using jsx preserve which creates .jsx files\n  if (!handbookOptions.showEmittedFile) {\n    handbookOptions.showEmittedFile =\n      compilerOptions.jsx && compilerOptions.jsx === ts.JsxEmit.Preserve ? \"index.jsx\" : \"index.js\"\n  }\n\n  const getRoot = () => {\n    const pa = \"pa\"\n    const path = require(pa + \"th\") as typeof import(\"path\")\n    const rootPath = options.vfsRoot || process.cwd()\n    return rootPath.split(path.sep).join(path.posix.sep)\n  }\n\n  // In a browser we want to DI everything, in node we can use local infra\n  const useFS = !!options.fsMap\n  const vfs = useFS && options.fsMap ? options.fsMap : new Map<string, string>()\n  const system = useFS ? createSystem(vfs) : createFSBackedSystem(vfs, getRoot(), ts)\n  const fsRoot = useFS ? \"/\" : getRoot() + \"/\"\n\n  const env = createVirtualTypeScriptEnvironment(system, [], ts, compilerOptions, options.customTransformers)\n  const ls = env.languageService\n\n  code = codeLines.join(\"\\n\")\n\n  let partialQueries = [] as (PartialQueryResults | PartialCompletionResults)[]\n  let queries = [] as TwoSlashReturn[\"queries\"]\n  let highlights = [] as TwoSlashReturn[\"highlights\"]\n\n  const nameContent = splitTwoslashCodeInfoFiles(code, defaultFileName, fsRoot)\n  const sourceFiles = [\"js\", \"jsx\", \"ts\", \"tsx\"]\n\n  /** All of the referenced files in the markup */\n  const filenames = nameContent.map(nc => nc[0])\n\n  for (const file of nameContent) {\n    const [filename, codeLines] = file\n    const filetype = filename.split(\".\").pop() || \"\"\n\n    // Only run the LSP-y things on source files\n    const allowJSON = compilerOptions.resolveJsonModule && filetype === \"json\"\n    if (!sourceFiles.includes(filetype) && !allowJSON) {\n      continue\n    }\n\n    // Create the file in the vfs\n    const newFileCode = codeLines.join(\"\\n\")\n    env.createFile(filename, newFileCode)\n\n    const updates = filterHighlightLines(codeLines)\n    highlights = highlights.concat(updates.highlights)\n\n    // ------ Do the LSP lookup for the queries\n\n    const lspedQueries = updates.queries.map((q, i) => {\n      const sourceFile = env.getSourceFile(filename)!\n      const position = ts.getPositionOfLineAndCharacter(sourceFile, q.line, q.offset)\n      switch (q.kind) {\n        case \"query\": {\n          const quickInfo = ls.getQuickInfoAtPosition(filename, position)\n\n          // prettier-ignore\n          let text: string\n          let docs: string | undefined\n\n          if (quickInfo && quickInfo.displayParts) {\n            text = quickInfo.displayParts.map(dp => dp.text).join(\"\")\n            docs = quickInfo.documentation ? quickInfo.documentation.map(d => d.text).join(\"<br/>\") : undefined\n          } else {\n            throw new TwoslashError(\n              `Invalid QuickInfo query`,\n              `The request on line ${q.line} in ${filename} for quickinfo via ^? returned no from the compiler.`,\n              `This is likely that the x positioning is off.`\n            )\n          }\n\n          const queryResult: PartialQueryResults = {\n            kind: \"query\",\n            text,\n            docs,\n            line: q.line - i,\n            offset: q.offset,\n            file: filename,\n          }\n          return queryResult\n        }\n\n        case \"completion\": {\n          const completions = ls.getCompletionsAtPosition(filename, position - 1, {})\n          if (!completions && !handbookOptions.noErrorValidation) {\n            throw new TwoslashError(\n              `Invalid completion query`,\n              `The request on line ${q.line} in ${filename} for completions via ^| returned no completions from the compiler.`,\n              `This is likely that the positioning is off.`\n            )\n          }\n\n          const word = getClosestWord(sourceFile.text, position - 1)\n          const prefix = sourceFile.text.slice(word.startPos, position)\n          const lastDot = prefix.split(\".\").pop() || \"\"\n\n          const queryResult: PartialCompletionResults = {\n            kind: \"completions\",\n            completions: completions?.entries || [],\n            completionPrefix: lastDot,\n            line: q.line - i,\n            offset: q.offset,\n            file: filename,\n          }\n          return queryResult\n        }\n      }\n    })\n    partialQueries = partialQueries.concat(lspedQueries)\n\n    // Sets the file in the compiler as being without the comments\n    const newEditedFileCode = codeLines.join(\"\\n\")\n    env.updateFile(filename, newEditedFileCode)\n  }\n\n  // We need to also strip the highlights + queries from the main file which is shown to people\n  const allCodeLines = code.split(/\\r\\n?|\\n/g)\n  filterHighlightLines(allCodeLines)\n  code = allCodeLines.join(\"\\n\")\n\n  // Lets fs changes propagate back up to the fsMap\n  if (handbookOptions.emit) {\n    filenames.forEach(f => {\n      const filetype = f.split(\".\").pop() || \"\"\n      if (!sourceFiles.includes(filetype)) return\n\n      const output = ls.getEmitOutput(f)\n      output.outputFiles.forEach(output => {\n        system.writeFile(output.name, output.text)\n      })\n    })\n  }\n\n  // Code should now be safe to compile, so we're going to split it into different files\n  let errs: import(\"typescript\").Diagnostic[] = []\n  // Let because of a filter when cutting\n  let staticQuickInfos: TwoSlashReturn[\"staticQuickInfos\"] = []\n\n  // Iterate through the declared files and grab errors and LSP quickinfos\n  // const declaredFiles = Object.keys(fileMap)\n\n  filenames.forEach(file => {\n    const filetype = file.split(\".\").pop() || \"\"\n\n    // Only run the LSP-y things on source files\n    if (!sourceFiles.includes(filetype)) {\n      return\n    }\n\n    if (!handbookOptions.noErrors) {\n      errs = errs.concat(ls.getSemanticDiagnostics(file), ls.getSyntacticDiagnostics(file))\n    }\n\n    const source = env.sys.readFile(file)!\n    const sourceFile = env.getSourceFile(file)\n    if (!sourceFile) {\n      throw new TwoslashError(\n        `Could not find a  TypeScript sourcefile for '${file}' in the Twoslash vfs`,\n        `It's a little hard to provide useful advice on this error. Maybe you imported something which the compiler doesn't think is a source file?`,\n        ``\n      )\n    }\n\n    // Get all of the interesting quick info popover\n    if (!handbookOptions.showEmit) {\n      const fileContentStartIndexInModifiedFile = code.indexOf(source) == -1 ? 0 : code.indexOf(source)\n      const linesAbove = code.slice(0, fileContentStartIndexInModifiedFile).split(\"\\n\").length - 1\n\n      // Get all interesting identifiers in the file, so we can show hover info for it\n      const identifiers = handbookOptions.noStaticSemanticInfo ? [] : getIdentifierTextSpans(ts, sourceFile)\n      for (const identifier of identifiers) {\n        const span = identifier.span\n        const quickInfo = ls.getQuickInfoAtPosition(file, span.start)\n\n        if (quickInfo && quickInfo.displayParts) {\n          const text = quickInfo.displayParts.map(dp => dp.text).join(\"\")\n          const targetString = identifier.text\n          const docs = quickInfo.documentation ? quickInfo.documentation.map(d => d.text).join(\"\\n\") : undefined\n\n          // Get the position of the\n          const position = span.start + fileContentStartIndexInModifiedFile\n          // Use TypeScript to pull out line/char from the original code at the position + any previous offset\n          const burnerSourceFile = ts.createSourceFile(\"_.ts\", code, ts.ScriptTarget.ES2015)\n          const { line, character } = ts.getLineAndCharacterOfPosition(burnerSourceFile, position)\n\n          staticQuickInfos.push({ text, docs, start: position, length: span.length, line, character, targetString })\n        }\n      }\n\n      // Offset the queries for this file because they are based on the line for that one\n      // specific file, and not the global twoslash document. This has to be done here because\n      // in the above loops, the code for queries/highlights/etc hasn't been stripped yet.\n      partialQueries\n        .filter((q: any) => q.file === file)\n        .forEach(q => {\n          const pos =\n            ts.getPositionOfLineAndCharacter(sourceFile, q.line, q.offset) + fileContentStartIndexInModifiedFile\n\n          switch (q.kind) {\n            case \"query\": {\n              queries.push({\n                docs: q.docs,\n                kind: \"query\",\n                start: pos + fileContentStartIndexInModifiedFile,\n                length: q.text.length,\n                text: q.text,\n                offset: q.offset,\n                line: q.line + linesAbove + 1,\n              })\n              break\n            }\n            case \"completions\": {\n              queries.push({\n                completions: q.completions,\n                kind: \"completions\",\n                start: pos + fileContentStartIndexInModifiedFile,\n                completionsPrefix: q.completionPrefix,\n                length: 1,\n                offset: q.offset,\n                line: q.line + linesAbove + 1,\n              })\n            }\n          }\n        })\n    }\n  })\n\n  const relevantErrors = errs.filter(e => e.file && filenames.includes(e.file.fileName))\n\n  // A validator that error codes are mentioned, so we can know if something has broken in the future\n  if (!handbookOptions.noErrorValidation && relevantErrors.length) {\n    validateCodeForErrors(relevantErrors, handbookOptions, extension, originalCode, fsRoot)\n  }\n\n  let errors: TwoSlashReturn[\"errors\"] = []\n\n  // We can't pass the ts.DiagnosticResult out directly (it can't be JSON.stringified)\n  for (const err of relevantErrors) {\n    const codeWhereErrorLives = env.sys.readFile(err.file!.fileName)!\n    const fileContentStartIndexInModifiedFile = code.indexOf(codeWhereErrorLives)\n    const renderedMessage = ts.flattenDiagnosticMessageText(err.messageText, \"\\n\")\n    const id = `err-${err.code}-${err.start}-${err.length}`\n    const { line, character } = ts.getLineAndCharacterOfPosition(err.file!, err.start!)\n\n    errors.push({\n      category: err.category,\n      code: err.code,\n      length: err.length,\n      start: err.start ? err.start + fileContentStartIndexInModifiedFile : undefined,\n      line,\n      character,\n      renderedMessage,\n      id,\n    })\n  }\n\n  // Handle emitting files\n  if (handbookOptions.showEmit) {\n    // Get the file which created the file we want to show:\n    const emitFilename = handbookOptions.showEmittedFile || defaultFileName\n    const emitSourceFilename =\n      fsRoot + emitFilename.replace(\".jsx\", \"\").replace(\".js\", \"\").replace(\".d.ts\", \"\").replace(\".map\", \"\")\n\n    let emitSource = filenames.find(f => f === emitSourceFilename + \".ts\" || f === emitSourceFilename + \".tsx\")\n\n    if (!emitSource && !compilerOptions.outFile) {\n      const allFiles = filenames.join(\", \")\n      // prettier-ignore\n      throw new TwoslashError(\n        `Could not find source file to show the emit for`,\n        `Cannot find the corresponding **source** file  ${emitFilename} for completions via ^| returned no quickinfo from the compiler.`,\n        `Looked for: ${emitSourceFilename} in the vfs - which contains: ${allFiles}`\n      )\n    }\n\n    // Allow outfile, in which case you need any file.\n    if (compilerOptions.outFile) {\n      emitSource = filenames[0]\n    }\n\n    const output = ls.getEmitOutput(emitSource!)\n    const file = output.outputFiles.find(\n      o => o.name === fsRoot + handbookOptions.showEmittedFile || o.name === handbookOptions.showEmittedFile\n    )\n\n    if (!file) {\n      const allFiles = output.outputFiles.map(o => o.name).join(\", \")\n      throw new TwoslashError(\n        `Cannot find the output file in the Twoslash VFS`,\n        `Looking for ${handbookOptions.showEmittedFile} in the Twoslash vfs after compiling`,\n        `Looked for\" ${fsRoot + handbookOptions.showEmittedFile} in the vfs - which contains ${allFiles}.`\n      )\n    }\n\n    code = file.text\n    extension = file.name.split(\".\").pop()!\n\n    // Remove highlights and queries, because it won't work across transpiles,\n    // though I guess source-mapping could handle the transition\n    highlights = []\n    partialQueries = []\n    staticQuickInfos = []\n  }\n\n  const zippedCode = lzstring.compressToEncodedURIComponent(originalCode)\n  const playgroundURL = `https://www.typescriptlang.org/play/#code/${zippedCode}`\n\n  // Cutting happens last, and it means editing the lines and character index of all\n  // the type annotations which are attached to a location\n\n  const cutString = \"// ---cut---\\n\"\n  if (code.includes(cutString)) {\n    // Get the place it is, then find the end and the start of the next line\n    const cutIndex = code.indexOf(cutString) + cutString.length\n    const lineOffset = code.substr(0, cutIndex).split(\"\\n\").length - 1\n\n    // Kills the code shown\n    code = code.split(cutString).pop()!\n\n    // For any type of metadata shipped, it will need to be shifted to\n    // fit in with the new positions after the cut\n    staticQuickInfos.forEach(info => {\n      info.start -= cutIndex\n      info.line -= lineOffset\n    })\n    staticQuickInfos = staticQuickInfos.filter(s => s.start > -1)\n\n    errors.forEach(err => {\n      if (err.start) err.start -= cutIndex\n      if (err.line) err.line -= lineOffset\n    })\n    errors = errors.filter(e => e.start && e.start > -1)\n\n    highlights.forEach(highlight => {\n      highlight.start -= cutIndex\n      highlight.line -= lineOffset\n    })\n\n    highlights = highlights.filter(e => e.start > -1)\n\n    queries.forEach(q => (q.line -= lineOffset))\n    queries = queries.filter(q => q.line > -1)\n\n    tags.forEach(q => (q.line -= lineOffset))\n    tags = tags.filter(q => q.line > -1)\n  }\n\n  const cutAfterString = \"// ---cut-after---\\n\"\n\n  if (code.includes(cutAfterString)) {\n    \n    // Get the place it is, then find the end and the start of the next line\n    const cutIndex = code.indexOf(cutAfterString) + cutAfterString.length\n    const lineOffset = code.substr(0, cutIndex).split(\"\\n\").length - 1\n\n    // Kills the code shown, removing any whitespace on the end\n    code = code.split(cutAfterString).shift()!.trimEnd()\n    \n    // Cut any metadata after the cutAfterString\n    staticQuickInfos = staticQuickInfos.filter(s => s.line < lineOffset)\n    errors = errors.filter(e => e.line && e.line < lineOffset)\n    highlights = highlights.filter(e => e.line < lineOffset)\n    queries = queries.filter(q => q.line < lineOffset)\n    tags = tags.filter(q => q.line < lineOffset)\n  }\n\n  return {\n    code,\n    extension,\n    highlights,\n    queries,\n    staticQuickInfos,\n    errors,\n    playgroundURL,\n    tags,\n  }\n}\n\nconst splitTwoslashCodeInfoFiles = (code: string, defaultFileName: string, root: string) => {\n  const lines = code.split(/\\r\\n?|\\n/g)\n\n  let nameForFile = code.includes(`@filename: ${defaultFileName}`) ? \"global.ts\" : defaultFileName\n  let currentFileContent: string[] = []\n  const fileMap: Array<[string, string[]]> = []\n\n  for (const line of lines) {\n    if (line.includes(\"// @filename: \")) {\n      fileMap.push([root + nameForFile, currentFileContent])\n      nameForFile = line.split(\"// @filename: \")[1].trim()\n      currentFileContent = []\n    } else {\n      currentFileContent.push(line)\n    }\n  }\n  fileMap.push([root + nameForFile, currentFileContent])\n\n  // Basically, strip these:\n  // [\"index.ts\", []]\n  // [\"index.ts\", [\"\"]]\n  const nameContent = fileMap.filter(n => n[1].length > 0 && (n[1].length > 1 || n[1][0] !== \"\"))\n  return nameContent\n}\n", "export type Token = string | number | boolean\n\nexport const isQuoted = (s: string) => {\n  const first = s[0]\n  const last = s[s.length - 1]\n\n  return s.length > 1 && first === last && (first === '\"' || last === \"'\")\n}\n\nexport class Iterator<T extends string | Array<Token>> {\n  protected error(err: string) {\n    throw new Error(`Fenceparser: ${err}.`)\n  }\n\n  protected start = 0\n  protected current = 0\n\n  protected peek(n?: number): T[number] {\n    return this.input[this.current + (n ?? 0)]\n  }\n\n  protected advance(): T[number] {\n    return this.input[this.current++]\n  }\n\n  protected isAtEnd() {\n    return this.current >= this.input.length\n  }\n\n  public constructor(protected readonly input: T) {}\n}\n", "import {Iterator, Token} from './utils'\n\nexport const lex = (input: string) => new Lexer(input).scan()\n\nconst KEYWORDS: Record<string, Token> = {\n  true: true,\n  false: false\n}\n\nconst isAlpha = (s: string) => /[a-zA-Z_$-]/.test(s)\nconst isNumeric = (s: string) => /[0-9]/.test(s)\nconst isAlphaNumeric = (s: string) => isAlpha(s) || isNumeric(s)\n\nclass Lexer extends Iterator<string> {\n  private output: Array<Token> = []\n\n  private string(quote: string) {\n    while (this.peek() !== quote && !this.isAtEnd()) this.advance()\n\n    if (this.isAtEnd()) {\n      this.error('Unterminated string')\n    }\n\n    this.advance()\n    this.output.push(this.input.substring(this.start, this.current))\n  }\n\n  private number() {\n    while (isNumeric(this.peek()) && !this.isAtEnd()) this.advance()\n\n    if (this.peek() === '-' && isNumeric(this.peek(1))) {\n      this.advance()\n      while (isNumeric(this.peek())) this.advance()\n      this.output.push(this.input.substring(this.start, this.current))\n      return\n    } else if (this.peek() === '.' && isNumeric(this.peek(1))) {\n      this.advance()\n      while (isNumeric(this.peek())) this.advance()\n    }\n\n    this.output.push(parseFloat(this.input.substring(this.start, this.current)))\n  }\n\n  private identifier() {\n    while (isAlphaNumeric(this.peek()) && !this.isAtEnd()) this.advance()\n\n    const text = this.input.substring(this.start, this.current)\n    if (Object.keys(KEYWORDS).includes(text)) {\n      this.output.push(KEYWORDS[text])\n    } else {\n      this.output.push(text)\n    }\n  }\n\n  public scan() {\n    while (!this.isAtEnd()) {\n      this.start = this.current\n\n      const next = this.advance()\n      switch (next) {\n        case '{':\n        case '}':\n        case '=':\n        case ',':\n        case ':':\n        case '[':\n        case ']':\n          this.output.push(next)\n          break\n        case '\"':\n        case \"'\":\n          this.string(next)\n          break\n        case ' ':\n        case '\\r':\n        case '\\t':\n        case '\\n':\n          break\n        default:\n          if (isNumeric(next)) {\n            this.number()\n          } else if (isAlpha(next)) {\n            this.identifier()\n          } else {\n            this.error(`Unexpected character ${next}`)\n          }\n      }\n    }\n\n    return this.output\n  }\n}\n", "import {isQuoted, Iterator, Token} from './utils'\n\n// Grammar - Recursive Descent\n//\n// MAIN â†’ EXPR*\n// EXPR â†’ OBJECT | IDENTIFIER (= VALUE)?\n//\n// OBJECT â†’ { OBJECT_VALUES? }\n// OBJECT_VALUES â†’ OBJECT_VALUE (, OBJECT_VALUE)*\n// OBJECT_VALUE â†’ NUMBER | IDENTIFIER | (IDENTIFIER | STRING | NUMBER): VALUE\n//\n// ARRAY â†’ [ ARRAY_VALUES? ]\n// ARRAY_VALUES â†’ (ARRAY_VALUE) (ARRAY_VALUE)*\n// ARRAY_VALUE â†’ VALUE\n//\n// VALUE â†’ IDENTIFIER | OBJECT | ARRAY | (\"|') STRING (\"|') | BOOLEAN | NUMBER\n// IDENTIFIER â†’ STRING\n\nexport type OBJECT = {[key in string | number]: VALUE}\nexport type VALUE = OBJECT | Array<VALUE> | string | boolean | number\n\nexport const parse = (input: Array<Token>) => new Parser(input).parse()\n\nclass Parser extends Iterator<Array<Token>> {\n  private output: Record<string, VALUE> = {}\n\n  private object() {\n    const result: OBJECT = {}\n    const parseValue = () => {\n      let identifier = this.advance()\n\n      if (typeof identifier === 'number') {\n        identifier = identifier as number\n      } else if (typeof identifier === 'string' && isQuoted(identifier)) {\n        identifier = identifier.slice(1, -1)\n      }\n      identifier = identifier as string\n\n      if (this.peek() === ':') {\n        this.advance()\n        result[identifier] = this.value()\n      } else {\n        result[identifier] = true\n      }\n    }\n\n    this.advance()\n    if (this.peek() !== '}') {\n      parseValue()\n      while (this.peek() === ',') {\n        this.advance()\n        if (this.peek() === '}') {\n          this.error('Trailing comma')\n        }\n        parseValue()\n      }\n    }\n\n    if (this.advance() !== '}') {\n      this.error('Unterminated object')\n    }\n    return result\n  }\n\n  private array() {\n    const result: Array<VALUE> = []\n\n    this.advance()\n    if (this.peek() !== ']') {\n      result.push(this.value())\n      while (this.peek() === ',') {\n        this.advance()\n        if (this.peek() === ']') {\n          this.error('Trailing comma')\n        }\n        result.push(this.value())\n      }\n    }\n    if (this.advance() !== ']') {\n      this.error('Unterminated array')\n    }\n    return result\n  }\n\n  private value(): VALUE {\n    if (this.peek() === '{') {\n      return this.object()\n    } else if (this.peek() === '[') {\n      return this.array()\n    } else if (\n      typeof this.peek() === 'string' &&\n      isQuoted(this.peek() as string)\n    ) {\n      return (this.advance() as string).slice(1, -1)\n    } else {\n      return this.advance()\n    }\n  }\n\n  public parse() {\n    if (this.input.length < 1) {\n      return null\n    }\n\n    while (!this.isAtEnd()) {\n      const peeked = this.peek()\n\n      if (peeked === '{') {\n        if (!this.output.highlight) {\n          this.output.highlight = {}\n        }\n\n        this.output.highlight = {\n          ...(this.output.highlight as OBJECT),\n          ...this.object()\n        }\n      } else {\n        const identifier = this.advance() as string\n\n        if (this.peek() === '=') {\n          this.advance()\n          this.output[identifier] = this.value()\n        } else {\n          this.output[identifier] = true\n        }\n      }\n    }\n\n    return this.output\n  }\n}\n", "import {lex} from './Lexer'\nimport {parse} from './Parser'\n\nexport {lex, parse}\nexport default (input: string) => parse(lex(input))\n", "import { loadWASM, createOnigScanner, createOnigString } from 'vscode-oniguruma';\nimport { INITIAL, Registry as Registry$1 } from 'vscode-textmate';\n\nconst themes = [\r\n    'css-variables',\r\n    'dark-plus',\r\n    'dracula-soft',\r\n    'dracula',\r\n    'github-dark-dimmed',\r\n    'github-dark',\r\n    'github-light',\r\n    'light-plus',\r\n    'material-darker',\r\n    'material-default',\r\n    'material-lighter',\r\n    'material-ocean',\r\n    'material-palenight',\r\n    'min-dark',\r\n    'min-light',\r\n    'monokai',\r\n    'nord',\r\n    'one-dark-pro',\r\n    'poimandres',\r\n    'rose-pine-dawn',\r\n    'rose-pine-moon',\r\n    'rose-pine',\r\n    'slack-dark',\r\n    'slack-ochin',\r\n    'solarized-dark',\r\n    'solarized-light',\r\n    'vitesse-dark',\r\n    'vitesse-light'\r\n];\n\nconst languages = [\r\n    {\r\n        id: 'abap',\r\n        scopeName: 'source.abap',\r\n        path: 'abap.tmLanguage.json',\r\n        samplePath: 'abap.sample'\r\n    },\r\n    {\r\n        id: 'actionscript-3',\r\n        scopeName: 'source.actionscript.3',\r\n        path: 'actionscript-3.tmLanguage.json',\r\n        samplePath: 'actionscript-3.sample'\r\n    },\r\n    {\r\n        id: 'ada',\r\n        scopeName: 'source.ada',\r\n        path: 'ada.tmLanguage.json',\r\n        samplePath: 'ada.sample'\r\n    },\r\n    {\r\n        id: 'apache',\r\n        scopeName: 'source.apacheconf',\r\n        path: 'apache.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'apex',\r\n        scopeName: 'source.apex',\r\n        path: 'apex.tmLanguage.json',\r\n        samplePath: 'apex.sample'\r\n    },\r\n    {\r\n        id: 'apl',\r\n        scopeName: 'source.apl',\r\n        path: 'apl.tmLanguage.json',\r\n        embeddedLangs: ['html', 'xml', 'css', 'javascript', 'json']\r\n    },\r\n    {\r\n        id: 'applescript',\r\n        scopeName: 'source.applescript',\r\n        path: 'applescript.tmLanguage.json',\r\n        samplePath: 'applescript.sample'\r\n    },\r\n    {\r\n        id: 'asm',\r\n        scopeName: 'source.asm.x86_64',\r\n        path: 'asm.tmLanguage.json',\r\n        samplePath: 'asm.sample'\r\n    },\r\n    {\r\n        id: 'astro',\r\n        scopeName: 'text.html.astro',\r\n        path: 'astro.tmLanguage.json',\r\n        samplePath: 'astro.sample',\r\n        embeddedLangs: ['css', 'javascript', 'less', 'sass', 'scss', 'stylus', 'typescript', 'tsx']\r\n    },\r\n    {\r\n        id: 'awk',\r\n        scopeName: 'source.awk',\r\n        path: 'awk.tmLanguage.json',\r\n        samplePath: 'awk.sample'\r\n    },\r\n    {\r\n        id: 'ballerina',\r\n        scopeName: 'source.ballerina',\r\n        path: 'ballerina.tmLanguage.json',\r\n        samplePath: 'ballerina.sample'\r\n    },\r\n    {\r\n        id: 'bat',\r\n        scopeName: 'source.batchfile',\r\n        path: 'bat.tmLanguage.json',\r\n        samplePath: 'bat.sample',\r\n        aliases: ['batch']\r\n    },\r\n    {\r\n        id: 'berry',\r\n        scopeName: 'source.berry',\r\n        path: 'berry.tmLanguage.json',\r\n        samplePath: 'berry.sample',\r\n        aliases: ['be']\r\n    },\r\n    {\r\n        id: 'bibtex',\r\n        scopeName: 'text.bibtex',\r\n        path: 'bibtex.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'bicep',\r\n        scopeName: 'source.bicep',\r\n        path: 'bicep.tmLanguage.json',\r\n        samplePath: 'bicep.sample'\r\n    },\r\n    {\r\n        id: 'c',\r\n        scopeName: 'source.c',\r\n        path: 'c.tmLanguage.json',\r\n        samplePath: 'c.sample'\r\n    },\r\n    {\r\n        id: 'clojure',\r\n        scopeName: 'source.clojure',\r\n        path: 'clojure.tmLanguage.json',\r\n        samplePath: 'clojure.sample',\r\n        aliases: ['clj']\r\n    },\r\n    {\r\n        id: 'cobol',\r\n        scopeName: 'source.cobol',\r\n        path: 'cobol.tmLanguage.json',\r\n        samplePath: 'cobol.sample',\r\n        embeddedLangs: ['sql', 'html', 'java']\r\n    },\r\n    {\r\n        id: 'codeql',\r\n        scopeName: 'source.ql',\r\n        path: 'codeql.tmLanguage.json',\r\n        samplePath: 'codeql.sample',\r\n        aliases: ['ql']\r\n    },\r\n    {\r\n        id: 'coffee',\r\n        scopeName: 'source.coffee',\r\n        path: 'coffee.tmLanguage.json',\r\n        samplePath: 'coffee.sample',\r\n        embeddedLangs: ['javascript']\r\n    },\r\n    {\r\n        id: 'cpp',\r\n        scopeName: 'source.cpp',\r\n        path: 'cpp.tmLanguage.json',\r\n        samplePath: 'cpp.sample',\r\n        embeddedLangs: ['sql']\r\n    },\r\n    {\r\n        id: 'crystal',\r\n        scopeName: 'source.crystal',\r\n        path: 'crystal.tmLanguage.json',\r\n        samplePath: 'crystal.sample',\r\n        embeddedLangs: ['html', 'sql', 'css', 'c', 'javascript', 'shellscript']\r\n    },\r\n    {\r\n        id: 'csharp',\r\n        scopeName: 'source.cs',\r\n        path: 'csharp.tmLanguage.json',\r\n        samplePath: 'csharp.sample',\r\n        aliases: ['c#']\r\n    },\r\n    {\r\n        id: 'css',\r\n        scopeName: 'source.css',\r\n        path: 'css.tmLanguage.json',\r\n        samplePath: 'css.sample'\r\n    },\r\n    {\r\n        id: 'cue',\r\n        scopeName: 'source.cue',\r\n        path: 'cue.tmLanguage.json',\r\n        samplePath: 'cue.sample'\r\n    },\r\n    {\r\n        id: 'd',\r\n        scopeName: 'source.d',\r\n        path: 'd.tmLanguage.json',\r\n        samplePath: 'd.sample'\r\n    },\r\n    {\r\n        id: 'dart',\r\n        scopeName: 'source.dart',\r\n        path: 'dart.tmLanguage.json',\r\n        samplePath: 'dart.sample'\r\n    },\r\n    {\r\n        id: 'diff',\r\n        scopeName: 'source.diff',\r\n        path: 'diff.tmLanguage.json',\r\n        samplePath: 'diff.sample'\r\n    },\r\n    {\r\n        id: 'docker',\r\n        scopeName: 'source.dockerfile',\r\n        path: 'docker.tmLanguage.json',\r\n        samplePath: 'docker.sample'\r\n    },\r\n    {\r\n        id: 'dream-maker',\r\n        scopeName: 'source.dm',\r\n        path: 'dream-maker.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'elixir',\r\n        scopeName: 'source.elixir',\r\n        path: 'elixir.tmLanguage.json',\r\n        samplePath: 'elixir.sample',\r\n        embeddedLangs: ['html']\r\n    },\r\n    {\r\n        id: 'elm',\r\n        scopeName: 'source.elm',\r\n        path: 'elm.tmLanguage.json',\r\n        samplePath: 'elm.sample'\r\n    },\r\n    {\r\n        id: 'erb',\r\n        scopeName: 'text.html.erb',\r\n        path: 'erb.tmLanguage.json',\r\n        samplePath: 'erb.sample',\r\n        embeddedLangs: ['html', 'ruby']\r\n    },\r\n    {\r\n        id: 'erlang',\r\n        scopeName: 'source.erlang',\r\n        path: 'erlang.tmLanguage.json',\r\n        samplePath: 'erlang.sample'\r\n    },\r\n    {\r\n        id: 'fish',\r\n        scopeName: 'source.fish',\r\n        path: 'fish.tmLanguage.json',\r\n        samplePath: 'fish.sample'\r\n    },\r\n    {\r\n        id: 'fsharp',\r\n        scopeName: 'source.fsharp',\r\n        path: 'fsharp.tmLanguage.json',\r\n        samplePath: 'fsharp.sample',\r\n        aliases: ['f#'],\r\n        embeddedLangs: ['markdown']\r\n    },\r\n    {\r\n        id: 'gherkin',\r\n        scopeName: 'text.gherkin.feature',\r\n        path: 'gherkin.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'git-commit',\r\n        scopeName: 'text.git-commit',\r\n        path: 'git-commit.tmLanguage.json',\r\n        embeddedLangs: ['diff']\r\n    },\r\n    {\r\n        id: 'git-rebase',\r\n        scopeName: 'text.git-rebase',\r\n        path: 'git-rebase.tmLanguage.json',\r\n        embeddedLangs: ['shellscript']\r\n    },\r\n    {\r\n        id: 'gnuplot',\r\n        scopeName: 'source.gnuplot',\r\n        path: 'gnuplot.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'go',\r\n        scopeName: 'source.go',\r\n        path: 'go.tmLanguage.json',\r\n        samplePath: 'go.sample'\r\n    },\r\n    {\r\n        id: 'graphql',\r\n        scopeName: 'source.graphql',\r\n        path: 'graphql.tmLanguage.json',\r\n        embeddedLangs: ['javascript', 'typescript', 'jsx', 'tsx']\r\n    },\r\n    {\r\n        id: 'groovy',\r\n        scopeName: 'source.groovy',\r\n        path: 'groovy.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'hack',\r\n        scopeName: 'source.hack',\r\n        path: 'hack.tmLanguage.json',\r\n        embeddedLangs: ['html', 'sql']\r\n    },\r\n    {\r\n        id: 'haml',\r\n        scopeName: 'text.haml',\r\n        path: 'haml.tmLanguage.json',\r\n        embeddedLangs: ['ruby', 'javascript', 'sass', 'coffee', 'markdown', 'css']\r\n    },\r\n    {\r\n        id: 'handlebars',\r\n        scopeName: 'text.html.handlebars',\r\n        path: 'handlebars.tmLanguage.json',\r\n        aliases: ['hbs'],\r\n        embeddedLangs: ['html', 'css', 'javascript', 'yaml']\r\n    },\r\n    {\r\n        id: 'haskell',\r\n        scopeName: 'source.haskell',\r\n        path: 'haskell.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'hcl',\r\n        scopeName: 'source.hcl',\r\n        path: 'hcl.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'hlsl',\r\n        scopeName: 'source.hlsl',\r\n        path: 'hlsl.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'html',\r\n        scopeName: 'text.html.basic',\r\n        path: 'html.tmLanguage.json',\r\n        samplePath: 'html.sample',\r\n        embeddedLangs: ['javascript', 'css']\r\n    },\r\n    {\r\n        id: 'ini',\r\n        scopeName: 'source.ini',\r\n        path: 'ini.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'java',\r\n        scopeName: 'source.java',\r\n        path: 'java.tmLanguage.json',\r\n        samplePath: 'java.sample'\r\n    },\r\n    {\r\n        id: 'javascript',\r\n        scopeName: 'source.js',\r\n        path: 'javascript.tmLanguage.json',\r\n        samplePath: 'javascript.sample',\r\n        aliases: ['js']\r\n    },\r\n    {\r\n        id: 'jinja-html',\r\n        scopeName: 'text.html.jinja',\r\n        path: 'jinja-html.tmLanguage.json',\r\n        embeddedLangs: ['html']\r\n    },\r\n    {\r\n        id: 'json',\r\n        scopeName: 'source.json',\r\n        path: 'json.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'jsonc',\r\n        scopeName: 'source.json.comments',\r\n        path: 'jsonc.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'jsonnet',\r\n        scopeName: 'source.jsonnet',\r\n        path: 'jsonnet.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'jssm',\r\n        scopeName: 'source.jssm',\r\n        path: 'jssm.tmLanguage.json',\r\n        samplePath: 'jssm.sample',\r\n        aliases: ['fsl']\r\n    },\r\n    {\r\n        id: 'jsx',\r\n        scopeName: 'source.js.jsx',\r\n        path: 'jsx.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'julia',\r\n        scopeName: 'source.julia',\r\n        path: 'julia.tmLanguage.json',\r\n        embeddedLangs: ['cpp', 'python', 'javascript', 'r', 'sql']\r\n    },\r\n    {\r\n        id: 'jupyter',\r\n        scopeName: 'source.jupyter',\r\n        path: 'jupyter.tmLanguage.json',\r\n        embeddedLangs: ['json']\r\n    },\r\n    {\r\n        id: 'kotlin',\r\n        scopeName: 'source.kotlin',\r\n        path: 'kotlin.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'latex',\r\n        scopeName: 'text.tex.latex',\r\n        path: 'latex.tmLanguage.json',\r\n        embeddedLangs: ['tex', 'css', 'html', 'java', 'javascript', 'typescript', 'lua', 'python', 'julia', 'ruby', 'xml', 'yaml', 'cpp', 'haskell', 'scala', 'gnuplot']\r\n    },\r\n    {\r\n        id: 'less',\r\n        scopeName: 'source.css.less',\r\n        path: 'less.tmLanguage.json',\r\n        embeddedLangs: ['css']\r\n    },\r\n    {\r\n        id: 'lisp',\r\n        scopeName: 'source.lisp',\r\n        path: 'lisp.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'logo',\r\n        scopeName: 'source.logo',\r\n        path: 'logo.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'lua',\r\n        scopeName: 'source.lua',\r\n        path: 'lua.tmLanguage.json',\r\n        embeddedLangs: ['c']\r\n    },\r\n    {\r\n        id: 'make',\r\n        scopeName: 'source.makefile',\r\n        path: 'make.tmLanguage.json',\r\n        aliases: ['makefile']\r\n    },\r\n    {\r\n        id: 'markdown',\r\n        scopeName: 'text.html.markdown',\r\n        path: 'markdown.tmLanguage.json',\r\n        aliases: ['md'],\r\n        embeddedLangs: ['css', 'html', 'ini', 'java', 'lua', 'make', 'perl', 'r', 'ruby', 'php', 'sql', 'vb', 'xml', 'xsl', 'yaml', 'bat', 'clojure', 'coffee', 'c', 'cpp', 'diff', 'docker', 'git-commit', 'git-rebase', 'go', 'groovy', 'pug', 'javascript', 'json', 'jsonc', 'less', 'objective-c', 'swift', 'scss', 'raku', 'powershell', 'python', 'rust', 'scala', 'shellscript', 'typescript', 'tsx', 'csharp', 'fsharp', 'dart', 'handlebars', 'erlang', 'elixir', 'latex', 'bibtex']\r\n    },\r\n    {\r\n        id: 'marko',\r\n        scopeName: 'text.marko',\r\n        path: 'marko.tmLanguage.json',\r\n        samplePath: 'marko.sample',\r\n        embeddedLangs: ['css', 'less', 'scss', 'javascript']\r\n    },\r\n    {\r\n        id: 'matlab',\r\n        scopeName: 'source.matlab',\r\n        path: 'matlab.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'mdx',\r\n        scopeName: 'text.html.markdown.jsx',\r\n        path: 'mdx.tmLanguage.json',\r\n        embeddedLangs: ['jsx', 'markdown']\r\n    },\r\n    {\r\n        id: 'nginx',\r\n        scopeName: 'source.nginx',\r\n        path: 'nginx.tmLanguage.json',\r\n        embeddedLangs: ['lua']\r\n    },\r\n    {\r\n        id: 'nim',\r\n        scopeName: 'source.nim',\r\n        path: 'nim.tmLanguage.json',\r\n        embeddedLangs: ['c', 'html', 'xml', 'javascript', 'css', 'markdown']\r\n    },\r\n    {\r\n        id: 'nix',\r\n        scopeName: 'source.nix',\r\n        path: 'nix.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'objective-c',\r\n        scopeName: 'source.objc',\r\n        path: 'objective-c.tmLanguage.json',\r\n        aliases: ['objc']\r\n    },\r\n    {\r\n        id: 'objective-cpp',\r\n        scopeName: 'source.objcpp',\r\n        path: 'objective-cpp.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'ocaml',\r\n        scopeName: 'source.ocaml',\r\n        path: 'ocaml.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'pascal',\r\n        scopeName: 'source.pascal',\r\n        path: 'pascal.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'perl',\r\n        scopeName: 'source.perl',\r\n        path: 'perl.tmLanguage.json',\r\n        embeddedLangs: ['html', 'xml', 'css', 'javascript', 'sql']\r\n    },\r\n    {\r\n        id: 'php',\r\n        scopeName: 'source.php',\r\n        path: 'php.tmLanguage.json',\r\n        embeddedLangs: ['html', 'xml', 'sql', 'javascript', 'json', 'css']\r\n    },\r\n    {\r\n        id: 'plsql',\r\n        scopeName: 'source.plsql.oracle',\r\n        path: 'plsql.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'postcss',\r\n        scopeName: 'source.css.postcss',\r\n        path: 'postcss.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'powershell',\r\n        scopeName: 'source.powershell',\r\n        path: 'powershell.tmLanguage.json',\r\n        aliases: ['ps', 'ps1']\r\n    },\r\n    {\r\n        id: 'prisma',\r\n        scopeName: 'source.prisma',\r\n        path: 'prisma.tmLanguage.json',\r\n        samplePath: 'prisma.sample'\r\n    },\r\n    {\r\n        id: 'prolog',\r\n        scopeName: 'source.prolog',\r\n        path: 'prolog.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'pug',\r\n        scopeName: 'text.pug',\r\n        path: 'pug.tmLanguage.json',\r\n        aliases: ['jade'],\r\n        embeddedLangs: ['javascript', 'css', 'sass', 'stylus', 'coffee', 'html']\r\n    },\r\n    {\r\n        id: 'puppet',\r\n        scopeName: 'source.puppet',\r\n        path: 'puppet.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'purescript',\r\n        scopeName: 'source.purescript',\r\n        path: 'purescript.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'python',\r\n        scopeName: 'source.python',\r\n        path: 'python.tmLanguage.json',\r\n        samplePath: 'python.sample',\r\n        aliases: ['py']\r\n    },\r\n    {\r\n        id: 'r',\r\n        scopeName: 'source.r',\r\n        path: 'r.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'raku',\r\n        scopeName: 'source.perl.6',\r\n        path: 'raku.tmLanguage.json',\r\n        aliases: ['perl6']\r\n    },\r\n    {\r\n        id: 'razor',\r\n        scopeName: 'text.aspnetcorerazor',\r\n        path: 'razor.tmLanguage.json',\r\n        embeddedLangs: ['html', 'csharp']\r\n    },\r\n    {\r\n        id: 'rel',\r\n        scopeName: 'source.rel',\r\n        path: 'rel.tmLanguage.json',\r\n        samplePath: 'rel.sample'\r\n    },\r\n    {\r\n        id: 'riscv',\r\n        scopeName: 'source.riscv',\r\n        path: 'riscv.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'ruby',\r\n        scopeName: 'source.ruby',\r\n        path: 'ruby.tmLanguage.json',\r\n        samplePath: 'ruby.sample',\r\n        aliases: ['rb'],\r\n        embeddedLangs: ['html', 'xml', 'sql', 'css', 'c', 'javascript', 'shellscript', 'lua']\r\n    },\r\n    {\r\n        id: 'rust',\r\n        scopeName: 'source.rust',\r\n        path: 'rust.tmLanguage.json',\r\n        aliases: ['rs']\r\n    },\r\n    {\r\n        id: 'sas',\r\n        scopeName: 'source.sas',\r\n        path: 'sas.tmLanguage.json',\r\n        embeddedLangs: ['sql']\r\n    },\r\n    {\r\n        id: 'sass',\r\n        scopeName: 'source.sass',\r\n        path: 'sass.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'scala',\r\n        scopeName: 'source.scala',\r\n        path: 'scala.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'scheme',\r\n        scopeName: 'source.scheme',\r\n        path: 'scheme.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'scss',\r\n        scopeName: 'source.css.scss',\r\n        path: 'scss.tmLanguage.json',\r\n        embeddedLangs: ['css']\r\n    },\r\n    {\r\n        id: 'shaderlab',\r\n        scopeName: 'source.shaderlab',\r\n        path: 'shaderlab.tmLanguage.json',\r\n        aliases: ['shader'],\r\n        embeddedLangs: ['hlsl']\r\n    },\r\n    {\r\n        id: 'shellscript',\r\n        scopeName: 'source.shell',\r\n        path: 'shellscript.tmLanguage.json',\r\n        aliases: ['shell', 'bash', 'sh', 'zsh'],\r\n        embeddedLangs: ['ruby', 'python', 'applescript', 'html', 'markdown']\r\n    },\r\n    {\r\n        id: 'smalltalk',\r\n        scopeName: 'source.smalltalk',\r\n        path: 'smalltalk.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'solidity',\r\n        scopeName: 'source.solidity',\r\n        path: 'solidity.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'sparql',\r\n        scopeName: 'source.sparql',\r\n        path: 'sparql.tmLanguage.json',\r\n        samplePath: 'sparql.sample',\r\n        embeddedLangs: ['turtle']\r\n    },\r\n    {\r\n        id: 'sql',\r\n        scopeName: 'source.sql',\r\n        path: 'sql.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'ssh-config',\r\n        scopeName: 'source.ssh-config',\r\n        path: 'ssh-config.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'stata',\r\n        scopeName: 'source.stata',\r\n        path: 'stata.tmLanguage.json',\r\n        samplePath: 'stata.sample',\r\n        embeddedLangs: ['sql']\r\n    },\r\n    {\r\n        id: 'stylus',\r\n        scopeName: 'source.stylus',\r\n        path: 'stylus.tmLanguage.json',\r\n        aliases: ['styl']\r\n    },\r\n    {\r\n        id: 'svelte',\r\n        scopeName: 'source.svelte',\r\n        path: 'svelte.tmLanguage.json',\r\n        embeddedLangs: ['javascript', 'typescript', 'coffee', 'stylus', 'sass', 'css', 'scss', 'less', 'postcss', 'pug', 'markdown']\r\n    },\r\n    {\r\n        id: 'swift',\r\n        scopeName: 'source.swift',\r\n        path: 'swift.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'system-verilog',\r\n        scopeName: 'source.systemverilog',\r\n        path: 'system-verilog.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'tasl',\r\n        scopeName: 'source.tasl',\r\n        path: 'tasl.tmLanguage.json',\r\n        samplePath: 'tasl.sample'\r\n    },\r\n    {\r\n        id: 'tcl',\r\n        scopeName: 'source.tcl',\r\n        path: 'tcl.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'tex',\r\n        scopeName: 'text.tex',\r\n        path: 'tex.tmLanguage.json',\r\n        embeddedLangs: ['r']\r\n    },\r\n    {\r\n        id: 'toml',\r\n        scopeName: 'source.toml',\r\n        path: 'toml.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'tsx',\r\n        scopeName: 'source.tsx',\r\n        path: 'tsx.tmLanguage.json',\r\n        samplePath: 'tsx.sample'\r\n    },\r\n    {\r\n        id: 'turtle',\r\n        scopeName: 'source.turtle',\r\n        path: 'turtle.tmLanguage.json',\r\n        samplePath: 'turtle.sample'\r\n    },\r\n    {\r\n        id: 'twig',\r\n        scopeName: 'text.html.twig',\r\n        path: 'twig.tmLanguage.json',\r\n        embeddedLangs: ['css', 'javascript', 'php', 'python', 'ruby']\r\n    },\r\n    {\r\n        id: 'typescript',\r\n        scopeName: 'source.ts',\r\n        path: 'typescript.tmLanguage.json',\r\n        aliases: ['ts']\r\n    },\r\n    {\r\n        id: 'vb',\r\n        scopeName: 'source.asp.vb.net',\r\n        path: 'vb.tmLanguage.json',\r\n        aliases: ['cmd']\r\n    },\r\n    {\r\n        id: 'verilog',\r\n        scopeName: 'source.verilog',\r\n        path: 'verilog.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'vhdl',\r\n        scopeName: 'source.vhdl',\r\n        path: 'vhdl.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'viml',\r\n        scopeName: 'source.viml',\r\n        path: 'viml.tmLanguage.json',\r\n        aliases: ['vim', 'vimscript']\r\n    },\r\n    {\r\n        id: 'vue-html',\r\n        scopeName: 'text.html.vue-html',\r\n        path: 'vue-html.tmLanguage.json',\r\n        embeddedLangs: ['vue', 'javascript']\r\n    },\r\n    {\r\n        id: 'vue',\r\n        scopeName: 'source.vue',\r\n        path: 'vue.tmLanguage.json',\r\n        embeddedLangs: ['json', 'markdown', 'pug', 'haml', 'vue-html', 'sass', 'scss', 'less', 'stylus', 'postcss', 'css', 'typescript', 'coffee', 'javascript']\r\n    },\r\n    {\r\n        id: 'wasm',\r\n        scopeName: 'source.wat',\r\n        path: 'wasm.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'wenyan',\r\n        scopeName: 'source.wenyan',\r\n        path: 'wenyan.tmLanguage.json',\r\n        aliases: ['æ–‡è¨€']\r\n    },\r\n    {\r\n        id: 'xml',\r\n        scopeName: 'text.xml',\r\n        path: 'xml.tmLanguage.json',\r\n        embeddedLangs: ['java']\r\n    },\r\n    {\r\n        id: 'xsl',\r\n        scopeName: 'text.xml.xsl',\r\n        path: 'xsl.tmLanguage.json',\r\n        embeddedLangs: ['xml']\r\n    },\r\n    {\r\n        id: 'yaml',\r\n        scopeName: 'source.yaml',\r\n        path: 'yaml.tmLanguage.json'\r\n    },\r\n    {\r\n        id: 'zenscript',\r\n        scopeName: 'source.zenscript',\r\n        path: 'zenscript.tmLanguage.json',\r\n        samplePath: 'zenscript.sample'\r\n    }\r\n];\n\nvar FontStyle;\r\n(function (FontStyle) {\r\n    FontStyle[FontStyle[\"NotSet\"] = -1] = \"NotSet\";\r\n    FontStyle[FontStyle[\"None\"] = 0] = \"None\";\r\n    FontStyle[FontStyle[\"Italic\"] = 1] = \"Italic\";\r\n    FontStyle[FontStyle[\"Bold\"] = 2] = \"Bold\";\r\n    FontStyle[FontStyle[\"Underline\"] = 4] = \"Underline\";\r\n})(FontStyle || (FontStyle = {}));\r\nclass StackElementMetadata {\r\n    static toBinaryStr(metadata) {\r\n        let r = metadata.toString(2);\r\n        while (r.length < 32) {\r\n            r = '0' + r;\r\n        }\r\n        return r;\r\n    }\r\n    static printMetadata(metadata) {\r\n        let languageId = StackElementMetadata.getLanguageId(metadata);\r\n        let tokenType = StackElementMetadata.getTokenType(metadata);\r\n        let fontStyle = StackElementMetadata.getFontStyle(metadata);\r\n        let foreground = StackElementMetadata.getForeground(metadata);\r\n        let background = StackElementMetadata.getBackground(metadata);\r\n        console.log({\r\n            languageId: languageId,\r\n            tokenType: tokenType,\r\n            fontStyle: fontStyle,\r\n            foreground: foreground,\r\n            background: background\r\n        });\r\n    }\r\n    static getLanguageId(metadata) {\r\n        return (metadata & 255 /* LANGUAGEID_MASK */) >>> 0 /* LANGUAGEID_OFFSET */;\r\n    }\r\n    static getTokenType(metadata) {\r\n        return (metadata & 1792 /* TOKEN_TYPE_MASK */) >>> 8 /* TOKEN_TYPE_OFFSET */;\r\n    }\r\n    static getFontStyle(metadata) {\r\n        return (metadata & 14336 /* FONT_STYLE_MASK */) >>> 11 /* FONT_STYLE_OFFSET */;\r\n    }\r\n    static getForeground(metadata) {\r\n        return (metadata & 8372224 /* FOREGROUND_MASK */) >>> 14 /* FOREGROUND_OFFSET */;\r\n    }\r\n    static getBackground(metadata) {\r\n        return (metadata & 4286578688 /* BACKGROUND_MASK */) >>> 23 /* BACKGROUND_OFFSET */;\r\n    }\r\n    static set(metadata, languageId, tokenType, fontStyle, foreground, background) {\r\n        let _languageId = StackElementMetadata.getLanguageId(metadata);\r\n        let _tokenType = StackElementMetadata.getTokenType(metadata);\r\n        let _fontStyle = StackElementMetadata.getFontStyle(metadata);\r\n        let _foreground = StackElementMetadata.getForeground(metadata);\r\n        let _background = StackElementMetadata.getBackground(metadata);\r\n        if (languageId !== 0) {\r\n            _languageId = languageId;\r\n        }\r\n        if (tokenType !== 0 /* Other */) {\r\n            _tokenType =\r\n                tokenType === 8 /* MetaEmbedded */ ? 0 /* Other */ : tokenType;\r\n        }\r\n        if (fontStyle !== FontStyle.NotSet) {\r\n            _fontStyle = fontStyle;\r\n        }\r\n        if (foreground !== 0) {\r\n            _foreground = foreground;\r\n        }\r\n        if (background !== 0) {\r\n            _background = background;\r\n        }\r\n        return (((_languageId << 0 /* LANGUAGEID_OFFSET */) |\r\n            (_tokenType << 8 /* TOKEN_TYPE_OFFSET */) |\r\n            (_fontStyle << 11 /* FONT_STYLE_OFFSET */) |\r\n            (_foreground << 14 /* FOREGROUND_OFFSET */) |\r\n            (_background << 23 /* BACKGROUND_OFFSET */)) >>>\r\n            0);\r\n    }\r\n}\n\nfunction trimEndSlash(str) {\r\n    if (str.endsWith('/') || str.endsWith('\\\\'))\r\n        return str.slice(0, -1);\r\n    return str;\r\n}\r\nfunction trimStartDot(str) {\r\n    if (str.startsWith('./'))\r\n        return str.slice(2);\r\n    return str;\r\n}\r\nfunction dirname(str) {\r\n    const parts = str.split(/[\\/\\\\]/g);\r\n    return parts[parts.length - 2];\r\n}\r\nfunction join(...parts) {\r\n    return parts.map(trimEndSlash).map(trimStartDot).join('/');\r\n}\r\nfunction groupBy(elements, keyGetter) {\r\n    const map = new Map();\r\n    for (const element of elements) {\r\n        const key = keyGetter(element);\r\n        if (map.has(key)) {\r\n            const group = map.get(key);\r\n            group.push(element);\r\n        }\r\n        else {\r\n            map.set(key, [element]);\r\n        }\r\n    }\r\n    return map;\r\n}\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nfunction createScanner(text, ignoreTrivia) {\n    if (ignoreTrivia === void 0) { ignoreTrivia = false; }\n    var len = text.length;\n    var pos = 0, value = '', tokenOffset = 0, token = 16 /* Unknown */, lineNumber = 0, lineStartOffset = 0, tokenLineStartOffset = 0, prevTokenLineStartOffset = 0, scanError = 0 /* None */;\n    function scanHexDigits(count, exact) {\n        var digits = 0;\n        var value = 0;\n        while (digits < count || !exact) {\n            var ch = text.charCodeAt(pos);\n            if (ch >= 48 /* _0 */ && ch <= 57 /* _9 */) {\n                value = value * 16 + ch - 48 /* _0 */;\n            }\n            else if (ch >= 65 /* A */ && ch <= 70 /* F */) {\n                value = value * 16 + ch - 65 /* A */ + 10;\n            }\n            else if (ch >= 97 /* a */ && ch <= 102 /* f */) {\n                value = value * 16 + ch - 97 /* a */ + 10;\n            }\n            else {\n                break;\n            }\n            pos++;\n            digits++;\n        }\n        if (digits < count) {\n            value = -1;\n        }\n        return value;\n    }\n    function setPosition(newPosition) {\n        pos = newPosition;\n        value = '';\n        tokenOffset = 0;\n        token = 16 /* Unknown */;\n        scanError = 0 /* None */;\n    }\n    function scanNumber() {\n        var start = pos;\n        if (text.charCodeAt(pos) === 48 /* _0 */) {\n            pos++;\n        }\n        else {\n            pos++;\n            while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n            }\n        }\n        if (pos < text.length && text.charCodeAt(pos) === 46 /* dot */) {\n            pos++;\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n                return text.substring(start, pos);\n            }\n        }\n        var end = pos;\n        if (pos < text.length && (text.charCodeAt(pos) === 69 /* E */ || text.charCodeAt(pos) === 101 /* e */)) {\n            pos++;\n            if (pos < text.length && text.charCodeAt(pos) === 43 /* plus */ || text.charCodeAt(pos) === 45 /* minus */) {\n                pos++;\n            }\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n                end = pos;\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n            }\n        }\n        return text.substring(start, end);\n    }\n    function scanString() {\n        var result = '', start = pos;\n        while (true) {\n            if (pos >= len) {\n                result += text.substring(start, pos);\n                scanError = 2 /* UnexpectedEndOfString */;\n                break;\n            }\n            var ch = text.charCodeAt(pos);\n            if (ch === 34 /* doubleQuote */) {\n                result += text.substring(start, pos);\n                pos++;\n                break;\n            }\n            if (ch === 92 /* backslash */) {\n                result += text.substring(start, pos);\n                pos++;\n                if (pos >= len) {\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                var ch2 = text.charCodeAt(pos++);\n                switch (ch2) {\n                    case 34 /* doubleQuote */:\n                        result += '\\\"';\n                        break;\n                    case 92 /* backslash */:\n                        result += '\\\\';\n                        break;\n                    case 47 /* slash */:\n                        result += '/';\n                        break;\n                    case 98 /* b */:\n                        result += '\\b';\n                        break;\n                    case 102 /* f */:\n                        result += '\\f';\n                        break;\n                    case 110 /* n */:\n                        result += '\\n';\n                        break;\n                    case 114 /* r */:\n                        result += '\\r';\n                        break;\n                    case 116 /* t */:\n                        result += '\\t';\n                        break;\n                    case 117 /* u */:\n                        var ch3 = scanHexDigits(4, true);\n                        if (ch3 >= 0) {\n                            result += String.fromCharCode(ch3);\n                        }\n                        else {\n                            scanError = 4 /* InvalidUnicode */;\n                        }\n                        break;\n                    default:\n                        scanError = 5 /* InvalidEscapeCharacter */;\n                }\n                start = pos;\n                continue;\n            }\n            if (ch >= 0 && ch <= 0x1f) {\n                if (isLineBreak(ch)) {\n                    result += text.substring(start, pos);\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                else {\n                    scanError = 6 /* InvalidCharacter */;\n                    // mark as error but continue with string\n                }\n            }\n            pos++;\n        }\n        return result;\n    }\n    function scanNext() {\n        value = '';\n        scanError = 0 /* None */;\n        tokenOffset = pos;\n        lineStartOffset = lineNumber;\n        prevTokenLineStartOffset = tokenLineStartOffset;\n        if (pos >= len) {\n            // at the end\n            tokenOffset = len;\n            return token = 17 /* EOF */;\n        }\n        var code = text.charCodeAt(pos);\n        // trivia: whitespace\n        if (isWhiteSpace(code)) {\n            do {\n                pos++;\n                value += String.fromCharCode(code);\n                code = text.charCodeAt(pos);\n            } while (isWhiteSpace(code));\n            return token = 15 /* Trivia */;\n        }\n        // trivia: newlines\n        if (isLineBreak(code)) {\n            pos++;\n            value += String.fromCharCode(code);\n            if (code === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                pos++;\n                value += '\\n';\n            }\n            lineNumber++;\n            tokenLineStartOffset = pos;\n            return token = 14 /* LineBreakTrivia */;\n        }\n        switch (code) {\n            // tokens: []{}:,\n            case 123 /* openBrace */:\n                pos++;\n                return token = 1 /* OpenBraceToken */;\n            case 125 /* closeBrace */:\n                pos++;\n                return token = 2 /* CloseBraceToken */;\n            case 91 /* openBracket */:\n                pos++;\n                return token = 3 /* OpenBracketToken */;\n            case 93 /* closeBracket */:\n                pos++;\n                return token = 4 /* CloseBracketToken */;\n            case 58 /* colon */:\n                pos++;\n                return token = 6 /* ColonToken */;\n            case 44 /* comma */:\n                pos++;\n                return token = 5 /* CommaToken */;\n            // strings\n            case 34 /* doubleQuote */:\n                pos++;\n                value = scanString();\n                return token = 10 /* StringLiteral */;\n            // comments\n            case 47 /* slash */:\n                var start = pos - 1;\n                // Single-line comment\n                if (text.charCodeAt(pos + 1) === 47 /* slash */) {\n                    pos += 2;\n                    while (pos < len) {\n                        if (isLineBreak(text.charCodeAt(pos))) {\n                            break;\n                        }\n                        pos++;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 12 /* LineCommentTrivia */;\n                }\n                // Multi-line comment\n                if (text.charCodeAt(pos + 1) === 42 /* asterisk */) {\n                    pos += 2;\n                    var safeLength = len - 1; // For lookahead.\n                    var commentClosed = false;\n                    while (pos < safeLength) {\n                        var ch = text.charCodeAt(pos);\n                        if (ch === 42 /* asterisk */ && text.charCodeAt(pos + 1) === 47 /* slash */) {\n                            pos += 2;\n                            commentClosed = true;\n                            break;\n                        }\n                        pos++;\n                        if (isLineBreak(ch)) {\n                            if (ch === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                                pos++;\n                            }\n                            lineNumber++;\n                            tokenLineStartOffset = pos;\n                        }\n                    }\n                    if (!commentClosed) {\n                        pos++;\n                        scanError = 1 /* UnexpectedEndOfComment */;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 13 /* BlockCommentTrivia */;\n                }\n                // just a single slash\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n            // numbers\n            case 45 /* minus */:\n                value += String.fromCharCode(code);\n                pos++;\n                if (pos === len || !isDigit(text.charCodeAt(pos))) {\n                    return token = 16 /* Unknown */;\n                }\n            // found a minus, followed by a number so\n            // we fall through to proceed with scanning\n            // numbers\n            case 48 /* _0 */:\n            case 49 /* _1 */:\n            case 50 /* _2 */:\n            case 51 /* _3 */:\n            case 52 /* _4 */:\n            case 53 /* _5 */:\n            case 54 /* _6 */:\n            case 55 /* _7 */:\n            case 56 /* _8 */:\n            case 57 /* _9 */:\n                value += scanNumber();\n                return token = 11 /* NumericLiteral */;\n            // literals and unknown symbols\n            default:\n                // is a literal? Read the full word.\n                while (pos < len && isUnknownContentCharacter(code)) {\n                    pos++;\n                    code = text.charCodeAt(pos);\n                }\n                if (tokenOffset !== pos) {\n                    value = text.substring(tokenOffset, pos);\n                    // keywords: true, false, null\n                    switch (value) {\n                        case 'true': return token = 8 /* TrueKeyword */;\n                        case 'false': return token = 9 /* FalseKeyword */;\n                        case 'null': return token = 7 /* NullKeyword */;\n                    }\n                    return token = 16 /* Unknown */;\n                }\n                // some\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n        }\n    }\n    function isUnknownContentCharacter(code) {\n        if (isWhiteSpace(code) || isLineBreak(code)) {\n            return false;\n        }\n        switch (code) {\n            case 125 /* closeBrace */:\n            case 93 /* closeBracket */:\n            case 123 /* openBrace */:\n            case 91 /* openBracket */:\n            case 34 /* doubleQuote */:\n            case 58 /* colon */:\n            case 44 /* comma */:\n            case 47 /* slash */:\n                return false;\n        }\n        return true;\n    }\n    function scanNextNonTrivia() {\n        var result;\n        do {\n            result = scanNext();\n        } while (result >= 12 /* LineCommentTrivia */ && result <= 15 /* Trivia */);\n        return result;\n    }\n    return {\n        setPosition: setPosition,\n        getPosition: function () { return pos; },\n        scan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n        getToken: function () { return token; },\n        getTokenValue: function () { return value; },\n        getTokenOffset: function () { return tokenOffset; },\n        getTokenLength: function () { return pos - tokenOffset; },\n        getTokenStartLine: function () { return lineStartOffset; },\n        getTokenStartCharacter: function () { return tokenOffset - prevTokenLineStartOffset; },\n        getTokenError: function () { return scanError; },\n    };\n}\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* space */ || ch === 9 /* tab */ || ch === 11 /* verticalTab */ || ch === 12 /* formFeed */ ||\n        ch === 160 /* nonBreakingSpace */ || ch === 5760 /* ogham */ || ch >= 8192 /* enQuad */ && ch <= 8203 /* zeroWidthSpace */ ||\n        ch === 8239 /* narrowNoBreakSpace */ || ch === 8287 /* mathematicalSpace */ || ch === 12288 /* ideographicSpace */ || ch === 65279 /* byteOrderMark */;\n}\nfunction isLineBreak(ch) {\n    return ch === 10 /* lineFeed */ || ch === 13 /* carriageReturn */ || ch === 8232 /* lineSeparator */ || ch === 8233 /* paragraphSeparator */;\n}\nfunction isDigit(ch) {\n    return ch >= 48 /* _0 */ && ch <= 57 /* _9 */;\n}\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar ParseOptions;\n(function (ParseOptions) {\n    ParseOptions.DEFAULT = {\n        allowTrailingComma: false\n    };\n})(ParseOptions || (ParseOptions = {}));\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nfunction parse$1(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentProperty = null;\n    var currentParent = [];\n    var previousParents = [];\n    function onValue(value) {\n        if (Array.isArray(currentParent)) {\n            currentParent.push(value);\n        }\n        else if (currentProperty !== null) {\n            currentParent[currentProperty] = value;\n        }\n    }\n    var visitor = {\n        onObjectBegin: function () {\n            var object = {};\n            onValue(object);\n            previousParents.push(currentParent);\n            currentParent = object;\n            currentProperty = null;\n        },\n        onObjectProperty: function (name) {\n            currentProperty = name;\n        },\n        onObjectEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onArrayBegin: function () {\n            var array = [];\n            onValue(array);\n            previousParents.push(currentParent);\n            currentParent = array;\n            currentProperty = null;\n        },\n        onArrayEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onLiteralValue: onValue,\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    return currentParent[0];\n}\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nfunction visit(text, visitor, options) {\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var _scanner = createScanner(text, false);\n    function toNoArgVisit(visitFunction) {\n        return visitFunction ? function () { return visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    function toOneArgVisit(visitFunction) {\n        return visitFunction ? function (arg) { return visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    var onObjectBegin = toNoArgVisit(visitor.onObjectBegin), onObjectProperty = toOneArgVisit(visitor.onObjectProperty), onObjectEnd = toNoArgVisit(visitor.onObjectEnd), onArrayBegin = toNoArgVisit(visitor.onArrayBegin), onArrayEnd = toNoArgVisit(visitor.onArrayEnd), onLiteralValue = toOneArgVisit(visitor.onLiteralValue), onSeparator = toOneArgVisit(visitor.onSeparator), onComment = toNoArgVisit(visitor.onComment), onError = toOneArgVisit(visitor.onError);\n    var disallowComments = options && options.disallowComments;\n    var allowTrailingComma = options && options.allowTrailingComma;\n    function scanNext() {\n        while (true) {\n            var token = _scanner.scan();\n            switch (_scanner.getTokenError()) {\n                case 4 /* InvalidUnicode */:\n                    handleError(14 /* InvalidUnicode */);\n                    break;\n                case 5 /* InvalidEscapeCharacter */:\n                    handleError(15 /* InvalidEscapeCharacter */);\n                    break;\n                case 3 /* UnexpectedEndOfNumber */:\n                    handleError(13 /* UnexpectedEndOfNumber */);\n                    break;\n                case 1 /* UnexpectedEndOfComment */:\n                    if (!disallowComments) {\n                        handleError(11 /* UnexpectedEndOfComment */);\n                    }\n                    break;\n                case 2 /* UnexpectedEndOfString */:\n                    handleError(12 /* UnexpectedEndOfString */);\n                    break;\n                case 6 /* InvalidCharacter */:\n                    handleError(16 /* InvalidCharacter */);\n                    break;\n            }\n            switch (token) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (disallowComments) {\n                        handleError(10 /* InvalidCommentToken */);\n                    }\n                    else {\n                        onComment();\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    handleError(1 /* InvalidSymbol */);\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token;\n            }\n        }\n    }\n    function handleError(error, skipUntilAfter, skipUntil) {\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        onError(error);\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token = _scanner.getToken();\n            while (token !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token) !== -1) {\n                    scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token) !== -1) {\n                    break;\n                }\n                token = scanNext();\n            }\n        }\n    }\n    function parseString(isValue) {\n        var value = _scanner.getTokenValue();\n        if (isValue) {\n            onLiteralValue(value);\n        }\n        else {\n            onObjectProperty(value);\n        }\n        scanNext();\n        return true;\n    }\n    function parseLiteral() {\n        switch (_scanner.getToken()) {\n            case 11 /* NumericLiteral */:\n                var tokenValue = _scanner.getTokenValue();\n                var value = Number(tokenValue);\n                if (isNaN(value)) {\n                    handleError(2 /* InvalidNumberFormat */);\n                    value = 0;\n                }\n                onLiteralValue(value);\n                break;\n            case 7 /* NullKeyword */:\n                onLiteralValue(null);\n                break;\n            case 8 /* TrueKeyword */:\n                onLiteralValue(true);\n                break;\n            case 9 /* FalseKeyword */:\n                onLiteralValue(false);\n                break;\n            default:\n                return false;\n        }\n        scanNext();\n        return true;\n    }\n    function parseProperty() {\n        if (_scanner.getToken() !== 10 /* StringLiteral */) {\n            handleError(3 /* PropertyNameExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            return false;\n        }\n        parseString(false);\n        if (_scanner.getToken() === 6 /* ColonToken */) {\n            onSeparator(':');\n            scanNext(); // consume colon\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n        }\n        else {\n            handleError(5 /* ColonExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        return true;\n    }\n    function parseObject() {\n        onObjectBegin();\n        scanNext(); // consume open brace\n        var needsComma = false;\n        while (_scanner.getToken() !== 2 /* CloseBraceToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 2 /* CloseBraceToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseProperty()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onObjectEnd();\n        if (_scanner.getToken() !== 2 /* CloseBraceToken */) {\n            handleError(7 /* CloseBraceExpected */, [2 /* CloseBraceToken */], []);\n        }\n        else {\n            scanNext(); // consume close brace\n        }\n        return true;\n    }\n    function parseArray() {\n        onArrayBegin();\n        scanNext(); // consume open bracket\n        var needsComma = false;\n        while (_scanner.getToken() !== 4 /* CloseBracketToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 4 /* CloseBracketToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onArrayEnd();\n        if (_scanner.getToken() !== 4 /* CloseBracketToken */) {\n            handleError(8 /* CloseBracketExpected */, [4 /* CloseBracketToken */], []);\n        }\n        else {\n            scanNext(); // consume close bracket\n        }\n        return true;\n    }\n    function parseValue() {\n        switch (_scanner.getToken()) {\n            case 3 /* OpenBracketToken */:\n                return parseArray();\n            case 1 /* OpenBraceToken */:\n                return parseObject();\n            case 10 /* StringLiteral */:\n                return parseString(true);\n            default:\n                return parseLiteral();\n        }\n    }\n    scanNext();\n    if (_scanner.getToken() === 17 /* EOF */) {\n        if (options.allowEmptyContent) {\n            return true;\n        }\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (!parseValue()) {\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (_scanner.getToken() !== 17 /* EOF */) {\n        handleError(9 /* EndOfFileExpected */, [], []);\n    }\n    return true;\n}\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore, always check the errors list to find out if the input was valid.\n */\nvar parse = parse$1;\n\nconst isWebWorker = typeof self !== 'undefined' && typeof self.WorkerGlobalScope !== 'undefined';\r\nconst isBrowser = isWebWorker ||\r\n    (typeof window !== 'undefined' &&\r\n        typeof window.document !== 'undefined' &&\r\n        typeof fetch !== 'undefined');\r\n// to be replaced by rollup\r\nlet CDN_ROOT = '';\r\nlet WASM = '';\r\n/**\r\n * Set the route for loading the assets\r\n * URL should end with `/`\r\n *\r\n * For example:\r\n * ```ts\r\n * setCDN('https://unpkg.com/shiki/') // use unpkg\r\n * setCDN('/assets/shiki/') // serve by yourself\r\n * ```\r\n */\r\nfunction setCDN(root) {\r\n    CDN_ROOT = root;\r\n}\r\n/**\r\n * Explicitly set the source for loading the oniguruma web assembly module.\r\n *\r\n * Accepts Url or ArrayBuffer\r\n */\r\nfunction setWasm(path) {\r\n    WASM = path;\r\n}\r\nlet _onigurumaPromise = null;\r\nasync function getOniguruma() {\r\n    if (!_onigurumaPromise) {\r\n        let loader;\r\n        if (isBrowser) {\r\n            if (typeof WASM === 'string') {\r\n                loader = loadWASM({\r\n                    data: await fetch(_resolvePath('dist/onig.wasm')).then(r => r.arrayBuffer())\r\n                });\r\n            }\r\n            else {\r\n                loader = loadWASM(WASM);\r\n            }\r\n        }\r\n        else {\r\n            const path = require('path');\r\n            const wasmPath = path.join(require.resolve('vscode-oniguruma'), '../onig.wasm');\r\n            const fs = require('fs');\r\n            const wasmBin = fs.readFileSync(wasmPath).buffer;\r\n            loader = loadWASM(wasmBin);\r\n        }\r\n        _onigurumaPromise = loader.then(() => {\r\n            return {\r\n                createOnigScanner(patterns) {\r\n                    return createOnigScanner(patterns);\r\n                },\r\n                createOnigString(s) {\r\n                    return createOnigString(s);\r\n                }\r\n            };\r\n        });\r\n    }\r\n    return _onigurumaPromise;\r\n}\r\nfunction _resolvePath(filepath) {\r\n    if (isBrowser) {\r\n        if (!CDN_ROOT) {\r\n            console.warn('[Shiki] no CDN provider found, use `setCDN()` to specify the CDN for loading the resources before calling `getHighlighter()`');\r\n        }\r\n        return `${CDN_ROOT}${filepath}`;\r\n    }\r\n    else {\r\n        const path = require('path');\r\n        if (path.isAbsolute(filepath)) {\r\n            return filepath;\r\n        }\r\n        else {\r\n            return path.resolve(__dirname, '..', filepath);\r\n        }\r\n    }\r\n}\r\n/**\r\n * @param filepath assert path related to ./packages/shiki\r\n */\r\nasync function _fetchAssets(filepath) {\r\n    const path = _resolvePath(filepath);\r\n    if (isBrowser) {\r\n        return await fetch(path).then(r => r.text());\r\n    }\r\n    else {\r\n        const fs = require('fs');\r\n        return await fs.promises.readFile(path, 'utf-8');\r\n    }\r\n}\r\nasync function _fetchJSONAssets(filepath) {\r\n    const errors = [];\r\n    const rawTheme = parse(await _fetchAssets(filepath), errors, {\r\n        allowTrailingComma: true\r\n    });\r\n    if (errors.length) {\r\n        throw errors[0];\r\n    }\r\n    return rawTheme;\r\n}\r\n/**\r\n * @param themePath related path to theme.json\r\n */\r\nasync function fetchTheme(themePath) {\r\n    let theme = await _fetchJSONAssets(themePath);\r\n    const shikiTheme = toShikiTheme(theme);\r\n    if (shikiTheme.include) {\r\n        const includedTheme = await fetchTheme(join(dirname(themePath), shikiTheme.include));\r\n        if (includedTheme.settings) {\r\n            shikiTheme.settings = includedTheme.settings.concat(shikiTheme.settings);\r\n        }\r\n        if (includedTheme.bg && !shikiTheme.bg) {\r\n            shikiTheme.bg = includedTheme.bg;\r\n        }\r\n        if (includedTheme.colors) {\r\n            shikiTheme.colors = Object.assign(Object.assign({}, includedTheme.colors), shikiTheme.colors);\r\n        }\r\n        delete shikiTheme.include;\r\n    }\r\n    return shikiTheme;\r\n}\r\nasync function fetchGrammar(filepath) {\r\n    return await _fetchJSONAssets(filepath);\r\n}\r\nfunction repairTheme(theme) {\r\n    // Has the default no-scope setting with fallback colors\r\n    if (!theme.settings)\r\n        theme.settings = [];\r\n    if (theme.settings[0] && theme.settings[0].settings && !theme.settings[0].scope) {\r\n        return;\r\n    }\r\n    // Push a no-scope setting with fallback colors\r\n    theme.settings.unshift({\r\n        settings: {\r\n            foreground: theme.fg,\r\n            background: theme.bg\r\n        }\r\n    });\r\n}\r\nfunction toShikiTheme(rawTheme) {\r\n    const type = rawTheme.type || 'dark';\r\n    const shikiTheme = Object.assign(Object.assign({ name: rawTheme.name, type }, rawTheme), getThemeDefaultColors(rawTheme));\r\n    if (rawTheme.include) {\r\n        shikiTheme.include = rawTheme.include;\r\n    }\r\n    if (rawTheme.tokenColors) {\r\n        shikiTheme.settings = rawTheme.tokenColors;\r\n        delete shikiTheme.tokenColors;\r\n    }\r\n    repairTheme(shikiTheme);\r\n    return shikiTheme;\r\n}\r\n/**\r\n * https://github.com/microsoft/vscode/blob/f7f05dee53fb33fe023db2e06e30a89d3094488f/src/vs/platform/theme/common/colorRegistry.ts#L258-L268\r\n */\r\nconst VSCODE_FALLBACK_EDITOR_FG = { light: '#333333', dark: '#bbbbbb' };\r\nconst VSCODE_FALLBACK_EDITOR_BG = { light: '#fffffe', dark: '#1e1e1e' };\r\nfunction getThemeDefaultColors(theme) {\r\n    var _a, _b, _c, _d, _e, _f;\r\n    let fg, bg;\r\n    /**\r\n     * First try:\r\n     * Theme might contain a global `tokenColor` without `name` or `scope`\r\n     * Used as default value for foreground/background\r\n     */\r\n    let settings = theme.settings ? theme.settings : theme.tokenColors;\r\n    const globalSetting = settings\r\n        ? settings.find(s => {\r\n            return !s.name && !s.scope;\r\n        })\r\n        : undefined;\r\n    if ((_a = globalSetting === null || globalSetting === void 0 ? void 0 : globalSetting.settings) === null || _a === void 0 ? void 0 : _a.foreground) {\r\n        fg = globalSetting.settings.foreground;\r\n    }\r\n    if ((_b = globalSetting === null || globalSetting === void 0 ? void 0 : globalSetting.settings) === null || _b === void 0 ? void 0 : _b.background) {\r\n        bg = globalSetting.settings.background;\r\n    }\r\n    /**\r\n     * Second try:\r\n     * If there's no global `tokenColor` without `name` or `scope`\r\n     * Use `editor.foreground` and `editor.background`\r\n     */\r\n    if (!fg && ((_d = (_c = theme) === null || _c === void 0 ? void 0 : _c.colors) === null || _d === void 0 ? void 0 : _d['editor.foreground'])) {\r\n        fg = theme.colors['editor.foreground'];\r\n    }\r\n    if (!bg && ((_f = (_e = theme) === null || _e === void 0 ? void 0 : _e.colors) === null || _f === void 0 ? void 0 : _f['editor.background'])) {\r\n        bg = theme.colors['editor.background'];\r\n    }\r\n    /**\r\n     * Last try:\r\n     * If there's no fg/bg color specified in theme, use default\r\n     */\r\n    if (!fg) {\r\n        fg = theme.type === 'light' ? VSCODE_FALLBACK_EDITOR_FG.light : VSCODE_FALLBACK_EDITOR_FG.dark;\r\n    }\r\n    if (!bg) {\r\n        bg = theme.type === 'light' ? VSCODE_FALLBACK_EDITOR_BG.light : VSCODE_FALLBACK_EDITOR_BG.dark;\r\n    }\r\n    return {\r\n        fg,\r\n        bg\r\n    };\r\n}\n\n/*---------------------------------------------------------\r\n * Copyright (C) Microsoft Corporation. All rights reserved.\r\n *--------------------------------------------------------*/\r\nclass Resolver {\r\n    constructor(onigLibPromise, onigLibName) {\r\n        this.languagesPath = 'languages/';\r\n        this.languageMap = {};\r\n        this.scopeToLangMap = {};\r\n        this._onigLibPromise = onigLibPromise;\r\n        this._onigLibName = onigLibName;\r\n    }\r\n    get onigLib() {\r\n        return this._onigLibPromise;\r\n    }\r\n    getOnigLibName() {\r\n        return this._onigLibName;\r\n    }\r\n    getLangRegistration(langIdOrAlias) {\r\n        return this.languageMap[langIdOrAlias];\r\n    }\r\n    async loadGrammar(scopeName) {\r\n        const lang = this.scopeToLangMap[scopeName];\r\n        if (!lang) {\r\n            return null;\r\n        }\r\n        if (lang.grammar) {\r\n            return lang.grammar;\r\n        }\r\n        const g = await fetchGrammar(languages.includes(lang) ? `${this.languagesPath}${lang.path}` : lang.path);\r\n        lang.grammar = g;\r\n        return g;\r\n    }\r\n    addLanguage(l) {\r\n        this.languageMap[l.id] = l;\r\n        if (l.aliases) {\r\n            l.aliases.forEach(a => {\r\n                this.languageMap[a] = l;\r\n            });\r\n        }\r\n        this.scopeToLangMap[l.scopeName] = l;\r\n    }\r\n}\n\n/*---------------------------------------------------------\r\n * Copyright (C) Microsoft Corporation. All rights reserved.\r\n *--------------------------------------------------------*/\r\nfunction tokenizeWithTheme(theme, colorMap, fileContents, grammar, options) {\r\n    let lines = fileContents.split(/\\r\\n|\\r|\\n/);\r\n    let ruleStack = INITIAL;\r\n    let actual = [];\r\n    let final = [];\r\n    for (let i = 0, len = lines.length; i < len; i++) {\r\n        let line = lines[i];\r\n        if (line === '') {\r\n            actual = [];\r\n            final.push([]);\r\n            continue;\r\n        }\r\n        let resultWithScopes;\r\n        let tokensWithScopes;\r\n        let tokensWithScopesIndex;\r\n        if (options.includeExplanation) {\r\n            resultWithScopes = grammar.tokenizeLine(line, ruleStack);\r\n            tokensWithScopes = resultWithScopes.tokens;\r\n            tokensWithScopesIndex = 0;\r\n        }\r\n        let result = grammar.tokenizeLine2(line, ruleStack);\r\n        let tokensLength = result.tokens.length / 2;\r\n        for (let j = 0; j < tokensLength; j++) {\r\n            let startIndex = result.tokens[2 * j];\r\n            let nextStartIndex = j + 1 < tokensLength ? result.tokens[2 * j + 2] : line.length;\r\n            if (startIndex === nextStartIndex) {\r\n                continue;\r\n            }\r\n            let metadata = result.tokens[2 * j + 1];\r\n            let foreground = StackElementMetadata.getForeground(metadata);\r\n            let foregroundColor = colorMap[foreground];\r\n            let fontStyle = StackElementMetadata.getFontStyle(metadata);\r\n            let explanation = [];\r\n            if (options.includeExplanation) {\r\n                let offset = 0;\r\n                while (startIndex + offset < nextStartIndex) {\r\n                    let tokenWithScopes = tokensWithScopes[tokensWithScopesIndex];\r\n                    let tokenWithScopesText = line.substring(tokenWithScopes.startIndex, tokenWithScopes.endIndex);\r\n                    offset += tokenWithScopesText.length;\r\n                    explanation.push({\r\n                        content: tokenWithScopesText,\r\n                        scopes: explainThemeScopes(theme, tokenWithScopes.scopes)\r\n                    });\r\n                    tokensWithScopesIndex++;\r\n                }\r\n            }\r\n            actual.push({\r\n                content: line.substring(startIndex, nextStartIndex),\r\n                color: foregroundColor,\r\n                fontStyle,\r\n                explanation: explanation\r\n            });\r\n        }\r\n        final.push(actual);\r\n        actual = [];\r\n        ruleStack = result.ruleStack;\r\n    }\r\n    return final;\r\n}\r\nfunction explainThemeScopes(theme, scopes) {\r\n    let result = [];\r\n    for (let i = 0, len = scopes.length; i < len; i++) {\r\n        let parentScopes = scopes.slice(0, i);\r\n        let scope = scopes[i];\r\n        result[i] = {\r\n            scopeName: scope,\r\n            themeMatches: explainThemeScope(theme, scope, parentScopes)\r\n        };\r\n    }\r\n    return result;\r\n}\r\nfunction matchesOne(selector, scope) {\r\n    let selectorPrefix = selector + '.';\r\n    if (selector === scope || scope.substring(0, selectorPrefix.length) === selectorPrefix) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction matches(selector, selectorParentScopes, scope, parentScopes) {\r\n    if (!matchesOne(selector, scope)) {\r\n        return false;\r\n    }\r\n    let selectorParentIndex = selectorParentScopes.length - 1;\r\n    let parentIndex = parentScopes.length - 1;\r\n    while (selectorParentIndex >= 0 && parentIndex >= 0) {\r\n        if (matchesOne(selectorParentScopes[selectorParentIndex], parentScopes[parentIndex])) {\r\n            selectorParentIndex--;\r\n        }\r\n        parentIndex--;\r\n    }\r\n    if (selectorParentIndex === -1) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction explainThemeScope(theme, scope, parentScopes) {\r\n    let result = [], resultLen = 0;\r\n    for (let i = 0, len = theme.settings.length; i < len; i++) {\r\n        let setting = theme.settings[i];\r\n        let selectors;\r\n        if (typeof setting.scope === 'string') {\r\n            selectors = setting.scope.split(/,/).map(scope => scope.trim());\r\n        }\r\n        else if (Array.isArray(setting.scope)) {\r\n            selectors = setting.scope;\r\n        }\r\n        else {\r\n            continue;\r\n        }\r\n        for (let j = 0, lenJ = selectors.length; j < lenJ; j++) {\r\n            let rawSelector = selectors[j];\r\n            let rawSelectorPieces = rawSelector.split(/ /);\r\n            let selector = rawSelectorPieces[rawSelectorPieces.length - 1];\r\n            let selectorParentScopes = rawSelectorPieces.slice(0, rawSelectorPieces.length - 1);\r\n            if (matches(selector, selectorParentScopes, scope, parentScopes)) {\r\n                // match!\r\n                result[resultLen++] = setting;\r\n                // break the loop\r\n                j = lenJ;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\n\nfunction renderToHtml(lines, options = {}) {\r\n    var _a;\r\n    const bg = options.bg || '#fff';\r\n    const optionsByLineNumber = groupBy((_a = options.lineOptions) !== null && _a !== void 0 ? _a : [], option => option.line);\r\n    let html = '';\r\n    html += `<pre class=\"shiki\" style=\"background-color: ${bg}\">`;\r\n    if (options.langId) {\r\n        html += `<div class=\"language-id\">${options.langId}</div>`;\r\n    }\r\n    html += `<code>`;\r\n    lines.forEach((l, lineIndex) => {\r\n        var _a;\r\n        const lineNumber = lineIndex + 1;\r\n        const lineOptions = (_a = optionsByLineNumber.get(lineNumber)) !== null && _a !== void 0 ? _a : [];\r\n        const lineClasses = getLineClasses(lineOptions).join(' ');\r\n        html += `<span class=\"${lineClasses}\">`;\r\n        l.forEach(token => {\r\n            const cssDeclarations = [`color: ${token.color || options.fg}`];\r\n            if (token.fontStyle & FontStyle.Italic) {\r\n                cssDeclarations.push('font-style: italic');\r\n            }\r\n            if (token.fontStyle & FontStyle.Bold) {\r\n                cssDeclarations.push('font-weight: bold');\r\n            }\r\n            if (token.fontStyle & FontStyle.Underline) {\r\n                cssDeclarations.push('text-decoration: underline');\r\n            }\r\n            html += `<span style=\"${cssDeclarations.join('; ')}\">${escapeHtml(token.content)}</span>`;\r\n        });\r\n        html += `</span>\\n`;\r\n    });\r\n    html = html.replace(/\\n*$/, ''); // Get rid of final new lines\r\n    html += `</code></pre>`;\r\n    return html;\r\n}\r\nconst htmlEscapes = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#39;'\r\n};\r\nfunction escapeHtml(html) {\r\n    return html.replace(/[&<>\"']/g, chr => htmlEscapes[chr]);\r\n}\r\nfunction getLineClasses(lineOptions) {\r\n    var _a;\r\n    const lineClasses = new Set(['line']);\r\n    for (const lineOption of lineOptions) {\r\n        for (const lineClass of (_a = lineOption.classes) !== null && _a !== void 0 ? _a : []) {\r\n            lineClasses.add(lineClass);\r\n        }\r\n    }\r\n    return Array.from(lineClasses);\r\n}\n\nclass Registry extends Registry$1 {\r\n    constructor(_resolver) {\r\n        super(_resolver);\r\n        this._resolver = _resolver;\r\n        this.themesPath = 'themes/';\r\n        this._resolvedThemes = {};\r\n        this._resolvedGrammars = {};\r\n    }\r\n    getTheme(theme) {\r\n        if (typeof theme === 'string') {\r\n            return this._resolvedThemes[theme];\r\n        }\r\n        else {\r\n            return theme;\r\n        }\r\n    }\r\n    async loadTheme(theme) {\r\n        if (typeof theme === 'string') {\r\n            if (!this._resolvedThemes[theme]) {\r\n                this._resolvedThemes[theme] = await fetchTheme(`${this.themesPath}${theme}.json`);\r\n            }\r\n            return this._resolvedThemes[theme];\r\n        }\r\n        else {\r\n            theme = toShikiTheme(theme);\r\n            if (theme.name) {\r\n                this._resolvedThemes[theme.name] = theme;\r\n            }\r\n            return theme;\r\n        }\r\n    }\r\n    async loadThemes(themes) {\r\n        return await Promise.all(themes.map(theme => this.loadTheme(theme)));\r\n    }\r\n    getLoadedThemes() {\r\n        return Object.keys(this._resolvedThemes);\r\n    }\r\n    getGrammar(name) {\r\n        return this._resolvedGrammars[name];\r\n    }\r\n    async loadLanguage(lang) {\r\n        const g = await this.loadGrammar(lang.scopeName);\r\n        this._resolvedGrammars[lang.id] = g;\r\n        if (lang.aliases) {\r\n            lang.aliases.forEach(la => {\r\n                this._resolvedGrammars[la] = g;\r\n            });\r\n        }\r\n    }\r\n    async loadLanguages(langs) {\r\n        for (const lang of langs) {\r\n            this._resolver.addLanguage(lang);\r\n        }\r\n        for (const lang of langs) {\r\n            await this.loadLanguage(lang);\r\n        }\r\n    }\r\n    getLoadedLanguages() {\r\n        return Object.keys(this._resolvedGrammars);\r\n    }\r\n}\n\nfunction resolveLang(lang) {\r\n    return typeof lang === 'string'\r\n        ? languages.find(l => { var _a; return l.id === lang || ((_a = l.aliases) === null || _a === void 0 ? void 0 : _a.includes(lang)); })\r\n        : lang;\r\n}\r\nfunction resolveOptions(options) {\r\n    var _a;\r\n    let _languages = languages;\r\n    let _themes = options.themes || [];\r\n    if ((_a = options.langs) === null || _a === void 0 ? void 0 : _a.length) {\r\n        _languages = options.langs.map(resolveLang);\r\n    }\r\n    if (options.theme) {\r\n        _themes.unshift(options.theme);\r\n    }\r\n    if (!_themes.length) {\r\n        _themes = ['nord'];\r\n    }\r\n    return { _languages, _themes };\r\n}\r\nasync function getHighlighter(options) {\r\n    var _a, _b;\r\n    const { _languages, _themes } = resolveOptions(options);\r\n    const _resolver = new Resolver(getOniguruma(), 'vscode-oniguruma');\r\n    const _registry = new Registry(_resolver);\r\n    if ((_a = options.paths) === null || _a === void 0 ? void 0 : _a.themes) {\r\n        _registry.themesPath = options.paths.themes;\r\n    }\r\n    if ((_b = options.paths) === null || _b === void 0 ? void 0 : _b.languages) {\r\n        _resolver.languagesPath = options.paths.languages;\r\n    }\r\n    const themes = await _registry.loadThemes(_themes);\r\n    const _defaultTheme = themes[0];\r\n    let _currentTheme;\r\n    await _registry.loadLanguages(_languages);\r\n    /**\r\n     * Shiki was designed for VS Code, so CSS variables are not currently supported.\r\n     * See: https://github.com/shikijs/shiki/pull/212#issuecomment-906924986\r\n     *\r\n     * Instead, we work around this by using valid hex color codes as lookups in a\r\n     * final \"repair\" step which translates those codes to the correct CSS variables.\r\n     */\r\n    const COLOR_REPLACEMENTS = {\r\n        '#000001': 'var(--shiki-color-text)',\r\n        '#000002': 'var(--shiki-color-background)',\r\n        '#000004': 'var(--shiki-token-constant)',\r\n        '#000005': 'var(--shiki-token-string)',\r\n        '#000006': 'var(--shiki-token-comment)',\r\n        '#000007': 'var(--shiki-token-keyword)',\r\n        '#000008': 'var(--shiki-token-parameter)',\r\n        '#000009': 'var(--shiki-token-function)',\r\n        '#000010': 'var(--shiki-token-string-expression)',\r\n        '#000011': 'var(--shiki-token-punctuation)',\r\n        '#000012': 'var(--shiki-token-link)'\r\n    };\r\n    function fixCssVariablesTheme(theme, colorMap) {\r\n        theme.bg = COLOR_REPLACEMENTS[theme.bg] || theme.bg;\r\n        theme.fg = COLOR_REPLACEMENTS[theme.fg] || theme.fg;\r\n        colorMap.forEach((val, i) => {\r\n            colorMap[i] = COLOR_REPLACEMENTS[val] || val;\r\n        });\r\n    }\r\n    function getTheme(theme) {\r\n        const _theme = theme ? _registry.getTheme(theme) : _defaultTheme;\r\n        if (!_theme) {\r\n            throw Error(`No theme registration for ${theme}`);\r\n        }\r\n        if (!_currentTheme || _currentTheme.name !== _theme.name) {\r\n            _registry.setTheme(_theme);\r\n            _currentTheme = _theme;\r\n        }\r\n        const _colorMap = _registry.getColorMap();\r\n        if (_theme.name === 'css-variables') {\r\n            fixCssVariablesTheme(_theme, _colorMap);\r\n        }\r\n        return { _theme, _colorMap };\r\n    }\r\n    function getGrammar(lang) {\r\n        const _grammar = _registry.getGrammar(lang);\r\n        if (!_grammar) {\r\n            throw Error(`No language registration for ${lang}`);\r\n        }\r\n        return { _grammar };\r\n    }\r\n    function codeToThemedTokens(code, lang = 'text', theme, options = { includeExplanation: true }) {\r\n        if (isPlaintext(lang)) {\r\n            const lines = code.split(/\\r\\n|\\r|\\n/);\r\n            return [...lines.map(line => [{ content: line }])];\r\n        }\r\n        const { _grammar } = getGrammar(lang);\r\n        const { _theme, _colorMap } = getTheme(theme);\r\n        return tokenizeWithTheme(_theme, _colorMap, code, _grammar, options);\r\n    }\r\n    function codeToHtml(code, arg1 = 'text', arg2) {\r\n        let options;\r\n        // codeToHtml(code, options?) overload\r\n        if (typeof arg1 === 'object') {\r\n            options = arg1;\r\n        }\r\n        // codeToHtml(code, lang?, theme?) overload\r\n        else {\r\n            options = {\r\n                lang: arg1,\r\n                theme: arg2\r\n            };\r\n        }\r\n        const tokens = codeToThemedTokens(code, options.lang, options.theme, {\r\n            includeExplanation: false\r\n        });\r\n        const { _theme } = getTheme(options.theme);\r\n        return renderToHtml(tokens, {\r\n            fg: _theme.fg,\r\n            bg: _theme.bg,\r\n            lineOptions: options === null || options === void 0 ? void 0 : options.lineOptions\r\n        });\r\n    }\r\n    async function loadTheme(theme) {\r\n        await _registry.loadTheme(theme);\r\n    }\r\n    async function loadLanguage(lang) {\r\n        const _lang = resolveLang(lang);\r\n        _resolver.addLanguage(_lang);\r\n        await _registry.loadLanguage(_lang);\r\n    }\r\n    function getLoadedThemes() {\r\n        return _registry.getLoadedThemes();\r\n    }\r\n    function getLoadedLanguages() {\r\n        return _registry.getLoadedLanguages();\r\n    }\r\n    function getBackgroundColor(theme) {\r\n        const { _theme } = getTheme(theme);\r\n        return _theme.bg;\r\n    }\r\n    function getForegroundColor(theme) {\r\n        const { _theme } = getTheme(theme);\r\n        return _theme.fg;\r\n    }\r\n    return {\r\n        codeToThemedTokens,\r\n        codeToHtml,\r\n        getTheme: (theme) => {\r\n            return getTheme(theme)._theme;\r\n        },\r\n        loadTheme,\r\n        loadLanguage,\r\n        getBackgroundColor,\r\n        getForegroundColor,\r\n        getLoadedThemes,\r\n        getLoadedLanguages\r\n    };\r\n}\r\nfunction isPlaintext(lang) {\r\n    return !lang || ['plaintext', 'txt', 'text'].includes(lang);\r\n}\n\n/** @deprecated use setWasm instead, will be removed in a future version */\r\nfunction setOnigasmWASM(path) {\r\n    setWasm(path);\r\n}\n\nexport { languages as BUNDLED_LANGUAGES, themes as BUNDLED_THEMES, FontStyle, getHighlighter, fetchTheme as loadTheme, renderToHtml, setCDN, setOnigasmWASM, setWasm, toShikiTheme };\n", "import { TwoslashError, TwoSlashReturn } from \"@typescript/twoslash\"\n\nexport const htmlForTags = (tags: TwoSlashReturn[\"tags\"]) => {\n  let html = \"\"\n  tags.forEach(t => {\n    if (t.name === \"annotate\" && t.annotation) {\n      const meta = t.annotation.split(\" - \")\n      const text = meta.pop()\n      const info = (meta[0] || \"\").trim()\n      const flipped = info.includes(\"right\")\n      let settings = {\n        flipped,\n        arrowRot: flipped ? \"90deg 20px 20px\" : \"90deg 20px 20px\",\n        textDegree: \"0deg\",\n        top: `${t.line}em`\n      }\n      \n      \n      if (info.includes(\"{\")) {\n        const theInfo =  \"{\" + info.split(\"{\")[1]\n        try {\n          const specificSettings = JSON.parse(theInfo)\n          settings = {...settings, ...specificSettings }\n        } catch (error) {\n          throw new TwoslashError(\"Could not parse annotation\", `The annotation ${JSON.stringify(t)} could convert '${theInfo}' into JSON`, `Look at ${(error as any).message}.`)\n        }\n      }\n      \n      const arrowSVG = arrow(settings)\n\n      html += `\n<div class='twoslash-annotation ${flipped ? \"right\" : \"left\"}' style=\"top: ${settings.top}\">\n  ${arrowSVG}\n  <p class='twoslash-annotation-text' style=\"transform: rotate(${settings.textDegree})\">${text}</p>\n</div>`\n    }\n  })\n\n  return html\n}\n\nconst arrow = (style: { flipped: boolean; arrowRot: string, textDegree: string, top: string }) => {\n  const leftInner = `M27 39C26.5 32.7511 21.9 17.5173 7.5 6.57333M16.5 4.04L0.999999 0.999998C3.16667 4.88444 7.5 13.16 7.5 15.1867`\n  const rightInner = `M1 39C1.5 32.7511 6.1 17.5173 20.5 6.57333M11.5 4.04L27 0.999998C24.8333 4.88444 20.5 13.16 20.5 15.1867`\n  const inner = style.flipped ? leftInner : rightInner\n  const rot = style.arrowRot.split(\" \")\n  return `<svg style='transform: translateX(${rot[1]}) translateY(${rot[2]}) rotate(${rot[0]});' width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"${inner}\" stroke=\"black\" />\n</svg>`\n}\n", "import type { parse } from \"fenceparser\"\n\nexport type Meta = NonNullable<ReturnType<typeof parse>>\n\ntype Range = {\n  begin: number\n  end: number\n  text?: string\n  count?: number\n  tooltip?: string[]\n  classes?: string\n  lsp?: string\n}\n\n/**\n * We're given the text which lives inside the token, and this function will\n * annotate it with twoslash metadata\n */\nexport function createHighlightedString(ranges: Range[], text: string, targetedWord: string = \"\") {\n  // Why the weird chars? We need to make sure that generic syntax isn't\n  // interpreted as html tags - to do that we need to switch out < to &lt; - *but*\n  // making that transition changes the indexes because it's gone from 1 char to 4 chars\n  //\n  // So, use an obscure character to indicate a real < for HTML, then switch it after\n  const tag = (x: string) => `â‡${x}â‡`\n  const makeTagFromRange = (r: Range, close?: true) => {\n    switch (r.classes) {\n      case \"lsp\":\n        // The LSP response lives inside a dom attribute, which _can_ have < inside it, so switch them ahead of time.\n        const lsp = htmlAttrReplacer(r.lsp || \"\")\n        const underLineTargetedWord = r.lsp === targetedWord ? \"style=â‡¯border-bottom: solid 2px lightgrey;â‡¯\" : \"\"\n        return close ? tag(\"/data-lsp\") : tag(`data-lsp lsp=Â¿${lsp}Â¿ ${underLineTargetedWord}`)\n      case \"query\":\n        return tag(`${close ? \"/\" : \"\"}data-highlight`)\n      // handle both unknown and err variant as error-tag\n      // case \"err\": is not required, just to be useful for others\n      case \"err\":\n      default:\n        return tag(`${close ? \"/\" : \"\"}data-err`)\n    }\n  }\n\n  ranges.sort((a, b) => {\n    // Order of precedence\n    // if two same offset meet, the lsp will be put as innermost than err and query\n    const precedenceOf = (x?: string) => [\"err\", \"query\", \"lsp\"].indexOf(x ?? \"\")\n\n    let cmp = 0\n    // Can be desugared into,\n    // 1. compare based on smaller begin, !(cmp) means if it's 0 then\n    // 2. compare based on bigger end, ^ same thing again then\n    // 3. compare based on higher precedence\n    // && is so that if a step made cmp to something other than 0, it stops\n    /***1*/ !(cmp = a.begin - b.begin) &&\n      /*2*/ !(cmp = b.end - a.end) &&\n      /*3*/ !(cmp = precedenceOf(a.classes) - precedenceOf(b.classes))\n    return cmp\n  }) // `Array.sort` works in place\n\n  // Marks how much of the text has been put into the output/html\n  let cursor = 0\n  // should be maximum of O(n) where n is length of ranges\n  const nest = (data: typeof ranges) => {\n    let stack = \"\"\n    const top = data.shift()! // I have made sure data can't be empty\n\n    // parse from cursor to top.begin to make sure\n    // strings on the way are parsed\n    stack += text.substring(cursor, top.begin)\n    cursor = top.begin\n\n    // open tag\n    stack += makeTagFromRange(top)\n\n    // if the data still have an element that's in the top's range\n    if (data.some(x => x.begin < top.end)) {\n      stack += nest(data)\n    } else {\n      // othewise slice the text and set cursor\n      stack += text.substring(top.begin, top.end)\n      cursor = top.end\n    }\n\n    // close tag\n    stack += makeTagFromRange(top, true)\n\n    // if the tag is complete but still have some data left in the range\n    if (data.length !== 0) {\n      stack += nest(data)\n    }\n\n    return stack\n  }\n\n  // cloned because I don't feel comfortable modifying this as a side-effect from recursion\n  const data = JSON.parse(JSON.stringify(ranges))\n  const html = nest(data) + text.substring(cursor) // nested + leftover texts\n\n  return htmlAttrUnReplacer(replaceTripleArrow(stripHTML(html)))\n}\n\n// HTML attributes have different rules,\nconst htmlAttrReplacer = (str: string) => str.replace(/\"/g, \"âƒŸ\")\nconst htmlAttrUnReplacer = (str: string) => str.replace(/âƒŸ/g, '\"')\n\n// Inline strings which are shown at HTML level\nexport const subTripleArrow = (str: string) => str.replace(/</g, \"â‡\").replace(/>/g, \"â‡\").replace(/'/g, \"â‡¯\")\nexport const replaceTripleArrow = (str: string) =>\n  str.replace(/â‡/g, \"<\").replace(/â‡/g, \">\").replace(/â‡¯/g, \"'\").replace(/Â¿/g, \"'\")\nexport const replaceTripleArrowEncoded = (str: string) =>\n  str.replace(/â‡/g, \"&lt;\").replace(/â‡/g, \"&gt;\").replace(/â‡¯/g, \"&apos;\")\n\nexport function stripHTML(text: string) {\n  var table: any = {\n    \"<\": \"lt\",\n    '\"': \"quot\",\n    \"'\": \"apos\",\n    \"&\": \"amp\",\n    \"\\r\": \"#13\",\n    \"\\n\": \"#10\",\n  }\n\n  return text.toString().replace(/[<\"'\\r\\n&]/g, function (chr) {\n    return \"&\" + table[chr] + \";\"\n  })\n}\n\nexport function escapeHtml(html: string) {\n  return html.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")\n}\n\n/** Does anything in the object imply that we should highlight any lines? */\nexport const shouldBeHighlightable = (highlight: any) => {\n  return !!Object.keys(highlight || {}).find(key => {\n    if (key.includes(\"-\")) return true\n    if (!isNaN(parseInt(key))) return true\n    return false\n  })\n}\n\n/** Returns a func for figuring out if this line should be highlighted */\nexport const shouldHighlightLine = (highlight: any) => {\n  const lines: number[] = []\n  Object.keys(highlight || {}).find(key => {\n    if (!isNaN(parseInt(key))) lines.push(parseInt(key))\n    if (key.includes(\"-\")) {\n      const [first, last] = key.split(\"-\")\n      const lastIndex = parseInt(last) + 1\n      for (let i = parseInt(first); i < lastIndex; i++) {\n        lines.push(i)\n      }\n    }\n  })\n\n  return (line: number) => lines.includes(line)\n}\n", "import { escapeHtml, Meta } from \"../utils\"\n\n// C&P'd from shiki\nexport interface HtmlRendererOptions {\n  langId?: string\n  fg?: string\n  bg?: string\n  themeName?: string\n}\n\n/** A func for setting a consistent <pre> */\nexport const preOpenerFromRenderingOptsWithExtras = (opts: HtmlRendererOptions, meta: Meta, classes?: string[]) => {\n  const bg = opts.bg || \"#fff\"\n  const fg = opts.fg || \"black\"\n  const theme = opts.themeName || \"\"\n\n  // shiki + `class` from fence + with-title if title exists + classes\n  const classList = [\"shiki\", theme, meta.class, meta.title ? \"with-title\" : \"\", ...(classes || [])]\n    .filter(Boolean)\n    .join(\" \")\n    .trim()\n\n  const attributes = Object.entries(meta)\n    .filter(entry => {\n      // exclude types other than string, number, boolean\n      // exclude keys class, twoslash\n      // exclude falsy booleans\n      return (\n        [\"string\", \"number\", \"boolean\"].includes(typeof entry[1]) &&\n        ![\"class\", \"twoslash\"].includes(entry[0]) &&\n        entry[1] !== false\n      )\n    })\n    .map(([key, value]) => `${key}=\"${value}\"`)\n    .join(\" \")\n    .trim()\n\n  // prettier-ignore\n  return `<pre class=\"${classList}\" style=\"background-color: ${bg}; color: ${fg}\"${attributes ? ` ${attributes}`: ''}>`\n}\n\n/** You don't have a language which shiki twoslash can handle, make a DOM compatible version  */\nexport function plainTextRenderer(code: string, options: HtmlRendererOptions, meta: Meta) {\n  let html = \"\"\n\n  html += preOpenerFromRenderingOptsWithExtras(options, meta, [])\n  if (meta.title) {\n    html += `<div class='code-title'>${meta.title}</div>`\n  }\n\n  if (options.langId) {\n    html += `<div class=\"language-id\">${options.langId}</div>`\n  }\n\n  html += `<div class='code-container'><code>`\n  html += escapeHtml(code)\n\n  html = html.replace(/\\n*$/, \"\") // Get rid of final new lines\n  html += `</code></div></pre>`\n  return html\n}\n", "type Lines = import(\"shiki\").IThemedToken[][]\ntype TwoSlash = import(\"@typescript/twoslash\").TwoSlashReturn\n\nimport { TwoslashShikiOptions } from \"..\"\nimport { htmlForTags } from \"../annotations\"\nimport {\n  shouldBeHighlightable,\n  shouldHighlightLine,\n  createHighlightedString,\n  subTripleArrow,\n  replaceTripleArrowEncoded,\n  escapeHtml,\n  Meta,\n} from \"../utils\"\nimport { HtmlRendererOptions, preOpenerFromRenderingOptsWithExtras } from \"./plain\"\n\n// OK, so - this is just straight up complex code.\n\n// What we're trying to do is merge two sets of information into a single tree for HTML\n\n// 1: Syntax highlight info from shiki\n// 2: Twoslash metadata like errors, identifiers etc\n\n// Because shiki gives use a set of lines to work from, then the first thing which happens\n// is converting twoslash data into the same format.\n\n// Things which make it hard:\n//\n// - Twoslash results can be cut, so sometimes there is edge cases between twoslash results\n// - Twoslash results can be multi-file\n// - the DOM requires a flattened graph of html elements (e.g. spans can' be interspersed)\n//\n\nexport function twoslashRenderer(lines: Lines, options: HtmlRendererOptions & TwoslashShikiOptions, twoslash: TwoSlash, meta: Meta) {\n  let html = \"\"\n\n  const hasHighlight = meta.highlight && shouldBeHighlightable(meta.highlight)\n  const hl = shouldHighlightLine(meta.highlight)\n\n  if (twoslash.tags && twoslash.tags.length) html += \"<div class='tag-container'>\"\n  \n  html += preOpenerFromRenderingOptsWithExtras(options, meta, [\"twoslash\", \"lsp\"])\n  if (meta.title) {\n    html += `<div class='code-title'>${meta.title}</div>`\n  }\n\n  if (options.langId) {\n    html += `<div class=\"language-id\">${options.langId}</div>`\n  }\n\n  html += `<div class='code-container'><code>`\n\n  const errorsGroupedByLine = groupBy(twoslash.errors, e => e.line) || new Map()\n  const staticQuickInfosGroupedByLine = groupBy(twoslash.staticQuickInfos, q => q.line) || new Map()\n  // A query is always about the line above it!\n  const queriesGroupedByLine = groupBy(twoslash.queries, q => q.line - 1) || new Map()\n  const tagsGroupedByLine = groupBy(twoslash.tags, q => q.line - 1) || new Map()\n\n  /**\n   * This is the index of the original twoslash code reference, it is not\n   * related to the HTML output\n   */\n  let filePos = 0\n\n  lines.forEach((l, i) => {\n    const errors = errorsGroupedByLine.get(i) || []\n    const lspValues = staticQuickInfosGroupedByLine.get(i) || []\n    const queries = queriesGroupedByLine.get(i) || []\n    const tags = tagsGroupedByLine.get(i) || []\n\n    const hiClass = hasHighlight ? (hl(i + 1) ? \" highlight\" : \" dim\") : \"\"\n    const prefix = `<div class='line${hiClass}'>`\n\n    if (l.length === 0 && i === 0) {\n      // Skip the first newline if it's blank\n      filePos += 1\n    } else if (l.length === 0) {\n      const emptyLine = `${prefix}&nbsp;</div>` \n      html += emptyLine\n      filePos += 1\n    } else {\n      html += prefix\n\n      // Keep track of the position of the current token in a line so we can match it up to the\n      // errors and lang serv identifiers\n      let tokenPos = 0\n\n      l.forEach(token => {\n        let targetedQueryWord: typeof twoslash.staticQuickInfos[number] | undefined\n\n        let tokenContent = \"\"\n        // Underlining particular words\n        const findTokenFunc = (start: number) => (e: any) =>\n          start <= e.character && start + token.content.length >= e.character + e.length\n\n        const findTokenDebug = (start: number) => (e: any) => {\n          const result = start <= e.character && start + token.content.length >= e.character + e.length\n          // prettier-ignore\n          console.log(result, start, '<=', e.character, '&&', start + token.content.length, '>=', e.character + e.length)\n          if (result) {\n            console.log(\"Found:\", e)\n            console.log(\"Inside:\", token)\n          }\n          return result\n        }\n\n        const errorsInToken = errors.filter(findTokenFunc(tokenPos))\n        const lspResponsesInToken = lspValues.filter(findTokenFunc(tokenPos))\n        const queriesInToken = queries.filter(findTokenFunc(tokenPos))\n\n        // Does this line have a word targeted by a query?\n        targetedQueryWord = targetedQueryWord || lspResponsesInToken.find(response => response.text === (queries.length && queries[0].text))!\n\n        const allTokens = [...errorsInToken, ...lspResponsesInToken, ...queriesInToken]\n        const allTokensByStart = allTokens.sort((l, r) => {\n          return (l.start || 0) - (r.start || 0)\n        })\n\n        if (allTokensByStart.length) {\n          const ranges = allTokensByStart.map(token => {\n            const range: any = {\n              begin: token.start! - filePos,\n              end: token.start! + token.length! - filePos,\n            }\n\n            // prettier-ignore\n            if (range.begin < 0 || range.end < 0) {\n              // prettier-ignore\n              // throw new Error(`The begin range of a token is at a minus location, filePos:${filePos} current token: ${JSON.stringify(token, null, '  ')}\\n result: ${JSON.stringify(range, null, '  ')}`)\n            }\n\n            if (\"renderedMessage\" in token) range.classes = \"err\"\n            if (\"kind\" in token) range.classes = token.kind\n            if (\"targetString\" in token) {\n              range.classes = \"lsp\"\n              const lspText = options.includeJSDocInHover && token.docs ? `${token.docs}\\n\\n${token.text}` : token.text\n              range[\"lsp\"] = lspText\n            }\n            return range\n          })\n\n          tokenContent += createHighlightedString(ranges, token.content, targetedQueryWord?.text)\n        } else {\n          tokenContent += subTripleArrow(token.content)\n        }\n\n        html += `<span style=\"color: ${token.color}\">${tokenContent}</span>`\n        tokenPos += token.content.length\n        filePos += token.content.length\n      })\n\n      html += `</div>`\n      // This is the \\n which the </div> represents\n      filePos += 1\n    }\n\n    // Adding error messages to the line after\n    if (errors.length) {\n      const messages = errors.map(e => escapeHtml(e.renderedMessage)).join(\"</br>\")\n      const codes = errors.map(e => e.code).join(\"<br/>\")\n      html += `<span class=\"error\"><span>${messages}</span><span class=\"code\">${codes}</span></span>`\n      html += `<span class=\"error-behind\">${messages}</span>`\n    }\n\n    // Add queries to the next line\n    if (queries.length) {\n      queries.forEach(query => {\n        // This is used to wrap popovers and completions to improve styling options for users.\n        html += `<div class='meta-line'>`\n\n        switch (query.kind) {\n          case \"query\": {\n            const queryTextWithPrefix = escapeHtml(query.text!)\n            const lspValues = staticQuickInfosGroupedByLine.get(i) || []\n            const targetedWord = lspValues.find(response => response.text === (queries.length && queries[0].text))!\n            const halfWayAcrossTheTargetedWord = ((targetedWord && targetedWord.character + targetedWord?.length / 2) - 1) || 0\n            html +=\n              `<span class='popover-prefix'>` +\n              \" \".repeat(halfWayAcrossTheTargetedWord) +\n              \"</span>\" +\n              `<span class='popover'><div class='arrow'></div>${queryTextWithPrefix}</span>`\n            break\n          }\n\n          case \"completions\": {\n            if (!query.completions) {\n              html += `<span class='query'>${\"//\" + \"\".padStart(query.offset - 2) + \"^ - No completions found\"}</span>`\n            } else {\n              const prefixed = query.completions.filter(c => c.name.startsWith(query.completionsPrefix || \"____\"))\n\n              const lis = prefixed\n                .sort((l, r) => l.name.localeCompare(r.name))\n                .map(c => {\n                  const after = c.name.substr(query.completionsPrefix?.length || 0)\n                  const name = `<span><span class='result-found'>${query.completionsPrefix || \"\"}</span>${after}</span>`\n                  const isDeprecated = c.kindModifiers?.split(\",\").includes(\"deprecated\")\n                  const liClass = isDeprecated ? \"deprecated\" : \"\"\n                  return `<li class='${liClass}'>${name}</li>`\n                })\n                .join(\"\")\n              html += `${\"&nbsp;\".repeat(query.offset)}<span class='inline-completions'><ul class='dropdown'>${lis}</ul></span>`\n            }\n          }\n        }\n        html += \"</div>\"\n      })\n    }\n\n    // Any tags (currently that's warn/error/log)\n    if (tags.length) {\n      tags.forEach(tag => {\n          if(![\"error\", \"warn\", \"log\"].includes(tag.name)) return\n\n          // This is used to wrap popovers and completions to improve styling options for users.\n          html += `<div class='meta-line logger ${tag.name}-log'>`\n          switch(tag.name) {\n            case \"error\": html += `${errorSVG}<span class='message'>${tag.annotation || \"N/A\"}</span>`; break;\n            case \"warn\": html += `${warningSVG}<span class='message'>${tag.annotation || \"N/A\"}</span>`; break;\n            case \"log\": html += `${logSVG}<span class='message'>${tag.annotation || \"N/A\"}</span>`; break;\n          }\n          html += \"</div>\"\n      })\n    }\n  })\n  html = replaceTripleArrowEncoded(html.replace(/\\n*$/, \"\")) // Get rid of final new lines\n\n  if (options.addTryButton) {\n    const playgroundLink = `<a class='playground-link' href='${twoslash.playgroundURL}'>Try</a>`\n    html += `</code>${playgroundLink}`\n  } else {\n    html += `</code>`\n  }\n\n  html += `</div></pre>`\n\n  // Attach annotations which live above of the code\n  if (twoslash.tags && twoslash.tags.length) {\n    html += htmlForTags(twoslash.tags)\n    html += \"</div>\"\n  }\n\n  return html\n}\n\n/** Returns a map where all the keys are the value in keyGetter  */\nfunction groupBy<T>(list: T[], keyGetter: (obj: any) => number) {\n  const map = new Map<number, T[]>()\n  list.forEach(item => {\n    const key = keyGetter(item)\n    const collection = map.get(key)\n    if (!collection) {\n      map.set(key, [item])\n    } else {\n      collection.push(item)\n    }\n  })\n  return map\n}\n\n\nconst errorSVG = `<svg width=\"19\" height=\"19\" viewBox=\"0 0 19 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.63018 1.29289L1.29289 4.63018C1.10536 4.81772 1 5.07207 1 5.33729V13.6627C1 13.9279 1.10536 14.1823 1.29289 14.3698L4.63018 17.7071C4.81772 17.8946 5.07207 18 5.33729 18H13.6627C13.9279 18 14.1823 17.8946 14.3698 17.7071L17.7071 14.3698C17.8946 14.1823 18 13.9279 18 13.6627V5.33729C18 5.07207 17.8946 4.81772 17.7071 4.63018L14.3698 1.29289C14.1823 1.10536 13.9279 1 13.6627 1H5.33729C5.07207 1 4.81772 1.10536 4.63018 1.29289Z\" fill=\"#E72622\" stroke=\"#E72622\"/><rect x=\"8\" y=\"4\" width=\"3\" height=\"7\" fill=\"white\"/><rect x=\"8\" y=\"13\" width=\"3\" height=\"3\" fill=\"white\"/></svg>`\nconst warningSVG = `<svg width=\"21\" height=\"18\" viewBox=\"0 0 21 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.63401 0.5C10.0189 -0.166667 10.9812 -0.166667 11.3661 0.5L20.4593 16.25C20.8442 16.9167 20.3631 17.75 19.5933 17.75H1.40676C0.636965 17.75 0.15584 16.9167 0.54074 16.25L9.63401 0.5Z\" fill=\"#E5A604\"/><rect x=\"9\" y=\"4\" width=\"3\" height=\"7\" fill=\"white\"/><rect x=\"9\" y=\"13\" width=\"3\" height=\"3\" fill=\"white\"/></svg>`\nconst logSVG = `<svg width=\"12\" height=\"15\" viewBox=\"0 0 12 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M5.76822 0.359816C5.41466 -0.0644613 4.78409 -0.121785 4.35982 0.231779C3.93554 0.585343 3.87821 1.21591 4.23178 1.64018L5.76822 0.359816ZM10 7L10.7926 7.60971L11.2809 6.97499L10.7682 6.35982L10 7ZM4.20738 12.8903C3.87064 13.328 3.95254 13.9559 4.39029 14.2926C4.82804 14.6294 5.45589 14.5475 5.79262 14.1097L4.20738 12.8903ZM4.23178 1.64018L9.23178 7.64018L10.7682 6.35982L5.76822 0.359816L4.23178 1.64018ZM9.20738 6.39029L4.20738 12.8903L5.79262 14.1097L10.7926 7.60971L9.20738 6.39029Z\" fill=\"#BDBDBD\"/><line y1=\"3.5\" x2=\"4\" y2=\"3.5\" stroke=\"#BDBDBD\"/><path d=\"M0 7H4\" stroke=\"#BDBDBD\"/><line y1=\"10.5\" x2=\"4\" y2=\"10.5\" stroke=\"#BDBDBD\"/></svg>`", "import { shouldBeHighlightable, shouldHighlightLine, escapeHtml, Meta } from \"../utils\"\nimport { HtmlRendererOptions, preOpenerFromRenderingOptsWithExtras } from \"./plain\"\n\ntype Lines = import(\"shiki\").IThemedToken[][]\n\nexport function defaultShikiRenderer(lines: Lines, options: HtmlRendererOptions, meta: Meta) {\n  let html = \"\"\n\n  const hasHighlight = meta.highlight && shouldBeHighlightable(meta.highlight)\n  const hl = shouldHighlightLine(meta.highlight)\n\n  html += preOpenerFromRenderingOptsWithExtras(options, meta, [])\n  if (meta.title) {\n    html += `<div class='code-title'>${meta.title}</div>`\n  }\n\n  if (options.langId) {\n    html += `<div class=\"language-id\">${options.langId}</div>`\n  }\n\n  html += `<div class='code-container'><code>`\n\n  lines.forEach((l, i) => {\n    if (l.length === 0) {\n      html += `<div class='line'></div>`\n    } else {\n      const hiClass = hasHighlight ? (hl(i) ? \" highlight\" : \" dim\") : \"\"\n      const prefix = `<div class='line${hiClass}'>`\n      html += prefix\n\n      l.forEach(token => {\n        html += `<span style=\"color: ${token.color}\">${escapeHtml(token.content)}</span>`\n      })\n      html += `</div>`\n    }\n  })\n\n  html = html.replace(/\\n*$/, \"\") // Get rid of final new lines\n  html += `</code></div></pre>`\n  return html\n}\n", "export const tsconfig = {\n  compilerOptions: `The set of compiler options for your project`,\n  allowArbitraryExtensions: `Enable importing files with any extension, provided a declaration file is present.`,\n  allowImportingTsExtensions: `Allow imports to include TypeScript file extensions.`,\n  allowJs: `Allow JavaScript files to be a part of your program. Use the \\`checkJS\\` option to get errors from these files.`,\n  allowSyntheticDefaultImports: `Allow 'import x from y' when a module doesn't have a default export.`,\n  allowUmdGlobalAccess: `Allow accessing UMD globals from modules.`,\n  allowUnreachableCode: `Disable error reporting for unreachable code.`,\n  allowUnusedLabels: `Disable error reporting for unused labels.`,\n  alwaysStrict: `Ensure 'use strict' is always emitted.`,\n  assumeChangesOnlyAffectDirectDependencies: `Have recompiles in projects that use [\\`incremental\\`](#incremental) and \\`watch\\` mode assume that changes within a file will only affect files directly depending on it.`,\n  baseUrl: `Specify the base directory to resolve non-relative module names.`,\n  charset: `No longer supported. In early versions, manually set the text encoding for reading files.`,\n  checkJs: `Enable error reporting in type-checked JavaScript files.`,\n  clean: `Delete the outputs of all projects.`,\n  composite: `Enable constraints that allow a TypeScript project to be used with project references.`,\n  customConditions: `Conditions to set in addition to the resolver-specific defaults when resolving imports.`,\n  declaration: `Generate .d.ts files from TypeScript and JavaScript files in your project.`,\n  declarationDir: `Specify the output directory for generated declaration files.`,\n  declarationMap: `Create sourcemaps for d.ts files.`,\n  diagnostics: `Output compiler performance information after building.`,\n  disableFilenameBasedTypeAcquisition: `Disables inference for type acquisition by looking at filenames in a project.`,\n  disableReferencedProjectLoad: `Reduce the number of projects loaded automatically by TypeScript.`,\n  disableSizeLimit: `Remove the 20mb cap on total source code size for JavaScript files in the TypeScript language server.`,\n  disableSolutionSearching: `Opt a project out of multi-project reference checking when editing.`,\n  disableSourceOfProjectReferenceRedirect: `Disable preferring source files instead of declaration files when referencing composite projects.`,\n  downlevelIteration: `Emit more compliant, but verbose and less performant JavaScript for iteration.`,\n  emitBOM: `Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files.`,\n  emitDeclarationOnly: `Only output d.ts files and not JavaScript files.`,\n  emitDecoratorMetadata: `Emit design-type metadata for decorated declarations in source files.`,\n  enable: `Disable the type acquisition for JavaScript projects.`,\n  esModuleInterop: `Emit additional JavaScript to ease support for importing CommonJS modules. This enables [\\`allowSyntheticDefaultImports\\`](#allowSyntheticDefaultImports) for type compatibility.`,\n  exactOptionalPropertyTypes: `Interpret optional property types as written, rather than adding \\`undefined\\`.`,\n  exclude: `Filters results from the [\\`include\\`](#include) option.`,\n  excludeDirectories: `Remove a list of directories from the watch process.`,\n  excludeFiles: `Remove a list of files from the watch mode's processing.`,\n  experimentalDecorators: `Enable experimental support for TC39 stage 2 draft decorators.`,\n  explainFiles: `Print files read during the compilation including why it was included.`,\n  extendedDiagnostics: `Output more detailed compiler performance information after building.`,\n  extends: `Specify one or more path or node module references to base configuration files from which settings are inherited.`,\n  fallbackPolling: `Specify what approach the watcher should use if the system runs out of native file watchers.`,\n  files: `Include a list of files. This does not support glob patterns, as opposed to [\\`include\\`](#include).`,\n  force: `Build all projects, including those that appear to be up to date.`,\n  forceConsistentCasingInFileNames: `Ensure that casing is correct in imports.`,\n  generateCpuProfile: `Emit a v8 CPU profile of the compiler run for debugging.`,\n  importHelpers: `Allow importing helper functions from tslib once per project, instead of including them per-file.`,\n  importsNotUsedAsValues: `Specify emit/checking behavior for imports that are only used for types.`,\n  include: `Specify a list of glob patterns that match files to be included in compilation.`,\n  incremental: `Save .tsbuildinfo files to allow for incremental compilation of projects.`,\n  inlineSourceMap: `Include sourcemap files inside the emitted JavaScript.`,\n  inlineSources: `Include source code in the sourcemaps inside the emitted JavaScript.`,\n  isolatedModules: `Ensure that each file can be safely transpiled without relying on other imports.`,\n  jsx: `Specify what JSX code is generated.`,\n  jsxFactory: `Specify the JSX factory function used when targeting React JSX emit, e.g. 'React.createElement' or 'h'.`,\n  jsxFragmentFactory: `Specify the JSX Fragment reference used for fragments when targeting React JSX emit e.g. 'React.Fragment' or 'Fragment'.`,\n  jsxImportSource: `Specify module specifier used to import the JSX factory functions when using \\`jsx: react-jsx*\\`.`,\n  keyofStringsOnly: `Make keyof only return strings instead of string, numbers or symbols. Legacy option.`,\n  lib: `Specify a set of bundled library declaration files that describe the target runtime environment.`,\n  listEmittedFiles: `Print the names of emitted files after a compilation.`,\n  listFiles: `Print all of the files read during the compilation.`,\n  locale: `Set the language of the messaging from TypeScript. This does not affect emit.`,\n  mapRoot: `Specify the location where debugger should locate map files instead of generated locations.`,\n  maxNodeModuleJsDepth: `Specify the maximum folder depth used for checking JavaScript files from \\`node_modules\\`. Only applicable with [\\`allowJs\\`](#allowJs).`,\n  module: `Specify what module code is generated.`,\n  moduleDetection: `Control what method is used to detect the whether a JS file is a module.`,\n  moduleResolution: `Specify how TypeScript looks up a file from a given module specifier.`,\n  moduleSuffixes: `List of file name suffixes to search when resolving a module.`,\n  newLine: `Set the newline character for emitting files.`,\n  noEmit: `Disable emitting files from a compilation.`,\n  noEmitHelpers: `Disable generating custom helper functions like \\`__extends\\` in compiled output.`,\n  noEmitOnError: `Disable emitting files if any type checking errors are reported.`,\n  noErrorTruncation: `Disable truncating types in error messages.`,\n  noFallthroughCasesInSwitch: `Enable error reporting for fallthrough cases in switch statements.`,\n  noImplicitAny: `Enable error reporting for expressions and declarations with an implied \\`any\\` type.`,\n  noImplicitOverride: `Ensure overriding members in derived classes are marked with an override modifier.`,\n  noImplicitReturns: `Enable error reporting for codepaths that do not explicitly return in a function.`,\n  noImplicitThis: `Enable error reporting when \\`this\\` is given the type \\`any\\`.`,\n  noImplicitUseStrict: `Disable adding 'use strict' directives in emitted JavaScript files.`,\n  noLib: `Disable including any library files, including the default lib.d.ts.`,\n  noPropertyAccessFromIndexSignature: `Enforces using indexed accessors for keys declared using an indexed type.`,\n  noResolve: `Disallow \\`import\\`s, \\`require\\`s or \\`<reference>\\`s from expanding the number of files TypeScript should add to a project.`,\n  noStrictGenericChecks: `Disable strict checking of generic signatures in function types.`,\n  noUncheckedIndexedAccess: `Add \\`undefined\\` to a type when accessed using an index.`,\n  noUnusedLocals: `Enable error reporting when local variables aren't read.`,\n  noUnusedParameters: `Raise an error when a function parameter isn't read.`,\n  out: `Deprecated setting. Use [\\`outFile\\`](#outFile) instead.`,\n  outDir: `Specify an output folder for all emitted files.`,\n  outFile: `Specify a file that bundles all outputs into one JavaScript file. If [\\`declaration\\`](#declaration) is true, also designates a file that bundles all .d.ts output.`,\n  paths: `Specify a set of entries that re-map imports to additional lookup locations.`,\n  plugins: `Specify a list of language service plugins to include.`,\n  preserveConstEnums: `Disable erasing \\`const enum\\` declarations in generated code.`,\n  preserveSymlinks: `Disable resolving symlinks to their realpath. This correlates to the same flag in node.`,\n  preserveValueImports: `Preserve unused imported values in the JavaScript output that would otherwise be removed.`,\n  preserveWatchOutput: `Disable wiping the console in watch mode.`,\n  pretty: `Enable color and formatting in TypeScript's output to make compiler errors easier to read.`,\n  reactNamespace: `Specify the object invoked for \\`createElement\\`. This only applies when targeting \\`react\\` JSX emit.`,\n  references: `Specify an array of objects that specify paths for projects. Used in project references.`,\n  removeComments: `Disable emitting comments.`,\n  resolveJsonModule: `Enable importing .json files.`,\n  resolvePackageJsonExports: `Use the package.json 'exports' field when resolving package imports.`,\n  resolvePackageJsonImports: `Use the package.json 'imports' field when resolving imports.`,\n  rootDir: `Specify the root folder within your source files.`,\n  rootDirs: `Allow multiple folders to be treated as one when resolving modules.`,\n  skipDefaultLibCheck: `Skip type checking .d.ts files that are included with TypeScript.`,\n  skipLibCheck: `Skip type checking all .d.ts files.`,\n  sourceMap: `Create source map files for emitted JavaScript files.`,\n  sourceRoot: `Specify the root path for debuggers to find the reference source code.`,\n  strict: `Enable all strict type-checking options.`,\n  strictBindCallApply: `Check that the arguments for \\`bind\\`, \\`call\\`, and \\`apply\\` methods match the original function.`,\n  strictFunctionTypes: `When assigning functions, check to ensure parameters and the return values are subtype-compatible.`,\n  strictNullChecks: `When type checking, take into account \\`null\\` and \\`undefined\\`.`,\n  strictPropertyInitialization: `Check for class properties that are declared but not set in the constructor.`,\n  stripInternal: `Disable emitting declarations that have \\`@internal\\` in their JSDoc comments.`,\n  suppressExcessPropertyErrors: `Disable reporting of excess property errors during the creation of object literals.`,\n  suppressImplicitAnyIndexErrors: `Suppress [\\`noImplicitAny\\`](#noImplicitAny) errors when indexing objects that lack index signatures.`,\n  synchronousWatchDirectory: `Synchronously call callbacks and update the state of directory watchers on platforms that don\\`t support recursive watching natively.`,\n  target: `Set the JavaScript language version for emitted JavaScript and include compatible library declarations.`,\n  traceResolution: `Log paths used during the [\\`moduleResolution\\`](#moduleResolution) process.`,\n  tsBuildInfoFile: `Specify the folder for .tsbuildinfo incremental compilation files.`,\n  typeAcquisition: `Specify options for automatic acquisition of declaration files.`,\n  typeRoots: `Specify multiple folders that act like \\`./node_modules/@types\\`.`,\n  types: `Specify type package names to be included without being referenced in a source file.`,\n  useDefineForClassFields: `Emit ECMAScript-standard-compliant class fields.`,\n  useUnknownInCatchVariables: `Default catch clause variables as \\`unknown\\` instead of \\`any\\`.`,\n  verbatimModuleSyntax: `Do not transform or elide any imports or exports not marked as type-only, ensuring they are written in the output file's format based on the 'module' setting.`,\n  verbose: `Enable verbose logging.`,\n  watchDirectory: `Specify how directories are watched on systems that lack recursive file-watching functionality.`,\n  watchFile: `Specify how the TypeScript watch mode works.`,\n};\n", "type Lines = import(\"shiki\").IThemedToken[][]\n\nimport type { IThemedToken } from \"shiki\"\nimport { escapeHtml, Meta } from \"../utils\"\nimport { tsconfig } from \"../tsconfig-oneliners.generated\"\nimport { HtmlRendererOptions, preOpenerFromRenderingOptsWithExtras } from \"./plain\"\n\n/** Uses tmLanguage scopes to determine what the content of the token is */\nconst tokenIsJSONKey = (token: IThemedToken) => {\n  if (!token.explanation) return false\n  return token.explanation.find(e => e.scopes.find(s => s.scopeName.includes(\"support.type.property-name\")))\n}\n\n/** Can you look up the token in the tsconfig reference? */\nconst isKeyInTSConfig = (token: IThemedToken) => {\n  if (token.content === '\"') return\n  const name = token.content.slice(1, token.content.length - 1)\n  return name in tsconfig\n}\n\n/**\n * Renders a TSConfig JSON object with additional LSP-ish information\n * @param lines the result of shiki highlighting\n * @param options shiki display options\n */\nexport function tsconfigJSONRenderer(lines: Lines, options: HtmlRendererOptions, meta: Meta) {\n  let html = \"\"\n\n  html += preOpenerFromRenderingOptsWithExtras(options, meta, [\"tsconfig\", \"lsp\"])\n  if (meta.title) {\n    html += `<div class=\"code-title\">${meta.title}</div>`\n  }\n\n  if (options.langId) {\n    html += `<div class=\"language-id\">${options.langId}</div>`\n  }\n\n  html += `<div class='code-container'><code>`\n\n  lines.forEach(l => {\n    if (l.length === 0) {\n      html += `<div class='line'></div>`\n    } else {\n      html += `<div class='line'>`\n      l.forEach(token => {\n        // This means we're looking at a token which could be '\"module\"', '\"', '\"compilerOptions\"' etc\n        if (tokenIsJSONKey(token) && isKeyInTSConfig(token)) {\n          const key = token.content.slice(1, token.content.length - 1)\n          const oneliner = (tsconfig as Record<string, string>)[key]\n          // prettier-ignore\n          html += `<span style=\"color: ${token.color}\">\"<a aria-hidden=true tabindex=\"-1\" href='https://www.typescriptlang.org/tsconfig#${key}'><data-lsp lsp=\"${oneliner}\">${escapeHtml(key)}</data-lsp></a>\"</span>`\n        } else {\n          html += `<span style=\"color: ${token.color}\">${escapeHtml(token.content)}</span>`\n        }\n      })\n      html += `</div>`\n    }\n  })\n\n  html = html.replace(/\\n*$/, \"\") // Get rid of final new lines\n  html += `</code></div></pre>`\n  return html\n}\n", "import { getHighlighter, Highlighter, HighlighterOptions, IThemedToken } from \"shiki\"\nimport { twoslasher, TwoSlashOptions, TwoSlashReturn } from \"@typescript/twoslash\"\nimport { twoslashRenderer } from \"./renderers/twoslash\"\nimport { HtmlRendererOptions, plainTextRenderer } from \"./renderers/plain\"\nimport { defaultShikiRenderer } from \"./renderers/shiki\"\nimport { tsconfigJSONRenderer } from \"./renderers/tsconfig\"\nimport { Meta } from \"./utils\"\n\nexport interface TwoslashShikiOptions {\n  /** A way to turn on the try buttons seen on the TS website */\n  addTryButton?: true\n  /** A way to disable implicit React imports on tsx/jsx language codeblocks */\n  disableImplicitReactImport?: true\n  /** A way to add a div wrapper for multi-theme outputs */\n  wrapFragments?: true\n  /** Include JSDoc comments in the hovers */\n  includeJSDocInHover?: true\n  /** Instead of showing twoslash exceptions inline, throw the entire process like it will on CI */\n  alwayRaiseForTwoslashExceptions?: true\n  /** Ignore transforming certain code blocks */\n  ignoreCodeblocksWithCodefenceMeta?: string[]\n}\n\n/** The possible user config, a combination of all shiki, twoslash and twoslash-shiki options */\nexport type UserConfigSettings = HighlighterOptions & TwoSlashOptions & TwoslashShikiOptions\n\n/**\n * This gets filled in by the promise below, then should\n * hopefully be more or less synchronous access by each parse\n * of the highlighter\n */\nlet storedHighlighter: Highlighter = null as any\n\n/**\n * Creates a *cached singleton* Shiki highlighter, this is an async call because of the call to WASM to get\n * the regex parser set up.\n *\n * In other functions, passing a the result of this highlighter function is kind of optional but it's the author's\n * opinion that you should be in control of the highlighter, and not this library.\n *\n */\nexport const createShikiHighlighter = (options: HighlighterOptions) => {\n  if (storedHighlighter) return Promise.resolve(storedHighlighter)\n\n  return getHighlighter(options).then(newHighlighter => {\n    storedHighlighter = newHighlighter\n    return storedHighlighter\n  })\n}\n\n/**\n * Renders a code sample to HTML, automatically taking into account:\n *\n *  - rendering overrides for twoslash and tsconfig\n *  - whether the language exists in shiki\n *\n * @param code the source code to render\n * @param lang the language to use in highlighting\n * @param info additional metadata which lives after the code-fence lang (e.g. `{ twoslash: true }`)\n * @param shikiOptions user settings\n * @param highlighter optional, but you should use it, highlighter\n * @param twoslash optional, but required when info contains 'twoslash' as a string\n */\nexport const renderCodeToHTML = (\n  code: string,\n  lang: string,\n  meta: Meta,\n  shikiOptions?: UserConfigSettings & { themeName: string },\n  highlighter?: Highlighter,\n  twoslash?: TwoSlashReturn\n) => {\n  if (!highlighter && !storedHighlighter) {\n    throw new Error(\"The highlighter object hasn't been initialised via `setupHighLighter` yet in shiki-twoslash\")\n  }\n\n  // Shiki does know the lang, so tokenize\n  const renderHighlighter = highlighter || storedHighlighter\n\n  const renderOpts: HtmlRendererOptions = {\n    fg: renderHighlighter.getForegroundColor(),\n    bg: renderHighlighter.getBackgroundColor(),\n    ...shikiOptions,\n  }\n\n  let tokens: IThemedToken[][]\n  try {\n    // I'm a little unsure about why we need this, perhaps the jsx language\n    // upstream in shiki is broken?\n    const tmpLang = lang === \"jsx\" ? \"tsx\" : lang\n\n    tokens = renderHighlighter.codeToThemedTokens(code, tmpLang as any)\n  } catch (error) {\n    // Shiki doesn't know this lang, so render it as plain text, but\n    // also add a note at the end as a HTML comment\n    const note = `<!-- Note from shiki-twoslash: the language ${lang} was not set up for Shiki to use, and so there is no code highlighting -->`\n    return plainTextRenderer(code, renderOpts, meta) + note\n  }\n\n  // Twoslash specific renderer\n  if (lang && meta.twoslash && twoslash) {\n    return twoslashRenderer(tokens, { ...renderOpts, langId: lang }, twoslash, meta)\n  }\n\n  // TSConfig renderer\n  if (lang && lang.startsWith(\"json\") && meta.tsconfig) {\n    return tsconfigJSONRenderer(tokens, renderOpts, meta)\n  }\n\n  // Otherwise just the normal shiki renderer\n  return defaultShikiRenderer(tokens, { ...renderOpts, langId: lang }, meta)\n}\n\n/**\n * Runs Twoslash over the code passed in with a particular language as the default file.\n */\nexport const runTwoSlash = (input: string, lang: string, settings: UserConfigSettings = {}): TwoSlashReturn => {\n  let code = input\n\n  // Shiki doesn't handle a few filetype mappings, so do that ahead of time. Oddly enough, this also\n  // gets re-done at remark-shiki level\n  const replacer = {\n    json5: \"json\",\n    yml: \"yaml\",\n  }\n\n  // @ts-ignore\n  if (replacer[lang]) lang = replacer[lang]\n\n  const hasReactImport = /^import\\s+React(?:.*)\\s+from\\s+('|\")react\\1/gm\n\n  // Add react import to code samples indicating they're needing react.\n  if ([\"tsx\", \"jsx\"].includes(lang) && !settings.disableImplicitReactImport && !hasReactImport.test(code)) {\n    const reactImport = \"import React from 'react'\\n\"\n    const cutString = \"// ---cut---\\n\"\n    // ^ cutString taken directly from\n    // https://github.com/microsoft/TypeScript-Website/blob/0c8d98a69d520365c1909d536fa1323f03a8438c/packages/ts-twoslasher/src/index.ts#L694\n\n    if (code.includes(cutString)) {\n      code = code\n        .split(cutString)\n        .map((item, index) => (index == 0 ? reactImport.concat(item) : item))\n        .join(cutString)\n    } else {\n      code = [reactImport, cutString, code].join(\"\")\n    }\n  }\n\n  settings.customTags = [\"annotate\", \"log\", \"warn\", \"error\"]\n  const results = twoslasher(code, lang, settings)\n  return results\n}\n\n/** Set of renderers if you want to explicitly call one instead of using renderCodeToHTML */\nexport const renderers = {\n  plainTextRenderer,\n  defaultShikiRenderer,\n  twoslashRenderer,\n  tsconfigJSONRenderer,\n}\n", "/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n", "import { UserConfigSettings, runTwoSlash } from \"shiki-twoslash\"\nimport type { TwoSlashReturn } from \"@typescript/twoslash\"\n\n/**\n * Keeps a cache of the JSON responses to a twoslash call in node_modules/.cache/twoslash\n * which should keep CI times down (e.g. the epub vs the handbook etc) - but also during\n * dev time, where it can be super useful.\n */\nexport const cachedTwoslashCall = (\n  code: string,\n  lang: string,\n  settings: UserConfigSettings\n): TwoSlashReturn | undefined => {\n  // @ts-expect-error\n  const isWebWorker = typeof self !== \"undefined\" && typeof self.WorkerGlobalScope !== \"undefined\"\n  const isBrowser =\n    isWebWorker ||\n    (typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof fetch !== \"undefined\")\n\n  if (isBrowser) {\n    // Not in Node, run un-cached\n    return runTwoSlash(code, lang, settings)\n  }\n\n  const { createHash } = require(\"crypto\")\n  const { readFileSync, existsSync, mkdirSync, writeFileSync } = require(\"fs\")\n  const { join } = require(\"path\")\n\n  const shikiVersion = require('@typescript/twoslash/package.json').version\n  const tsVersion = require('typescript/package.json').version\n  const shasum = createHash(\"sha1\")\n  const codeSha = shasum.update(`${code}-${shikiVersion}-${tsVersion}`).digest(\"hex\")\n\n  const getNmCache = () => {\n    if (__dirname.includes(\"node_modules\")) {\n      return join(__dirname.split(\"node_modules\")[0], \"node_modules\", \".cache\", \"twoslash\")\n    } else {\n      return join(__dirname, \"..\", \"..\", \".cache\", \"twoslash\");\n    }\n  };\n\n  const getPnpCache = () => {\n    try {\n      const pnp = require(\"pnpapi\");\n      return join(pnp.getPackageInformation(pnp.topLevel).packageLocation, \"node_modules\", \".cache\", \"twoslash\");\n    } catch (error) {\n      return getNmCache()\n    }\n  };\n\n  const cacheRoot = process.versions.pnp\n    ? getPnpCache()\n    : getNmCache();\n\n  const cachePath = join(cacheRoot, `${codeSha}.json`)\n\n  if (existsSync(cachePath)) {\n    if (process.env.debug)\n      console.log(`Using cached twoslash results from ${cachePath}`)\n    \n    return JSON.parse(readFileSync(cachePath, \"utf8\"))\n  } else {\n    const results = runTwoSlash(code, lang, settings)\n    if (!existsSync(cacheRoot)) mkdirSync(cacheRoot, { recursive: true })\n    writeFileSync(cachePath, JSON.stringify(results), \"utf8\")\n    return results\n  }\n}\n", "export const addIncludes = (map: Map<string, string>, name: string, code: string) => {\n  const lines: string[] = []\n\n  code.split(\"\\n\").forEach((l, _i) => {\n    const trimmed = l.trim()\n\n    if (trimmed.startsWith(\"// - \")) {\n      const key = trimmed.split(\"// - \")[1].split(\" \")[0]\n      map.set(name + \"-\" + key, lines.join(\"\\n\"))\n    } else {\n      lines.push(l)\n    }\n  })\n  map.set(name, lines.join(\"\\n\"))\n}\n\nexport const replaceIncludesInCode = (_map: Map<string, string>, code: string) => {\n  const includes = /\\/\\/ @include: (.*)$/gm\n\n  // Basically run a regex over the code replacing any // @include: thing with\n  // 'thing' from the map\n\n  // const toReplace: [index:number, length: number, str: string][] = []\n  const toReplace: [number, number, string][] = []\n\n  let match\n  while ((match = includes.exec(code)) !== null) {\n    // This is necessary to avoid infinite loops with zero-width matches\n    if (match.index === includes.lastIndex) {\n      includes.lastIndex++\n    }\n    const key = match[1]\n    const replaceWith = _map.get(key)\n\n    if (!replaceWith) {\n      const msg = `Could not find an include with the key: '${key}'.\\nThere is: ${Array.from(_map.keys())}.`\n      throw new Error(msg)\n    }\n\n    toReplace.push([match.index, match[0].length, replaceWith])\n  }\n\n  let newCode = code.toString()\n  // Go backwards through the found changes so that we can retain index position\n  toReplace.reverse().forEach(r => {\n    newCode = newCode.substring(0, r[0]) + r[2] + newCode.substring(r[0] + r[1])\n  })\n  return newCode\n}\n", "import type { Node } from \"unist\"\n\nimport {TwoslashError} from \"@typescript/twoslash\"\n\nfunction escapeHtml(html: string) {\n  return html.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")\n}\n\nexport const setupNodeForTwoslashException = (code: string, node: Node, error: unknown) => {\n    const css = `<style>\n@import url('http://fonts.cdnfonts.com/css/caslon-os'); \n\n.twoslash-fixed-error-note { \n    position: fixed;\n    top: 20px;\n    right: 20px;\n    display: flex;\n    align-items: center;\n    padding: .25rem .75rem;\n    color: black;\n    background-color: #FCF3D9;\n    background-clip: padding-box;\n    border-bottom: 1px solid rgba(0,0,0,.05);\n    border-radius: .25rem;\n    font-family: -apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";\n } \n\n #__docusaurus .twoslash-fixed-error-note {\n    top: 80px;\n }\n\n .twoslash-fixed-error-note:hover {\n    border-bottom: 1px solid rgba(226, 61, 30, 0.8);\n }\n\n .twoslash-error-color {\n    background-color: #E23D1E;\n    width: 18px;\n    height: 18px;\n    border-radius: 9px;\n    margin-right:  10px;\n    color: black;\n }\n\n.twoslash-exception-message { \n    font-family: 'Caslon OS', sans-serif; \n    background-color: #FCF3D9;\n    font-size: 1.1rem;\n    padding: 2rem;\n    border-left: 2px solid #E23D1E;\n}\n\n.twoslash-exception-message p {\n    margin-top: 1rem;\n    margin-bottom: 0.6rem;\n}\n\n.twoslash-exception-message h3 { \n    margin-top: 0.6rem;\n    margin-bottom: 0.3rem;\n    font-size: 1.8rem;\n}\n\n.twoslash-exception-message code {\n     white-space: pre-wrap;\n     font-family: \"JetBrains Mono\", Menlo, Monaco, Consolas, Courier New, monospace;\n     margin-bottom: 20px;\n     background-color: #FCF3D9;\n     color: black;\n     border: none;\n     padding-left: 0;\n }\n\n .twoslash-exception-message > code {\n     display: block;\n     margin-bottom: 1.5rem;\n     margin-top: 3rem;\n }\n\n.twoslash-exception-code {\n    border-left: 2px solid #E5A604;\n    padding-left: 20px;\n    background-color: #FCF3D9;\n    color: black;\n}\n</style>`\n\n    const bodyFromTwoslashError = (error: TwoslashError) =>  {\n        return `\n<h3>${escapeHtml(error.title)}</h3>\n<p>${escapeHtml(error.description).replace(/(?:\\r\\n|\\r|\\n)/g, \"<br>\")}</p>\n<code>${escapeHtml(error.recommendation).replace(/(?:\\r\\n|\\r|\\n)/g, \"<br>\")}</code>\n`\n    }\n\n    const bodyFromError = (error: Error) => {\n        return `<pre><code>${error.message.split(\"## Code\")[0]}</code></pre>`\n    }\n\n    // @ts-ignore\n    const isWebWorker = typeof self !== \"undefined\" && typeof self.WorkerGlobalScope !== \"undefined\"\n    const isBrowser =\n      isWebWorker ||\n      (typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof fetch !== \"undefined\")\n  \n      const isJest = typeof jest !== \"undefined\"\n\n    const eLog = !isBrowser && !isJest ? console.error : (_str: string) => {}\n\n    let body = `<pre><code>${error}</code></pre>`\n    if (typeof error !== \"object\") {\n        body = String(error)\n        eLog(`### Unexpected error:`)\n        eLog(error)\n    } else if (error instanceof TwoslashError) {\n        body = bodyFromTwoslashError(error)\n        eLog(`### Twoslash error: ${error.title}`)\n        eLog(error.description)\n        eLog(error.recommendation)\n        eLog(\"\\n### Code Sample\")\n        eLog(code)\n    } else if (error instanceof Error) {\n        body = bodyFromError(error)\n        eLog(`### Unexpected error:`)\n        eLog(error)\n    }\n\n    const codeSample = `<p>Raising Code:</p><pre class='twoslash-exception-code'><code>${escapeHtml(code)}</code></pre>`\n\n    const html = `\n    <a href='#twoslash-error'><div class='twoslash-fixed-error-note'><span class='twoslash-error-color'></span>Twoslash failure</div></a>\n    <div class='twoslash-exception-message'>${body}${codeSample}</div>`\n\n\n    node.type = \"html\"\n    node.value =  \"<div id='twoslash-error'>\" + css + html + \"</div>\"\n    node.children = []\n}", "import type { Node } from \"unist\"\nimport type { Transformer } from \"unified\";\nimport { TwoslashError, TwoSlashReturn } from \"@typescript/twoslash\"\n\nimport visit from \"unist-util-visit\"\nimport { lex, parse } from \"fenceparser\"\nimport { Lang, Highlighter, getHighlighter } from \"shiki\"\nimport { UserConfigSettings, renderCodeToHTML } from \"shiki-twoslash\"\n\nimport { cachedTwoslashCall } from \"./caching\"\nimport { addIncludes, replaceIncludesInCode } from \"./includes\"\nimport { setupNodeForTwoslashException } from \"./exceptionMessageDOM\"\n\ntype Fence = {\n  lang: string\n  meta: NonNullable<ReturnType<typeof parse>>\n}\n\n// A set of includes which can be pulled via a set ID\nconst includes = new Map<string, string>()\n\nfunction getHTML(\n  code: string,\n  fence: Fence,\n  highlighters: Highlighter[],\n  twoslash: TwoSlashReturn | undefined,\n  twoslashSettings: UserConfigSettings\n) {\n  // Shiki doesn't respect json5 as an input, so switch it\n  // to json, which can handle comments in the syntax highlight\n  const replacer: Record<string, string> = {\n    json5: \"json\",\n  }\n\n  if (replacer[fence.lang]) fence.lang = replacer[fence.lang]\n\n  let results\n  // Support 'twoslash' includes\n  if (fence.lang === \"twoslash\") {\n    if (!fence.meta.include || typeof fence.meta.include !== \"string\") {\n      throw new Error(\"A twoslash code block needs a pragma like 'twoslash include [name]'\")\n    }\n\n    addIncludes(includes, fence.meta.include as string, code)\n    results = twoslashSettings.wrapFragments ? `<div class=\"shiki-twoslash-fragment\"></div>` : \"\"\n  } else {\n    // All good, get each highlighter and render the shiki output for it\n    const output = highlighters.map(highlighter => {\n      // @ts-ignore\n      const themeName: string = highlighter.customName.split(\"/\").pop().replace(\".json\", \"\")\n      return renderCodeToHTML(code, fence.lang, fence.meta, { themeName, ...twoslashSettings }, highlighter, twoslash)\n    })\n    results = output.join(\"\\n\")\n    if (highlighters.length > 1 && twoslashSettings.wrapFragments) {\n      results = `<div class=\"shiki-twoslash-fragment\">${results}</div>`\n    }\n  }\n  return results\n}\n\n/**\n * Runs twoslash across an AST node, switching out the text content, and lang\n * and adding a `twoslash` property to the node.\n */\nexport const runTwoSlashOnNode = (code: string, { lang, meta }: Fence, settings: UserConfigSettings = {}) => {\n  // Offer a way to do high-perf iterations, this is less useful\n  // given that we cache the results of twoslash in the file-system\n  const shouldDisableTwoslash = typeof process !== \"undefined\" && process.env && !!process.env.TWOSLASH_DISABLE\n  if (shouldDisableTwoslash) return undefined\n\n  // Only run twoslash when the meta has the attribute twoslash\n  if (meta.twoslash) {\n    const importedCode = replaceIncludesInCode(includes, code)\n    return cachedTwoslashCall(importedCode, lang, settings)\n  }\n\n  return undefined\n}\n\n// To make sure we only have one highlighter per theme in a process\nconst highlighterCache = new Map<UserConfigSettings, Promise<Highlighter[]>>()\n\n/** Sets up the highlighters, and cache's for recalls */\nexport const highlightersFromSettings = (settings: UserConfigSettings) => {\n  // console.log(\"i should only log once per theme\")\n  // ^ uncomment this to debug if required\n  const themes = settings.themes || (settings.theme ? [settings.theme] : [\"light-plus\"])\n\n  return Promise.all(\n    themes.map(async theme => {\n      // You can put a string, a path, or the JSON theme obj\n      const themeName = (theme as any).name || theme\n      const highlighter = await getHighlighter({ ...settings, theme, themes: undefined })\n\n      // @ts-ignore - https://github.com/shikijs/shiki/pull/162 will fix this\n      highlighter.customName = themeName\n      return highlighter\n    })\n  )\n}\n\nconst parsingNewFile = () => includes.clear()\n\nconst parseFence = (fence: string): Fence => {\n  const [lang, ...tokens] = lex(fence)\n\n  // if the language is twoslash and include key is found\n  // insert an `=` after include to make it `include=[name]`\n  // which yields better meta\n  if (lang === \"twoslash\") {\n    // Search for `include` in tokens\n    const index = tokens.indexOf(\"include\")\n    if (index !== -1) {\n      tokens.splice(index + 1, 0, \"=\")\n    }\n  }\n\n  const meta = parse(tokens) ?? {}\n\n  return {\n    lang: (lang || \"\").toString(),\n    meta,\n  }\n}\n\n// --- The Remark API ---\n\n/* A rich AST node for uninst with twoslash'd data */\ntype RemarkCodeNode = Node & {\n  lang?: Lang\n  meta?: string\n  // ^ according to mdast\n  type: string\n  value: string\n  children: Node[]\n  twoslash?: TwoSlashReturn\n}\n\nexport type Options = UserConfigSettings\n\n/**\n * Synchronous outer function, async inner function, which is how the remark\n * async API works.\n */\nfunction remarkTwoslash(settings: Options = {}) {\n  if (!highlighterCache.has(settings)) {\n    highlighterCache.set(settings, highlightersFromSettings(settings))\n  }\n\n  const transform: Transformer = async (markdownAST) => {\n    const highlighters = await highlighterCache.get(settings)!\n    parsingNewFile()\n    visit(markdownAST, \"code\", remarkVisitor(highlighters, settings))\n  }\n\n  return transform\n}\n\n/**\n * The function doing the work of transforming any codeblock samples in a remark AST.\n */\nexport const remarkVisitor =\n  (highlighters: Highlighter[], twoslashSettings: UserConfigSettings = {}) =>\n  (node: RemarkCodeNode) => {\n    const code = node.value\n    let fence: Fence = undefined!\n\n    try {\n      fence = parseFence([node.lang, node.meta].filter(Boolean).join(\" \"))\n    } catch (error) {\n      const twoslashError = new TwoslashError(\"Codefence error\", \"Could not parse the codefence for this code sample\", \"It's usually an unclosed string\", code)\n      return setupNodeForTwoslashException(code, node, twoslashError)\n    }\n\n    // Do nothing if the node has an attribute to ignore\n    if (Object.keys(fence.meta).filter(key => (twoslashSettings.ignoreCodeblocksWithCodefenceMeta || []).includes(key)).length > 0) {\n      return\n    }\n\n    let twoslash: TwoSlashReturn | undefined\n    try {\n      // By allowing node.twoslash to already exist you can set it up yourself in a browser\n      twoslash = node.twoslash || runTwoSlashOnNode(code, fence, twoslashSettings)\n    } catch (error) {\n      const shouldAlwaysRaise = process && process.env && !!process.env.CI\n      const yeahButNotInTests = typeof jest === \"undefined\"\n\n      if ((shouldAlwaysRaise && yeahButNotInTests) || twoslashSettings.alwayRaiseForTwoslashExceptions) {\n        throw error\n      } else {\n        return setupNodeForTwoslashException(code, node, error)\n      }\n    }\n\n    if (twoslash) {\n      node.value = twoslash.code\n      node.lang = twoslash.extension as Lang\n      node.twoslash = twoslash\n    }\n\n    const shikiHTML = getHTML(node.value, fence, highlighters, twoslash, twoslashSettings)\n    node.type = \"html\"\n    node.value = shikiHTML\n    node.children = []\n  }\n\nexport default remarkTwoslash\n\n// --- The Markdown-it API ---\n\n/** Only the inner function exposed as a synchronous API for markdown-it */\n\nexport const setupForFile = async (settings: UserConfigSettings = {}) => {\n  parsingNewFile()\n\n  if (!highlighterCache.has(settings)) {\n    highlighterCache.set(settings, highlightersFromSettings(settings))\n  }\n\n  let highlighters = await highlighterCache.get(settings)!\n  return { settings, highlighters }\n}\n\nexport const transformAttributesToHTML = (\n  code: string,\n  fenceString: string,\n  highlighters: Highlighter[],\n  settings: UserConfigSettings\n) => {\n  const fence = parseFence(fenceString)\n\n  const twoslash = runTwoSlashOnNode(code, fence, settings)\n  const newCode = (twoslash && twoslash.code) || code\n  return getHTML(newCode, fence, highlighters, twoslash, settings)\n}\n"],
  "mappings": "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",
  "names": ["index", "visit", "visit", "t", "n", "e", "r", "i", "o", "a", "s", "f", "u", "c", "root", "factory", "exports", "module", "define", "amd", "this", "installedModules", "__webpack_require__", "moduleId", "i", "l", "modules", "call", "m", "c", "d", "name", "getter", "o", "Object", "defineProperty", "enumerable", "get", "r", "Symbol", "toStringTag", "value", "t", "mode", "__esModule", "ns", "create", "key", "bind", "n", "object", "property", "prototype", "hasOwnProperty", "p", "s", "utils_1", "rule_1", "matcher_1", "debug_1", "performanceNow", "performance", "Date", "now", "createGrammar", "grammar", "initialLanguage", "embeddedLanguages", "tokenTypes", "grammarRepository", "onigLib", "Grammar", "FullScopeDependency", "scopeName", "PartialScopeDependency", "include", "toKey", "ScopeDependencyCollector", "full", "partial", "visitedRule", "Set", "_seenFull", "_seenPartial", "add", "dep", "has", "push", "_extractIncludedScopesInPatterns", "result", "baseGrammar", "selfGrammar", "patterns", "repository", "_i", "patterns_1", "length", "pattern", "patternRepository", "mergeObjects", "Array", "isArray", "collectDependencies", "charAt", "collectSpecificDependencies", "substring", "sharpIndex", "indexOf", "includedName", "injections", "injection", "scopesAreMatching", "thisScopeName", "len", "substr", "nameMatcher", "identifers", "scopes", "lastIndex", "every", "identifier", "collectInjections", "selector", "rule", "ruleFactoryHelper", "matchers", "createMatchers", "ruleId", "RuleFactory", "getCompiledRuleId", "matchers_1", "matcher", "priority", "ScopeMetadata", "languageId", "tokenType", "themeData", "ScopeMetadataProvider", "themeProvider", "_initialLanguage", "_themeProvider", "_cache", "Map", "_defaultMetaData", "getDefaults", "_embeddedLanguages", "keys", "scope", "language", "console", "warn", "escapedScopes", "map", "_escapeRegExpCharacters", "_embeddedLanguagesRegex", "sort", "reverse", "RegExp", "join", "onDidChangeTheme", "getDefaultMetadata", "replace", "getMetadataForScope", "_NULL_SCOPE_METADATA", "_doGetMetadataForScope", "set", "_scopeToLanguage", "standardTokenType", "_toStandardTokenType", "themeMatch", "match", "STANDARD_TOKEN_TYPE_REGEXP", "Error", "_scopeMetadataProvider", "_onigLib", "_rootId", "_lastRuleId", "_ruleId2desc", "_includedGrammars", "_grammarRepository", "_grammar", "initGrammar", "_injections", "_tokenTypeMatchers", "_a", "_b", "matchers_2", "type", "dispose", "createOnigScanner", "sources", "createOnigString", "getInjections", "_this", "rawInjections", "expression", "injectionScopeNames", "forEach", "injectionScopeName", "injectionGrammar", "getExternalGrammar", "injectionSelector", "i1", "i2", "registerRule", "id", "getRule", "patternId", "rawIncludedGrammar", "lookup", "$base", "tokenizeLine", "lineText", "prevState", "_tokenize", "tokens", "lineTokens", "getResult", "ruleStack", "lineLength", "tokenizeLine2", "getBinaryResult", "emitBinaryTokens", "isFirstLine", "$self", "StackElement", "NULL", "reset", "rawDefaultMetadata", "defaultTheme", "defaultMetadata", "StackElementMetadata", "fontStyle", "foreground", "background", "rootScopeName", "getName", "rawRootMetadata", "rootMetadata", "ScopeListElement", "mergeMetadata", "scopeList", "onigLineText", "content", "LineTokens", "nextState", "_tokenizeString", "disposeOnigString", "str", "base", "clone", "$vscodeTextmateLocation", "handleCaptures", "stack", "captures", "captureIndices", "lineTextContent", "Math", "min", "localStack", "maxEnd", "end", "captureRule", "captureIndex", "start", "endPos", "produceFromScopes", "pop", "produce", "retokenizeCapturedWithRuleId", "nameScopesList", "contentNameScopesList", "contentName", "getContentName", "stackClone", "onigSubStr", "captureRuleScopeName", "captureRuleScopesList", "LocalStackElement", "debugCompiledRuleToString", "ruleScanner", "rules", "debugRegExps", "matchRuleOrInjections", "linePos", "anchorPosition", "matchResult", "compile", "endRule", "perfStart", "DebugFlags", "InDebugMode", "scanner", "findNextMatchSync", "elapsedMillis", "debugName", "log", "index", "matchedRuleId", "injectionResult", "bestMatchRuleId", "bestMatchRating", "Number", "MAX_VALUE", "bestMatchCaptureIndices", "bestMatchResultPriority", "generateScopes", "matchRating", "priorityMatch", "matchResultScore", "injectionResultScore", "checkWhileConditions", "STOP", "whileCheckResult", "beginRuleCapturedEOL", "whileRules", "node", "nodeRule", "BeginWhileRule", "whileRule", "compileWhile", "debugWhileRegExp", "whileCaptures", "scanNext", "hasAdvanced", "poppedRule", "debugEndRegExp", "setContentNameScopesList", "endCaptures", "popped", "getAnchorPos", "getEnterPos", "error", "_rule", "beforePush", "BeginEndRule", "pushedRule", "debugBeginRegExp", "beginCaptures", "endHasBackReferences", "setEndRule", "getEndWithResolvedBackReferences", "hasSameRuleAs", "whileHasBackReferences", "getWhileWithResolvedBackReferences", "matchingRule", "debugMatchRegExp", "safePop", "toBinaryStr", "metadata", "toString", "printMetadata", "getLanguageId", "getTokenType", "getFontStyle", "getForeground", "getBackground", "_languageId", "_tokenType", "_fontStyle", "_foreground", "_background", "parent", "_equals", "a", "b", "equals", "other", "_matchesScope", "selectorWithDot", "_matches", "target", "parentScopes", "scopesList", "source", "_push", "rawMetadata", "split", "_generateScopes", "resultLen", "enterPos", "anchorPos", "depth", "_enterPos", "_anchorPos", "_structuralEquals", "_reset", "el", "_writeString", "res", "outIndex", "tokenTypeOverrides", "_emitBinaryTokens", "_tokenTypeOverrides", "_lineText", "_tokens", "_binaryTokens", "_lastTokenEndIndex", "endIndex", "toTemporaryType", "k", "startIndex", "Uint32Array", "standardType", "doClone", "something", "arr", "obj", "arguments", "basename", "path", "idx", "lastIndexOf", "CAPTURING_REGEX_SOURCE", "RegexSource", "hasCaptures", "regexSource", "test", "replaceCaptures", "captureSource", "commandIndex", "command", "capture", "parseInt", "toLowerCase", "toUpperCase", "e", "process", "env", "__awaiter", "thisArg", "_arguments", "P", "generator", "Promise", "resolve", "reject", "fulfilled", "step", "next", "rejected", "done", "then", "apply", "__generator", "body", "f", "y", "g", "_", "label", "sent", "trys", "ops", "verb", "iterator", "v", "op", "TypeError", "registry_1", "grammarReader", "theme_1", "grammar_1", "Registry", "options", "_options", "_syncRegistry", "SyncRegistry", "Theme", "createFromRawTheme", "theme", "colorMap", "_ensureGrammarCache", "setTheme", "getColorMap", "loadGrammarWithEmbeddedLanguages", "initialScopeName", "loadGrammarWithConfiguration", "configuration", "_loadGrammar", "loadGrammar", "_doLoadSingleGrammar", "addGrammar", "_loadSingleGrammar", "_collectDependenciesForDep", "injections_1", "seenFullScopeRequests", "seenPartialScopeRequests", "Q", "q", "deps", "q_1", "_c", "_d", "_e", "all", "request", "grammarForScopeName", "rawGrammar", "INITIAL", "parseRawGrammar", "onigLibPromise", "_theme", "_grammars", "_rawGrammars", "_injectionGrammars", "_onigLibPromise", "targetScope", "concat", "extendStatics", "__extends", "setPrototypeOf", "__proto__", "__", "constructor", "HAS_BACK_REFERENCES", "BACK_REFERENCING_END", "CompiledRule", "regExps", "Rule", "$location", "_name", "_nameIsCapturing", "_contentName", "_contentNameIsCapturing", "location", "filename", "line", "configurable", "CaptureRule", "_super", "collectPatternsRecursive", "out", "isFirst", "endRegexSource", "allowA", "allowG", "RegExpSource", "regExpSource", "handleAnchors", "lastPushedPos", "output", "hasAnchor", "pos", "nextCh", "_anchorCache", "_buildAnchorCache", "hasBackReferences", "setSource", "newSource", "resolveBackReferences", "capturedValues", "g1", "ch", "A0_G0_result", "A0_G1_result", "A1_G0_result", "A1_G1_result", "A0_G0", "A0_G1", "A1_G0", "A1_G1", "resolveAnchors", "RegExpSourceList", "_items", "_hasAnchors", "_cached", "_disposeCaches", "item", "unshift", "_resolveAnchors", "MatchRule", "_match", "_cachedCompiledPatterns", "IncludeOnlyRule", "hasMissingPatterns", "begin", "applyEndPatternLast", "_begin", "_end", "_while", "_cachedCompiledWhilePatterns", "createCaptureRule", "helper", "desc", "_compileCaptures", "_compilePatterns", "while", "maximumCaptureId", "captureId", "numericCaptureId", "localIncludedRule", "externalGrammarName", "externalGrammarInclude", "externalGrammar", "externalIncludedRule", "skipRule", "isIdentifier", "token", "matchesName", "input", "regex", "results", "tokenizer", "exec", "parseConjunction", "parseOperand", "expressionToNegate_1", "matcherInput", "expressionInParents", "some", "parseInnerExpression", "identifiers_1", "cachedSetTimeout", "cachedClearTimeout", "defaultSetTimout", "defaultClearTimeout", "runTimeout", "fun", "setTimeout", "clearTimeout", "currentQueue", "queue", "draining", "queueIndex", "cleanUpNextTick", "drainQueue", "timeout", "run", "marker", "Item", "array", "noop", "nextTick", "args", "title", "browser", "argv", "version", "versions", "on", "addListener", "once", "off", "removeListener", "removeAllListeners", "emit", "prependListener", "prependOnceListener", "listeners", "binding", "cwd", "chdir", "dir", "umask", "plist", "json_1", "filePath", "contents", "parse", "JSON", "parseWithLocation", "_parse", "locationKeyName", "char", "advancePosBy", "by", "charCodeAt", "advancePosTo", "to", "skipWhitespace", "chCode", "advanceIfStartsWith", "advanceUntil", "nextOccurence", "captureUntil", "state", "cur", "stateStack", "objStack", "curKey", "pushState", "newState", "newCur", "popState", "fail", "msg", "val", "isClosed", "dictState", "newDict", "newArr", "arrState", "leaveDict", "leaveArray", "acceptString", "acceptReal", "isNaN", "acceptInteger", "acceptDate", "acceptData", "acceptBool", "parseTagValue", "tag", "m0", "String", "fromCodePoint", "peekChCode", "trim", "parseFloat", "doFail", "streamState", "withMetadata", "JSONStreamState", "JSONToken", "nextJSONToken", "toLocation", "keyValue", "offset", "_state", "_out", "ParsedThemeRule", "isValidHexColor", "hex", "parseTheme", "settings", "entry", "j", "lenJ", "segments", "slice", "resolveParsedThemeRules", "parsedThemeRules", "_colorMap", "strcmp", "strArrCmp", "defaultFontStyle", "defaultForeground", "defaultBackground", "incomingDefaults", "shift", "ColorMap", "defaults", "ThemeTrieElementRule", "getId", "ThemeTrieElement", "insert", "_lastColorId", "_id2color", "_color2id", "_isFrozen", "color", "_root", "_defaults", "createFromParsedTheme", "len1", "len2", "scopeDepth", "cloneArr", "acceptOverwrite", "mainRule", "rulesWithParentScopes", "children", "_mainRule", "_rulesWithParentScopes", "_children", "_sortBySpecificity", "_cmpBySpecificity", "aParentScopes", "bParentScopes", "aParentScopesLen", "bParentScopesLen", "aLen", "bLen", "head", "tail", "dotIndex", "child", "_doInsertHere", "require_package", "hasLocalStorage", "localStorage", "error", "hasProcess", "process", "shouldDebug", "getItem", "env", "DEBUG", "debugLog", "console", "log", "_message", "createVirtualTypeScriptEnvironment", "sys", "rootFiles", "ts", "compilerOptions", "customTransformers", "mergedCompilerOpts", "defaultCompilerOptions", "createVirtualLanguageServiceHost", "languageServiceHost", "updateFile", "languageService", "createLanguageService", "diagnostics", "getCompilerOptionsDiagnostics", "length", "compilerHost", "createVirtualCompilerHost", "Error", "formatDiagnostics", "name", "getSourceFile", "fileName", "getProgram", "createFile", "content", "createSourceFile", "target", "optPrevTextSpan", "prevSourceFile", "prevFullContents", "text", "prevTextSpan", "createTextSpan", "newText", "slice", "start", "newSourceFile", "updateSourceFile", "span", "newLength", "notImplemented", "methodName", "Error", "audit", "name", "fn", "args", "res", "smallres", "slice", "debugLog", "defaultCompilerOptions", "ts", "getDefaultCompilerOptions", "jsx", "JsxEmit", "React", "strict", "esModuleInterop", "module", "ModuleKind", "ESNext", "suppressOutputPathCheck", "skipLibCheck", "skipDefaultLibCheck", "moduleResolution", "ModuleResolutionKind", "NodeJs", "libize", "path", "replace", "toLowerCase", "createSystem", "files", "createDirectory", "directoryExists", "directory", "Array", "from", "keys", "some", "startsWith", "exit", "fileExists", "fileName", "has", "getCurrentDirectory", "getDirectories", "getExecutingFilePath", "readDirectory", "readFile", "get", "resolvePath", "newLine", "useCaseSensitiveFileNames", "write", "writeFile", "contents", "set", "createFSBackedSystem", "_projectRoot", "root", "requirePath", "nodeSys", "sys", "tsLib", "dirname", "require", "resolve", "includes", "tsLibName", "result", "libs", "createVirtualCompilerHost", "compilerOptions", "sourceFiles", "Map", "save", "sourceFile", "vHost", "compilerHost", "getCanonicalFileName", "getDefaultLibFileName", "getNewLine", "getSourceFile", "createSourceFile", "target", "updateFile", "alreadyExists", "text", "createVirtualLanguageServiceHost", "rootFiles", "customTransformers", "fileNames", "fileVersions", "projectVersion", "languageServiceHost", "getProjectVersion", "toString", "getCompilationSettings", "getCustomTransformers", "getScriptFileNames", "getScriptSnapshot", "ScriptSnapshot", "fromString", "getScriptVersion", "lsHost", "push", "String", "fromCharCode", "parsePrimitive", "value", "type", "toLowerCase", "length", "TwoslashError", "cleanMarkdownEscaped", "code", "replace", "typesToExtension", "types", "map", "js", "javascript", "ts", "typescript", "tsx", "jsx", "json", "jsn", "Object", "keys", "getIdentifierTextSpans", "sourceFile", "textSpans", "checkChildren", "node", "forEachChild", "child", "isIdentifier", "start", "getStart", "push", "span", "createTextSpan", "end", "text", "getText", "getClosestWord", "str", "pos", "String", "Number", "left", "slice", "search", "right", "word", "startPos", "validateCodeForErrors", "relevantErrors", "handbookOptions", "extension", "originalCode", "vfsRoot", "inErrsButNotFoundInTheHeader", "filter", "e", "errors", "includes", "errorsFound", "Array", "from", "Set", "join", "errorsToShow", "codeToAdd", "missing", "filesToErrors", "noFiles", "forEach", "d", "fileRef", "file", "fileName", "existing", "showDiagnostics", "title", "diags", "msg", "messageText", "innerDiags", "filepath", "allMessages", "newErr", "validateInput", "hasLocalStorage", "localStorage", "error", "hasProcess", "process", "shouldDebug", "getItem", "env", "DEBUG", "log", "console", "_message", "description", "recommendation", "message", "Error", "filterHighlightLines", "codeLines", "highlights", "queries", "nextContentOffset", "contentOffset", "removedLines", "line", "i", "moveForward", "stripLine", "logDesc", "splice", "highlightMatch", "exec", "queryMatch", "removePrettierIgnoreMatch", "completionsQuery", "indexOf", "kind", "offset", "undefined", "docs", "lastIndexOf", "trim", "getOptionValueFromMap", "name", "key", "optMap", "result", "get", "setOption", "opts", "opt", "elementType", "element", "strings", "split", "v", "optionDeclarations", "booleanConfigRegexp", "valuedConfigRegexp", "filterCompilerOptions", "defaultCompilerOptions", "options", "_extends", "match", "filterCustomTags", "customTags", "tags", "annotation", "defaultHandbookOptions", "noErrors", "showEmit", "showEmittedFile", "noStaticSemanticInfo", "emit", "noErrorValidation", "filterHandbookOptions", "twoslasher", "tsModule", "require", "lzstring", "lzstringModule", "safeExtension", "defaultFileName", "strict", "target", "ScriptTarget", "ES2016", "allowJs", "defaultOptions", "compilerOptions", "JsxEmit", "Preserve", "getRoot", "pa", "path", "rootPath", "cwd", "sep", "posix", "useFS", "fsMap", "vfs", "Map", "system", "createSystem", "createFSBackedSystem", "fsRoot", "createVirtualTypeScriptEnvironment", "customTransformers", "ls", "languageService", "partialQueries", "nameContent", "splitTwoslashCodeInfoFiles", "sourceFiles", "filenames", "nc", "filename", "filetype", "pop", "allowJSON", "resolveJsonModule", "newFileCode", "createFile", "updates", "concat", "lspedQueries", "q", "getSourceFile", "position", "getPositionOfLineAndCharacter", "quickInfo", "getQuickInfoAtPosition", "displayParts", "dp", "documentation", "queryResult", "completions", "getCompletionsAtPosition", "prefix", "lastDot", "entries", "completionPrefix", "newEditedFileCode", "updateFile", "allCodeLines", "f", "output", "getEmitOutput", "outputFiles", "writeFile", "errs", "staticQuickInfos", "getSemanticDiagnostics", "getSyntacticDiagnostics", "source", "sys", "readFile", "fileContentStartIndexInModifiedFile", "linesAbove", "identifiers", "identifier", "targetString", "burnerSourceFile", "createSourceFile", "ES2015", "getLineAndCharacterOfPosition", "character", "completionsPrefix", "err", "codeWhereErrorLives", "renderedMessage", "flattenDiagnosticMessageText", "id", "category", "emitFilename", "emitSourceFilename", "emitSource", "find", "outFile", "allFiles", "o", "zippedCode", "compressToEncodedURIComponent", "playgroundURL", "cutString", "cutIndex", "lineOffset", "substr", "info", "s", "highlight", "cutAfterString", "shift", "trimEnd", "root", "lines", "nameForFile", "currentFileContent", "fileMap", "n", "isQuoted", "s", "first", "last", "length", "Iterator", "input", "error", "err", "Error", "peek", "n", "current", "advance", "isAtEnd", "lex", "Lexer", "scan", "KEYWORDS", "isAlpha", "test", "isNumeric", "isAlphaNumeric", "string", "quote", "output", "push", "substring", "start", "number", "parseFloat", "identifier", "text", "Object", "keys", "includes", "next", "parse", "Parser", "object", "result", "parseValue", "slice", "value", "array", "peeked", "highlight", "_extends", "FontStyle", "value", "ParseOptions", "parse", "parse", "scope", "_a", "Registry$1", "options", "htmlForTags", "tags", "html", "forEach", "t", "name", "annotation", "meta", "split", "text", "pop", "info", "trim", "flipped", "includes", "settings", "arrowRot", "textDegree", "top", "line", "theInfo", "specificSettings", "JSON", "parse", "_extends", "error", "TwoslashError", "stringify", "message", "arrowSVG", "arrow", "style", "leftInner", "rightInner", "inner", "rot", "createHighlightedString", "ranges", "targetedWord", "tag", "x", "makeTagFromRange", "r", "close", "classes", "lsp", "htmlAttrReplacer", "underLineTargetedWord", "sort", "a", "b", "precedenceOf", "indexOf", "cmp", "begin", "end", "cursor", "nest", "data", "stack", "shift", "substring", "some", "length", "htmlAttrUnReplacer", "replaceTripleArrow", "stripHTML", "str", "replace", "subTripleArrow", "replaceTripleArrowEncoded", "table", "toString", "chr", "escapeHtml", "shouldBeHighlightable", "highlight", "Object", "keys", "find", "key", "isNaN", "parseInt", "shouldHighlightLine", "lines", "push", "first", "last", "lastIndex", "i", "preOpenerFromRenderingOptsWithExtras", "opts", "bg", "fg", "theme", "themeName", "classList", "title", "filter", "Boolean", "join", "attributes", "entries", "entry", "map", "value", "plainTextRenderer", "code", "options", "langId", "twoslashRenderer", "twoslash", "hasHighlight", "hl", "errorsGroupedByLine", "groupBy", "errors", "e", "Map", "staticQuickInfosGroupedByLine", "staticQuickInfos", "q", "queriesGroupedByLine", "queries", "tagsGroupedByLine", "filePos", "l", "get", "lspValues", "hiClass", "prefix", "emptyLine", "tokenPos", "token", "targetedQueryWord", "tokenContent", "findTokenFunc", "start", "character", "content", "errorsInToken", "lspResponsesInToken", "queriesInToken", "response", "allTokens", "allTokensByStart", "range", "kind", "lspText", "includeJSDocInHover", "docs", "color", "messages", "renderedMessage", "codes", "query", "queryTextWithPrefix", "halfWayAcrossTheTargetedWord", "repeat", "completions", "padStart", "offset", "prefixed", "c", "startsWith", "completionsPrefix", "lis", "localeCompare", "after", "substr", "isDeprecated", "kindModifiers", "liClass", "errorSVG", "warningSVG", "logSVG", "addTryButton", "playgroundLink", "playgroundURL", "list", "keyGetter", "item", "collection", "set", "defaultShikiRenderer", "tsconfig", "compilerOptions", "allowArbitraryExtensions", "allowImportingTsExtensions", "allowJs", "allowSyntheticDefaultImports", "allowUmdGlobalAccess", "allowUnreachableCode", "allowUnusedLabels", "alwaysStrict", "assumeChangesOnlyAffectDirectDependencies", "baseUrl", "charset", "checkJs", "clean", "composite", "customConditions", "declaration", "declarationDir", "declarationMap", "diagnostics", "disableFilenameBasedTypeAcquisition", "disableReferencedProjectLoad", "disableSizeLimit", "disableSolutionSearching", "disableSourceOfProjectReferenceRedirect", "downlevelIteration", "emitBOM", "emitDeclarationOnly", "emitDecoratorMetadata", "enable", "esModuleInterop", "exactOptionalPropertyTypes", "exclude", "excludeDirectories", "excludeFiles", "experimentalDecorators", "explainFiles", "extendedDiagnostics", "fallbackPolling", "files", "force", "forceConsistentCasingInFileNames", "generateCpuProfile", "importHelpers", "importsNotUsedAsValues", "include", "incremental", "inlineSourceMap", "inlineSources", "isolatedModules", "jsx", "jsxFactory", "jsxFragmentFactory", "jsxImportSource", "keyofStringsOnly", "lib", "listEmittedFiles", "listFiles", "locale", "mapRoot", "maxNodeModuleJsDepth", "module", "moduleDetection", "moduleResolution", "moduleSuffixes", "newLine", "noEmit", "noEmitHelpers", "noEmitOnError", "noErrorTruncation", "noFallthroughCasesInSwitch", "noImplicitAny", "noImplicitOverride", "noImplicitReturns", "noImplicitThis", "noImplicitUseStrict", "noLib", "noPropertyAccessFromIndexSignature", "noResolve", "noStrictGenericChecks", "noUncheckedIndexedAccess", "noUnusedLocals", "noUnusedParameters", "out", "outDir", "outFile", "paths", "plugins", "preserveConstEnums", "preserveSymlinks", "preserveValueImports", "preserveWatchOutput", "pretty", "reactNamespace", "references", "removeComments", "resolveJsonModule", "resolvePackageJsonExports", "resolvePackageJsonImports", "rootDir", "rootDirs", "skipDefaultLibCheck", "skipLibCheck", "sourceMap", "sourceRoot", "strict", "strictBindCallApply", "strictFunctionTypes", "strictNullChecks", "strictPropertyInitialization", "stripInternal", "suppressExcessPropertyErrors", "suppressImplicitAnyIndexErrors", "synchronousWatchDirectory", "target", "traceResolution", "tsBuildInfoFile", "typeAcquisition", "typeRoots", "types", "useDefineForClassFields", "useUnknownInCatchVariables", "verbatimModuleSyntax", "verbose", "watchDirectory", "watchFile", "tokenIsJSONKey", "explanation", "scopes", "s", "scopeName", "isKeyInTSConfig", "slice", "tsconfigJSONRenderer", "oneliner", "storedHighlighter", "renderCodeToHTML", "code", "lang", "meta", "shikiOptions", "highlighter", "twoslash", "storedHighlighter", "Error", "renderHighlighter", "renderOpts", "_extends", "fg", "getForegroundColor", "bg", "getBackgroundColor", "tokens", "tmpLang", "codeToThemedTokens", "error", "note", "plainTextRenderer", "twoslashRenderer", "langId", "startsWith", "tsconfig", "tsconfigJSONRenderer", "defaultShikiRenderer", "runTwoSlash", "input", "settings", "replacer", "json5", "yml", "hasReactImport", "includes", "disableImplicitReactImport", "test", "reactImport", "cutString", "split", "map", "item", "index", "concat", "join", "customTags", "results", "twoslasher", "runtime", "exports", "Op", "Object", "prototype", "hasOwn", "hasOwnProperty", "undefined", "$Symbol", "Symbol", "iteratorSymbol", "iterator", "asyncIteratorSymbol", "asyncIterator", "toStringTagSymbol", "toStringTag", "define", "obj", "key", "value", "defineProperty", "enumerable", "configurable", "writable", "err", "wrap", "innerFn", "outerFn", "self", "tryLocsList", "protoGenerator", "Generator", "generator", "create", "context", "Context", "_invoke", "makeInvokeMethod", "tryCatch", "fn", "arg", "type", "call", "GenStateSuspendedStart", "GenStateSuspendedYield", "GenStateExecuting", "GenStateCompleted", "ContinueSentinel", "GeneratorFunction", "GeneratorFunctionPrototype", "IteratorPrototype", "getProto", "getPrototypeOf", "NativeIteratorPrototype", "values", "Gp", "constructor", "displayName", "defineIteratorMethods", "forEach", "method", "isGeneratorFunction", "genFun", "ctor", "name", "mark", "setPrototypeOf", "__proto__", "awrap", "__await", "AsyncIterator", "PromiseImpl", "invoke", "resolve", "reject", "record", "result", "then", "unwrapped", "error", "previousPromise", "enqueue", "callInvokeWithMethodAndArg", "async", "Promise", "iter", "next", "done", "state", "Error", "doneResult", "delegate", "delegateResult", "maybeInvokeDelegate", "sent", "_sent", "dispatchException", "abrupt", "TypeError", "info", "resultName", "nextLoc", "toString", "pushTryEntry", "locs", "entry", "tryLoc", "catchLoc", "finallyLoc", "afterLoc", "tryEntries", "push", "resetTryEntry", "completion", "reset", "keys", "object", "reverse", "length", "pop", "iterable", "iteratorMethod", "isNaN", "i", "skipTempReset", "prev", "charAt", "slice", "stop", "rootEntry", "rootRecord", "rval", "exception", "handle", "loc", "caught", "hasCatch", "hasFinally", "finallyEntry", "complete", "finish", "thrown", "delegateYield", "module", "regeneratorRuntime", "accidentalStrictMode", "Function", "cachedTwoslashCall", "code", "lang", "settings", "isWebWorker", "WorkerGlobalScope", "isBrowser", "window", "document", "fetch", "runTwoSlash", "require", "createHash", "readFileSync", "existsSync", "mkdirSync", "writeFileSync", "join", "shikiVersion", "version", "tsVersion", "shasum", "codeSha", "update", "digest", "getNmCache", "__dirname", "includes", "split", "getPnpCache", "pnp", "getPackageInformation", "topLevel", "packageLocation", "cacheRoot", "process", "versions", "cachePath", "env", "debug", "console", "log", "JSON", "parse", "results", "recursive", "stringify", "addIncludes", "map", "lines", "l", "_i", "trimmed", "trim", "startsWith", "set", "replaceIncludesInCode", "_map", "toReplace", "match", "exec", "index", "lastIndex", "replaceWith", "get", "msg", "Array", "from", "newCode", "r", "substring", "escapeHtml", "html", "replace", "setupNodeForTwoslashException", "node", "css", "bodyFromTwoslashError", "title", "description", "recommendation", "bodyFromError", "message", "isJest", "jest", "eLog", "_str", "body", "String", "TwoslashError", "codeSample", "children", "Map", "getHTML", "fence", "highlighters", "twoslash", "twoslashSettings", "replacer", "json5", "meta", "include", "wrapFragments", "output", "highlighter", "themeName", "customName", "renderCodeToHTML", "_extends", "runTwoSlashOnNode", "shouldDisableTwoslash", "TWOSLASH_DISABLE", "importedCode", "highlighterCache", "highlightersFromSettings", "themes", "theme", "all", "getHighlighter", "parsingNewFile", "clear", "parseFence", "lex", "tokens", "indexOf", "splice", "remarkTwoslash", "has", "transform", "markdownAST", "visit", "remarkVisitor", "filter", "Boolean", "twoslashError", "ignoreCodeblocksWithCodefenceMeta", "shouldAlwaysRaise", "CI", "yeahButNotInTests", "alwayRaiseForTwoslashExceptions", "extension", "shikiHTML", "setupForFile", "transformAttributesToHTML", "fenceString"]
}
